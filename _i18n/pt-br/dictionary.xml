<?xml version="1.0" encoding="UTF-8"?>
<blocks>
  <block id="c8c3d1dbab26a87a3652e84d9f35d37f" category="summary">Quando você deve usar o Ansible versus a ferramenta de linha de comando PCs para gerenciar o cluster de HA?</block>
  <block id="932c5a738d1d867e858cd1dbc1391b1a" category="doc">Quando usar o Ansible versus a ferramenta PCs</block>
  <block id="272d3f535988cc62fbddd197f2ce0477" category="paragraph">Todas as tarefas de implantação e reconfiguração de cluster devem ser concluídas usando o Ansible a partir de um nó de controle externo do Ansible. Alterações temporárias no estado do cluster (por exemplo, colocar nós dentro e fora de espera) normalmente serão realizadas fazendo login em um nó do cluster (de preferência um que não esteja degradado ou prestes a ser submetido a manutenção) e usando a ferramenta de linha de comando PCs.</block>
  <block id="5b94af0d2c18b35c22f5cfa622f91a3c" category="paragraph">Usar o Ansible, modificar qualquer configuração do cluster, incluindo recursos, restrições, propriedades e serviços do BeeGFS. Manter uma cópia atualizada do inventário e do manual de estratégia do Ansible (idealmente no controle de origem para controlar alterações) faz parte da manutenção do cluster. Quando você precisar fazer alterações na configuração, atualize o inventário e execute novamente o manual de estratégia do Ansible que importa a função de HA do BeeGFS.</block>
  <block id="636c6afe41e34a0f4dc30a8fee8de25c" category="paragraph">A função de HA tratará da colocação do cluster no modo de manutenção e depois fará as alterações necessárias antes de reiniciar os serviços do BeeGFS ou do cluster para aplicar a nova configuração. Como as reinicializações completas de nós geralmente não são necessárias fora da implantação inicial, a reinstalação do Ansible geralmente é considerada um procedimento "seguro", mas é sempre recomendada durante períodos de manutenção ou horas extras, caso os serviços do BeeGFS precisem ser reiniciados. Essas reinicializações geralmente não devem causar erros de aplicativo, mas podem prejudicar o desempenho (o que alguns aplicativos podem lidar melhor que outros).</block>
  <block id="cfe79eee27daf73a913f7b76cbb46461" category="paragraph">A reexecução do Ansible também é uma opção quando você deseja retornar todo o cluster a um estado totalmente ideal e pode, em alguns casos, ser capaz de recuperar o estado do cluster com mais facilidade do que o uso de PCs. Especialmente durante uma emergência em que o cluster está inativo por algum motivo, uma vez que todos os nós estão voltando a executar o Ansible pode recuperar o cluster de forma mais rápida e confiável do que tentar usar PCs.</block>
  <block id="23bc11ca7e09a55b459ef424efb98c36" category="summary">Use PCs para visualizar o estado do cluster.</block>
  <block id="d4c39d91a1df6c7a7094c35722ec3ed5" category="doc">Examine o estado do cluster</block>
  <block id="3b878279a04dc47d60932cb294d96259" category="section-title">Visão geral</block>
  <block id="b6330a3d35150021353dc39d5bf1899a" category="paragraph">Executar<block ref="fcad1c87c23363c990849a7aaf9d6cd9" prefix=" " category="inline-code"></block> a partir de qualquer um dos nós de cluster é a maneira mais fácil de ver o estado geral do cluster e o status de cada recurso (como os serviços BeeGFS e suas dependências). Esta seção percorre o que você encontrará na saída do<block ref="fcad1c87c23363c990849a7aaf9d6cd9" prefix=" " category="inline-code"></block> comando.</block>
  <block id="a58022af0d3ce83b3b4031643fcdb7be" category="section-title">Compreender a saída de<block ref="fcad1c87c23363c990849a7aaf9d6cd9" prefix=" " category="inline-code"></block></block>
  <block id="24b70b7dc179eb742a98eca1b4c954b3" category="paragraph">Execute<block ref="fcad1c87c23363c990849a7aaf9d6cd9" prefix=" " category="inline-code"></block> em qualquer nó de cluster onde os serviços de cluster (Pacemaker e Corosync) são iniciados. A parte superior da saída irá mostrar-lhe um resumo do cluster:</block>
  <block id="9e1d70fa0d8e4964c3bd135b73fa8375" category="paragraph">A seção abaixo lista os nós no cluster:</block>
  <block id="ce0c86ab66a5ecdcc820da60194c7abc" category="paragraph">Isso indica notavelmente todos os nós que estão em standby ou offline. Os nós em modo de espera ainda estão participando do cluster, mas marcados como não qualificados para executar recursos. Os nós que estão offline indicam que os serviços de cluster não estão sendo executados nesse nó, seja devido a ser parado manualmente ou porque o nó foi reinicializado/encerrado.</block>
  <block id="39dd7b2f17eda84e2e8059bb568493c9" category="admonition">Quando os nós são iniciados pela primeira vez, os serviços de cluster serão interrompidos e precisam ser iniciados manualmente para evitar falhas acidentais de recursos para um nó que não seja saudável.</block>
  <block id="cbc566d6b815d43dd99c76ca8f2fd4f8" category="paragraph">Se os nós estiverem em standby ou offline devido a um motivo não administrativo (por exemplo, uma falha), o texto adicional será exibido ao lado do estado do nó entre parênteses. Por exemplo, se o esgrima estiver desativado e um recurso encontrar uma falha, você verá<block ref="1db3c4bcbb494ae3b1b2e86c57842a69" prefix=" " category="inline-code"></block>. Outro estado possível é<block ref="3fd6d1573d7af30709095c1a01f1fdd9" prefix=" " category="inline-code"></block>, que será visto brevemente como um nó está sendo cercado, mas persistirá se o fencing falhar, indicando que o cluster não pode confirmar o estado do nó (isso pode impedir que os recursos comecem em outros nós).</block>
  <block id="56cfcb8bfa2e43de0547ffbf4a2edd0e" category="paragraph">A próxima seção mostra uma lista de todos os recursos no cluster e seus estados:</block>
  <block id="45caf63eb71a242bf4ef160a8aeeb2a4" category="paragraph">Semelhante aos nós, o texto adicional será exibido ao lado do estado do recurso entre parênteses se houver algum problema com o recurso. Por exemplo, se o pacemaker solicitar uma parada de recurso e ele não for concluído dentro do tempo alocado, o pacemaker tentará cercar o nó. Se o esgrima estiver desativado ou a operação de esgrima falhar, o estado do recurso será<block ref="bb38152bf8b813a142650a06ad87363e" prefix=" " category="inline-code"></block> e o pacemaker não poderá iniciá-lo em um nó diferente.</block>
  <block id="028c86c0d3bdc4a78f8123e9fad41847" category="paragraph">Vale a pena notar que os clusters de HA do BeeGFS utilizam vários agentes de recursos OCF personalizados otimizados pelo BeeGFS. Em particular, o monitor BeeGFS é responsável por acionar um failover quando os recursos do BeeGFS em um nó específico não estiverem disponíveis.</block>
  <block id="9afe1c93907babebeb4d7a466e216a3e" category="summary">Adicione ou remova blocos de construção do cluster.</block>
  <block id="da82c1c93eafcb34930ae3da89361e1e" category="doc">Expanda ou diminua o cluster</block>
  <block id="c8fb5d104008cab3ab8a229181f5dfac" category="paragraph">Esta seção documenta várias considerações e opções para ajustar o tamanho do cluster BeeGFS HA. Normalmente, o tamanho do cluster é ajustado adicionando ou removendo componentes básicos, que geralmente são dois nós de arquivo configurados como um par de HA. Também é possível adicionar ou remover nós de arquivo individuais (ou outros tipos de nós de cluster), se necessário.</block>
  <block id="711c6d6edaed786b4dc0203b75460778" category="section-title">Adicionando um Building Block ao cluster</block>
  <block id="ea61e2c2ff507048203824add1eb7c21" category="section-title">Considerações</block>
  <block id="f29b9abf87c880782cf8c378e24a1668" category="paragraph">Aumentar o cluster adicionando componentes básicos adicionais é um processo simples. Antes de começar, lembre-se das restrições relativas ao número mínimo e máximo de nós de cluster em cada cluster de HA individual e determine se você deve adicionar nós ao cluster de HA existente ou criar um novo cluster de HA. Normalmente, cada componente básico consiste em dois nós de arquivo, mas três nós é o número mínimo de nós por cluster (para estabelecer quorum) e dez é o máximo recomendado (testado). Para cenários avançados, é possível adicionar um único nó "tiebreaker" que não executa nenhum serviço BeeGFS ao implantar um cluster de dois nós. Entre em Contato com o suporte da NetApp se você estiver pensando em tal implantação.</block>
  <block id="662a466b951b1af4fe3b4c3fd2e0370c" category="paragraph">Tenha em mente essas restrições e qualquer crescimento futuro esperado de cluster ao decidir como expandir o cluster. Por exemplo, se você tiver um cluster de seis nós e precisar adicionar mais quatro nós, seria recomendável apenas iniciar um novo cluster de HA.</block>
  <block id="2b988a3f29ebee8dccd80147a22c1bc6" category="admonition">Lembre-se: Um único sistema de arquivos BeeGFS pode consistir em vários clusters de HA independentes. Isso permite que os sistemas de arquivos continuem dimensionando muito além dos limites recomendados/físicos dos componentes subjacentes do cluster de HA.</block>
  <block id="f3a29486bed19a90f2da6d007818b427" category="section-title">Passos</block>
  <block id="ddc7c5e85c28111eae39eef12269daf4" category="inline-link-macro">use arquiteturas personalizadas</block>
  <block id="a33f0af0b0b4566b693084a9b90c220b" category="paragraph">Ao adicionar um componente básico ao cluster, você precisará criar os<block ref="3342582e194d63e4c91b56623752c9c6" prefix=" " category="inline-code"></block> arquivos para cada um dos novos nós de arquivo e nós de bloco (arrays e-Series). Os nomes desses hosts precisam ser adicionados ao inventário, juntamente com os novos recursos que devem ser criados. Os arquivos correspondentes<block ref="96fa973cda8809ad84f646e3d8fbbc1c" prefix=" " category="inline-code"></block> precisarão ser criados para cada novo recurso. Consulte <block ref="46924488f50abe82484adb9bfcdcde3b" category="inline-link-macro-rx"></block>a secção para obter detalhes.</block>
  <block id="0a9e15a6a510b24d4e6ac91c02152457" category="paragraph">Depois de criar os arquivos corretos, tudo o que é necessário é executar novamente a automação usando o comando:</block>
  <block id="8d695d37ced4690199d537aed9d4bd55" category="section-title">Removendo um Building Block do cluster</block>
  <block id="b68ea55d7263db6f96db88774fb7b864" category="paragraph">Há uma série de considerações a ter em mente quando você precisa aposentar um bloco de construção, por exemplo:</block>
  <block id="c26cc9593863fbf09a98a7c1809d4501" category="list-text">Quais serviços BeeGFS estão sendo executados nesse componente básico?</block>
  <block id="64e344a53d6a50c0b641de71dcc0d0e6" category="list-text">Apenas os nós de arquivo estão se aposentando e os nós de bloco devem ser anexados a novos nós de arquivo?</block>
  <block id="de3bc01ba61503e7b8699b9318d0fd0b" category="list-text">Se todo o componente básico estiver sendo aposentado, os dados devem ser movidos para um novo componente básico, dispersos em nós existentes no cluster ou movidos para um novo sistema de arquivos BeeGFS ou outro sistema de storage?</block>
  <block id="b6bb45be6629ebff573a5364d6abba3e" category="list-text">Isso pode acontecer durante uma interrupção ou deve ser feito sem interrupções?</block>
  <block id="9b0ed7965704c34f1d45d89e7afe7bfc" category="list-text">O componente básico está ativamente em uso ou contém dados que não estão mais ativos?</block>
  <block id="2f1f874ab85cc95aedb0e31639ddd1be" category="paragraph">Devido aos diversos pontos de partida possíveis e aos estados finais desejados, entre em Contato com o suporte da NetApp para que possamos identificar e ajudar a implementar a melhor estratégia com base em seu ambiente e requisitos.</block>
  <block id="9cdd9805effd30bec624c806fd980309" category="summary">Movimentação de serviços do BeeGFS entre nós de cluster.</block>
  <block id="f6054493b235622c6d85c56597db1eb1" category="doc">Serviços de failover e failback</block>
  <block id="2c053c4f4aa73d509803b712a335712b" category="paragraph">Os serviços BeeGFS podem fazer o failover entre nós no cluster para garantir que os clientes possam continuar acessando o sistema de arquivos em caso de falha ou que você precise executar a manutenção planejada. Esta seção descreve várias maneiras pelas quais os administradores podem curar o cluster depois de se recuperar de uma falha ou mover serviços manualmente entre nós.</block>
  <block id="07216bb55061288a2fa29cda954742e3" category="section-title">Failover e failback</block>
  <block id="23709dbf750335ca35bb098cb16932f2" category="section-title">Failover (planejado)</block>
  <block id="805e61a2ff2aebdab58587660993241c" category="paragraph">Geralmente, quando você precisa colocar um único nó de arquivo off-line para manutenção, você vai querer mover (ou drenar) todos os serviços BeeGFS desse nó. Isso pode ser feito colocando primeiro o nó em standby:</block>
  <block id="ecbf8d7e7d9f1eb0a529231cebd2199c" category="paragraph"><block ref="45235c2d84b11e465f5ed5176cc9fc73" prefix="" category="inline-code"></block></block>
  <block id="badd2ea7f58914039bb51471883e3461" category="paragraph">Depois de verificar o uso<block ref="fcad1c87c23363c990849a7aaf9d6cd9" prefix=" " category="inline-code"></block> de todos os recursos terem sido reiniciados no nó de arquivo alternativo, você pode encerrar ou fazer outras alterações no nó conforme necessário.</block>
  <block id="1343bdd328b646934d900b04ee8ba9bd" category="section-title">Failback (após um failover planejado)</block>
  <block id="746bffd8542d5a995ff4e29343881c45" category="paragraph">Quando você estiver pronto para restaurar os serviços BeeGFS para o nó preferido, primeiro execute<block ref="fcad1c87c23363c990849a7aaf9d6cd9" prefix=" " category="inline-code"></block> e verifique na "Lista de nós" o status está em espera. Se o nó foi reinicializado, ele será exibido offline até que você coloque os serviços de cluster online:</block>
  <block id="91e6580245db1e731f9ba78076973736" category="paragraph">Quando o nó estiver online, retire-o do modo de espera com:</block>
  <block id="040901cb649ee5383b238c42c7746fca" category="paragraph">Por último, reposicione todos os serviços BeeGFS de volta aos seus nós preferidos com:</block>
  <block id="6ebfd7088ae3d5d766caee83ef99e7bc" category="section-title">Failback (após um failover não planejado)</block>
  <block id="e09245effc62059e51f926fad603e413" category="inline-link-macro">solução de problemas</block>
  <block id="a9e2fb24cfaef729e583ffb43f910760" category="paragraph">Se um nó apresentar uma falha de hardware ou outra, o cluster de HA deve reagir automaticamente e mover seus serviços para um nó íntegro, fornecendo tempo para os administradores tomarem as medidas corretivas. Antes de prosseguir, consulte <block ref="9f376b3ee66d4a4a484e850809b96601" category="inline-link-macro-rx"></block>a seção para determinar a causa do failover e resolver quaisquer problemas pendentes. Depois que o nó estiver ligado novamente e saudável, você poderá prosseguir com o failback.</block>
  <block id="364ed45bbda2e3fd57309efe24fc0d55" category="paragraph">Quando um nó é inicializado após uma reinicialização não planejada (ou planejada), os serviços de cluster não são configurados para serem iniciados automaticamente, então você primeiro precisará colocar o nó on-line com:</block>
  <block id="f00b2994ca5cfc6ab0328a63736caa02" category="paragraph">Em seguida, limpe todas as falhas de recursos e redefina o histórico de esgrima do nó:</block>
  <block id="ac161f403f36186463574a43968aa121" category="paragraph">Verifique se<block ref="fcad1c87c23363c990849a7aaf9d6cd9" prefix=" " category="inline-code"></block> o nó está on-line e saudável. Por padrão, os serviços BeeGFS não irão fazer o failback automaticamente para evitar mover acidentalmente recursos de volta para um nó que não está saudável. Quando estiver pronto, retorne todos os recursos no cluster de volta aos nós preferidos com:</block>
  <block id="a65e0cef92147365de773d870438a30d" category="section-title">Movendo serviços individuais BeeGFS para nós de arquivos alternativos</block>
  <block id="606a28acf3a90904d7e27f3497573da7" category="section-title">Mova permanentemente um serviço BeeGFS para um novo nó de arquivo</block>
  <block id="8f56c19ef179745c1437a4f477337649" category="paragraph">Se você quiser alterar permanentemente o nó de arquivo preferido para um serviço BeeGFS individual, ajuste o inventário do Ansible para que o nó preferido seja listado primeiro e execute novamente o manual de estratégia do Ansible.</block>
  <block id="e8c7ab07a88c53743d909983583625f9" category="paragraph">Por exemplo, neste arquivo de exemplo<block ref="d28e452e49fc926f32af1d87afcff3ce" prefix=" " category="inline-code"></block>, beegfs_01 é o nó de arquivo preferido para executar o serviço de gerenciamento BeeGFS:</block>
  <block id="cb7c9e260fba17d2ffcc93361a0eab2e" category="paragraph">Reverter a ordem faria com que os serviços de gerenciamento fossem preferidos no beegfs_02:</block>
  <block id="346788f496d57b1e768d1dfaccdb3660" category="section-title">Mova temporariamente um serviço BeeGFS para um nó de arquivo alternativo</block>
  <block id="bad9cbcf702b276e1564c24e67ad301c" category="paragraph">Geralmente, se um nó estiver em manutenção, você vai querer usar as [etapas de failover e failback] para afastar todos os serviços desse nó.</block>
  <block id="0a51cf78eac085426260a02c70378519" category="paragraph">Se, por algum motivo, você precisar mover um serviço individual para uma execução diferente do nó de arquivo:</block>
  <block id="958b8a27f957bef8700299f8cafb9b9a" category="admonition">Não especifique recursos individuais ou o grupo de recursos. Sempre especifique o nome do monitor para o serviço BeeGFS que deseja realocar. Por exemplo, para mover o serviço de gerenciamento BeeGFS para beegfs_02 execute:<block ref="ad6bdcc4dd95b7dbe9e00b9894a08e42" prefix=" " category="inline-code"></block>. Esse processo pode ser repetido para afastar um ou mais serviços de seus nós preferidos. Verifique se o uso<block ref="fcad1c87c23363c990849a7aaf9d6cd9" prefix=" " category="inline-code"></block> dos serviços foi relocado/iniciado no novo nó.</block>
  <block id="15bda9336e0e061125e3b40fe7bfbb0f" category="paragraph">Para mover um serviço BeeGFS de volta para o nó preferido, primeiro limpe as restrições de recursos temporários (repetindo essa etapa conforme necessário para vários serviços):</block>
  <block id="d5c46792adbb43a012cbc1e858dc8bf4" category="paragraph">Então, quando estiver pronto para realmente mover o(s) serviço(s) de volta para o(s) nó(s) preferido(s) executado(s):</block>
  <block id="05ccfd1bb05ec0cb0ad0dbc5cfa2b32d" category="paragraph">Observação esse comando irá realocar quaisquer serviços que não tenham mais restrições de recursos temporários que não estejam localizados em seus nós preferidos.</block>
  <block id="7728706b8b42de0081920e7246a76547" category="summary">Impedir que o cluster de HA reaja acidentalmente às alterações pretendidas no ambiente.</block>
  <block id="e1fee8e589d1f622a7c4194531dd6d51" category="doc">Coloque o cluster no modo de manutenção</block>
  <block id="de51662eceb9c88ae773c201eb0345d1" category="paragraph">Colocar o cluster no modo de manutenção desativa todo o monitoramento de recursos e impede que o pacemaker mova ou gerencie recursos no cluster. Todos os recursos permanecerão em execução em seus nós originais, independentemente de haver uma condição de falha temporária que os impeça de serem acessíveis. Os cenários em que isso é recomendado/útil incluem:</block>
  <block id="ea4d028cbc39da373f2405d19e55ab0f" category="list-text">Manutenção de rede que pode interromper temporariamente as conexões entre nós de arquivo e serviços BeeGFS.</block>
  <block id="fb9f2ee248fa11ccfb854f09fcda2a80" category="list-text">Atualizações do nó de bloco.</block>
  <block id="92a6e3227dfe7be15777e64043fb613f" category="list-text">File Node sistema operacional, kernel ou outras atualizações de pacote.</block>
  <block id="6c1cf36b91fdf2375e857652291bab2e" category="paragraph">Geralmente, a única razão para colocar manualmente o cluster no modo de manutenção é impedir que ele reaja a alterações externas no ambiente. Se um nó individual no cluster exigir reparo físico, não use o modo de manutenção e simplesmente coloque esse nó em espera seguindo o procedimento acima. Observe que a reexecução do Ansible coloca o cluster automaticamente em modo de manutenção, facilitando a manutenção de software, incluindo atualizações e alterações de configuração.</block>
  <block id="bbf6745fae83e12806200feeb795f0ef" category="paragraph">Para verificar se o cluster está no modo de manutenção, execute:</block>
  <block id="4a6b1ae7d59c5bf02b1b5759e9f9b8e7" category="paragraph">Isso retornará FALSE quando o cluster estiver operando normalmente. Para ativar a execução do modo de manutenção:</block>
  <block id="4ecbc8384cde54344112e6ab08db42be" category="paragraph">Você pode verificar executando o status dos PCs e garantindo que todos os recursos mostrem "(unmanaged)". Para retirar o cluster do modo de manutenção, execute:</block>
  <block id="647328604bd666deba44b0caaea998a2" category="summary">Saiba como administrar clusters de HA do BeeGFS após a implantação.</block>
  <block id="0aa1ffb15625f418cfc560deda2535bb" category="doc">Visão geral, conceitos-chave e terminologia</block>
  <block id="d051e95d54ee33ed5c79e05f582bab59" category="paragraph">Esta seção destina-se aos administradores de cluster que precisam gerenciar clusters de HA do BeeGFS após a implantação. Mesmo aqueles que estão familiarizados com os clusters de HA do Linux devem ler cuidadosamente este guia, pois há várias diferenças em como gerenciar o cluster, especialmente em relação à reconfiguração devido ao uso do Ansible.</block>
  <block id="612b7c650263f39248b97e7e57b35a77" category="section-title">Conceitos-chave</block>
  <block id="db7e5dec439a7c83d48d86330a62e954" category="inline-link-macro">termos e conceitos</block>
  <block id="d97281ea1240a72da4b3d700493296c1" category="paragraph">Embora alguns desses conceitos sejam introduzidos na página principal<block ref="aeb2367c8b6e8485692304c0f57562a5" category="inline-link-macro-rx"></block>, é útil reintroduzi-los no contexto de um cluster BeeGFS HA:</block>
  <block id="8961c26dabe98c278717f1cb0fc25fdc" category="paragraph">**Nó de cluster:** Um servidor executando serviços de pacemaker e Corosync e participando do cluster HA.</block>
  <block id="e0a3a06b3c015009967896eb40327e82" category="paragraph">**Nó de arquivo:** Um nó de cluster usado para executar um ou mais serviços de gerenciamento, metadados ou storage do BeeGFS.</block>
  <block id="1985ebdeb71d83b6b551914e77b2b178" category="paragraph">**Nó de bloco:** Um sistema de storage do NetApp e-Series que fornece storage de bloco para nós de arquivos. Esses nós não participam do cluster BeeGFS HA, pois fornecem suas próprias funcionalidades de HA autônomas. Cada nó consiste em duas controladoras de storage que fornecem alta disponibilidade na camada de bloco.</block>
  <block id="31a3205f29074295100fad4351661826" category="paragraph">**Serviço BeeGFS:** Um serviço de gerenciamento, metadados ou storage do BeeGFS. Cada nó de arquivo executará um ou mais serviços que usarão volumes no nó de bloco para armazenar seus dados.</block>
  <block id="495f4cf25a1d9d4e5a1258aafbbf0c8d" category="paragraph">**Bloco básico:** Uma implantação padronizada de nós de arquivo BeeGFS, nós de bloco de e-Series e serviços BeeGFS executados neles, o que simplifica o dimensionamento de um sistema de arquivos/cluster BeeGFS HA seguindo uma arquitetura verificada pelo NetApp. Clusters de HA personalizados também são compatíveis, mas geralmente seguem uma abordagem de componentes básicos semelhante para simplificar o dimensionamento.</block>
  <block id="f1816719094f9c5af3f9f2666c1c5666" category="paragraph">**Cluster do BeeGFS HA:** Um número dimensionável de nós de arquivo usados para executar serviços do BeeGFS com o respaldo de nós de bloco para armazenar dados do BeeGFS de maneira altamente disponível. Desenvolvido com base em componentes de código aberto comprovados pela indústria, a Pacemaker e o Corosync, usando o Ansible para embalagem e implantação.</block>
  <block id="830f6f39f3eb0533714fc986605bb0fc" category="paragraph">**Serviços de cluster:** refere-se aos serviços de pacemaker e Corosync executados em cada nó que participa do cluster. Observação é possível que um nó não execute nenhum serviço BeeGFS e apenas participe do cluster como nó "tiebreaker", caso haja apenas a necessidade de dois nós de arquivo.</block>
  <block id="ac47f8eb4b50e1f3fefe94fafff761c2" category="paragraph">**Recursos de cluster:** para cada serviço BeeGFS executado no cluster, você verá um recurso de monitoramento BeeGFS e um grupo de recursos contendo recursos para destino(s) BeeGFS, endereço(s) IP (IPs flutuantes) e o próprio serviço BeeGFS.</block>
  <block id="25d0c377de7b7699ce796352723a7a41" category="paragraph">**Ansible:** Uma ferramenta para provisionamento de software, gerenciamento de configurações e implantação de aplicações, habilitando a infraestrutura como código. É como os clusters do BeeGFS são empacotados para simplificar o processo de implantação, reconfiguração e atualização do BeeGFS no NetApp.</block>
  <block id="53ece6444fc3a7adacd61f55a3d5e410" category="paragraph">**PCs:** Uma interface de linha de comando disponível a partir de qualquer um dos nós de arquivo no cluster usado para consultar e controlar o estado de nós e recursos no cluster.</block>
  <block id="1ed63b060fea1b0497535f402b308312" category="section-title">Terminologia comum</block>
  <block id="d3d43886ce330c5bc1abf87c9da84517" category="paragraph">**Failover:** cada serviço BeeGFS tem um nó de arquivo preferido em que será executado, a menos que esse nó falhe. Quando um serviço BeeGFS está sendo executado no nó de arquivo secundário/não preferencial, diz-se que está em failover.</block>
  <block id="360fc740d5a934107e93d720053a8a24" category="paragraph">**Failback:** o ato de mover os serviços BeeGFS de um nó de arquivo não preferencial de volta para o nó preferido.</block>
  <block id="1687b43e3f76609bd3a5dda1cdbd29b3" category="paragraph">**Par de HA:** dois nós de arquivos que podem acessar o mesmo conjunto de nós de bloco às vezes são referidos como um par de HA. Este é um termo comum usado em todo o NetApp para se referir a dois controladores de storage ou nós que podem "assumir o controle" uns dos outros.</block>
  <block id="3663bc32267b225ac55e52a4e99f2b3c" category="inline-link-macro">modo de manutenção</block>
  <block id="9faa71c9a363d883afdd567d859ce5b2" category="paragraph">**Modo de manutenção:** desativa todo o monitoramento de recursos e impede que o pacemaker mova ou gerencie recursos no cluster (consulte também a seção em <block ref="bcf91b88f4600ab15eefb2c3b749ba9b" category="inline-link-macro-rx"></block>).</block>
  <block id="e7f8a11794ad2275f244bec012ef84de" category="paragraph">**Cluster de HA:** um ou mais nós de arquivos executando serviços BeeGFS que podem fazer o failover entre vários nós no cluster para criar um sistema de arquivos BeeGFS altamente disponível. Normalmente, os nós de arquivos são configurados em pares de HA que podem executar um subconjunto dos serviços BeeGFS no cluster.</block>
  <block id="c94162d41104b03145716ac6946bd39a" category="summary">Use o Ansible para reconfigurar o cluster.</block>
  <block id="388a6dd09725cda0da5d81c2d32f9c19" category="doc">Reconfigure o cluster de HA e o BeeGFS</block>
  <block id="cb584c33a4eae31ed6d0c6ae575a915c" category="inline-link-macro">Especifique a Configuração do nó de ficheiro Comum</block>
  <block id="9ce95feb3853f5a2e43ca0d15f2341bd" category="paragraph">De um modo geral, a reconfiguração de qualquer aspecto do cluster BeeGFS HA deve ser feita atualizando seu inventário do Ansible e executando novamente<block ref="6afa1ad605a4192ba2e50e8be9966e68" prefix=" " category="inline-code"></block> o comando. Isso inclui atualização de alertas, alteração da configuração de cercas permanentes ou ajuste da configuração do serviço BeeGFS. Estes são ajustados usando o<block ref="4003590e6e5408f8e5272e50f909dfac" prefix=" " category="inline-code"></block> arquivo e uma lista completa de opções pode ser encontrada <block ref="dc7fd2b3ea1b2b4a060b953a1b281371" category="inline-link-macro-rx"></block>na seção.</block>
  <block id="f7f37d848a0be4caeb97d6886778dc2a" category="paragraph">Consulte abaixo para obter detalhes adicionais sobre opções de configuração selecionadas que os administradores devem estar cientes ao executar a manutenção ou a manutenção do cluster.</block>
  <block id="d876616b83b1231cc28d82f157ed29c5" category="section-title">Como desativar e ativar o Esgrima</block>
  <block id="22228968b8b77db0d4e57d7cb284feb3" category="paragraph">O esgrima é ativado/exigido por padrão ao configurar o cluster. Em alguns casos, pode ser desejável desativar temporariamente o esgrima para garantir que os nós não sejam acidentalmente desligados ao executar determinadas operações de manutenção (como atualizar o sistema operacional). Embora isso possa ser desativado manualmente, há compensações que os administradores devem estar cientes.</block>
  <block id="bdb2b6bd7635150b7e92a51e70612e12" category="section-title">Opção 1: Desativar cercas usando o Ansible (recomendado).</block>
  <block id="619a84cba5006df3e436e2a726ca2871" category="paragraph">Quando a vedação é desativada usando o Ansible, a ação on-fail do monitor BeeGFS é alterada de "cerca" para "espera". Isso significa que, se o monitor BeeGFS detetar uma falha, ele tentará colocar o nó em espera e fazer o failover de todos os serviços BeeGFS. Fora da solução de problemas/testes ativos, isso geralmente é mais desejável do que a opção 2. A desvantagem é que se um recurso não parar no nó original, ele será bloqueado de começar em outro lugar (é por isso que o esgrima é normalmente necessário para clusters de produção).</block>
  <block id="0809fe829e193f81980e79631c9c15cc" category="list-text">No inventário do Ansible,<block ref="24eab3114da61057c831607cf391b3b9" prefix=" " category="inline-code"></block> adicione a seguinte configuração:</block>
  <block id="d73646db1bf30029f2486d5b7462cde5" category="list-text">Execute novamente o manual de estratégia do Ansible para aplicar as alterações ao cluster.</block>
  <block id="50a460b97c563d3429b629b6911db7d5" category="section-title">Opção 2: Desativar a vedação manualmente.</block>
  <block id="28850c63d2fb8db15eeb1664c121e11b" category="paragraph">Em alguns casos, você pode desativar temporariamente o esgrima sem executar novamente o Ansible, talvez para facilitar a solução de problemas ou o teste do cluster.</block>
  <block id="e0740d4e01fcc73df3a73294627cd292" category="admonition">Nessa configuração, se o monitor BeeGFS detetar uma falha, o cluster tentará interromper o grupo de recursos correspondente. Ele NÃO acionará um failover completo ou tentará reiniciar ou mover o grupo de recursos afetado para outro host. Para recuperar, solucione quaisquer problemas em seguida, execute<block ref="b292ce60014c1c0e30e4db1f177243d3" prefix=" " category="inline-code"></block> ou coloque manualmente o nó em espera.</block>
  <block id="0ca6560aa88bd22fa1b3bb69d8594555" category="paragraph">Passos:</block>
  <block id="99f83169540f1c3e08a1e696707dcbee" category="list-text">Para determinar se a vedação (stonith) está globalmente ativada ou desativada, execute:<block ref="f9bc36eebaadfbe3971849dbb1a7a291" prefix=" " category="inline-code"></block></block>
  <block id="88653da28715cbac123466935349c7b2" category="list-text">Para desativar a execução de esgrima:<block ref="d3749d5705f2a9af97f05b0c5c91b235" prefix=" " category="inline-code"></block></block>
  <block id="79c811c32be072ba96828f7eaf67e191" category="list-text">Para ativar a execução de esgrima:<block ref="65795833f6c4653caabc1cbacafe84d8" prefix=" " category="inline-code"></block></block>
  <block id="54dfcc160f4c7fc21df07ee9c7df6f86" category="paragraph">Observação: Essa configuração será substituída na próxima vez que você executar o manual do Ansible.</block>
  <block id="b64fbf2b70c0da78d7c165d234dbde59" category="summary">Substituindo um nó de arquivo se o servidor original estiver com defeito.</block>
  <block id="813789e46622daf96cc8a246b7123900" category="doc">Substituir nós de arquivo</block>
  <block id="7d8e819a8720821d1bda4944e3b284f8" category="paragraph">Esta é uma visão geral das etapas necessárias para substituir um nó de arquivo no cluster. Essas etapas presumem que o nó do arquivo falhou devido a um problema de hardware e foi substituído por um novo nó de arquivo idêntico.</block>
  <block id="237c1293f678bb3fb45da7ff985bc6ff" category="list-text">Substitua fisicamente o nó de arquivo e restaure todo o cabeamento para o nó de bloco e rede de armazenamento.</block>
  <block id="2fcfb8cbd69fbc9fbfe292049243f520" category="list-text">Reinstale o sistema operacional no nó de arquivo, incluindo a adição de assinaturas Red Hat.</block>
  <block id="54bf3b134460f90ada283da98dfe7f55" category="list-text">Configurar o gerenciamento e a rede BMC no nó de arquivo.</block>
  <block id="e07337279837c08243349fd1812b45ad" category="list-text">Atualize o inventário do Ansible se o nome de host, IP, mapeamentos de interface PCIe para lógica ou qualquer outra coisa mudou sobre o novo nó de arquivo. Geralmente, isso não é necessário se o nó foi substituído por hardware de servidor idêntico e você estiver usando a configuração de rede original.</block>
  <block id="1092a09068da1d54ef98835a92b7ae93" category="list-text">Por exemplo, se o nome do host mudou, crie (ou renomeie) o arquivo de inventário do nó <block ref="68c99491876298ad1740f875d0009eb1" prefix="(" category="inline-code"></block>) e, em seguida, no arquivo de inventário do Ansible <block ref="d28e452e49fc926f32af1d87afcff3ce" prefix="(" category="inline-code"></block>), substitua o nome do nó antigo pelo novo nome do nó:</block>
  <block id="4e77e3629d6cf2dd24d01cd0816444dc" category="list-text">De um dos outros nós no cluster, remova o nó antigo:<block ref="0b3c8b6f1b9e3417f6658a2d7bf57e50" prefix=" " category="inline-code"></block>.</block>
  <block id="80b3f35b9a09098f23ac89ae2b86b045" category="admonition">NÃO PROSSIGA ANTES DE EXECUTAR ESTE PASSO.</block>
  <block id="b13bbcb9af62574d6f02dd11fb1e8467" category="list-text">No nó de controle do Ansible:</block>
  <block id="bdd8d1913bd5c9a453285898025b96c3" category="list-text">Remova a chave SSH antiga com:</block>
  <block id="357f3d871a04ba99dca4088160a070c7" category="list-text">Configure o SSH sem senha para o nó Substituir por:</block>
  <block id="7142a43bd39c703832e1dedd5cc1781d" category="list-text">Execute novamente o manual de estratégia do Ansible para configurar o nó e adicioná-lo ao cluster:</block>
  <block id="cb6fdf37da197d680c43c0f6f18ad11d" category="list-text">Neste ponto, execute<block ref="fcad1c87c23363c990849a7aaf9d6cd9" prefix=" " category="inline-code"></block> e verifique se o nó substituído está listado e executando serviços.</block>
  <block id="0532f63b7151a82cb4b5e3351e2371d0" category="summary">Parar e iniciar o cluster HA com simplicidade.</block>
  <block id="7479b021f04933331bfad4de007ca0c2" category="doc">Pare e inicie o cluster</block>
  <block id="2b884da4a956e42f63bc07b5d20c50b1" category="paragraph">Esta seção descreve como encerrar e reiniciar o cluster BeeGFS com simplicidade. Exemplos de cenários onde isso pode ser necessário incluem manutenção elétrica ou migração entre data centers ou racks.</block>
  <block id="c61d5048d10a534a03e7687782b475e2" category="paragraph">Se, por algum motivo, você precisar parar todo o cluster BeeGFS e encerrar todos os serviços serão executados:</block>
  <block id="3ad6e9988864aeae2ef386345946dc6d" category="inline-link-macro">failover</block>
  <block id="1b8fa8fe7d656db42e80d5a6ce645ec8" category="paragraph">Também é possível parar o cluster em nós individuais (que farão failover automático de serviços para outro nó), embora seja recomendável colocar primeiro o nó em standby (consulte <block ref="a588c352114ff4abc3bdc2aa2fbe7c6e" category="inline-link-macro-rx"></block>a seção):</block>
  <block id="9e94ba8f70ed52b0ae6c2a8725f97a9f" category="paragraph">Para iniciar os serviços e recursos do cluster em todos os nós executados:</block>
  <block id="80bd5673b361d19dc46e6b882f98b061" category="paragraph">Ou inicie serviços em um nó específico com:</block>
  <block id="56ad9ec5396c5f035697d1e62c4b0926" category="paragraph">Nesse momento, execute<block ref="fcad1c87c23363c990849a7aaf9d6cd9" prefix=" " category="inline-code"></block> e verifique se o cluster e os serviços BeeGFS começam em todos os nós, e os serviços estão sendo executados nos nós que você espera.</block>
  <block id="f2cc0b0e79d5eccda5009e593729ce23" category="admonition">Dependendo do tamanho do cluster, ele pode levar algum tempo (segundos a minutos) para que todo o cluster pare, ou mostrar iniciado em<block ref="fcad1c87c23363c990849a7aaf9d6cd9" prefix=" " category="inline-code"></block>. se<block ref="88f9ea6da6d01a3e529f8aa41e0e4643" prefix=" " category="inline-code"></block> travar por mais de cinco minutos, antes de executar "Ctrl C" para cancelar o comando, faça login em cada nó do cluster e use<block ref="fcad1c87c23363c990849a7aaf9d6cd9" prefix=" " category="inline-code"></block> para ver se os serviços de cluster (Corosync/Pacemaker) ainda estão em execução nesse nó. De qualquer nó em que o cluster ainda esteja ativo, você pode verificar quais recursos estão bloqueando o cluster. Aborde manualmente o problema e o comando deve ser concluído ou pode ser executado novamente para parar quaisquer serviços restantes.</block>
  <block id="1819205ce38618cd2752bb84e2b73e58" category="summary">Solução de problemas de um cluster BeeGFS HA.</block>
  <block id="d60c463bb4096f3ed4bd1618626dfe10" category="doc">Solucionar problemas</block>
  <block id="b162a91192a0936d7593cb252c65dfd8" category="paragraph">Esta seção descreve como investigar e solucionar problemas de várias falhas e outros cenários que podem surgir ao operar um cluster BeeGFS HA.</block>
  <block id="40327cd11d60bd1f114b3e4566f94e50" category="section-title">Guias de solução de problemas</block>
  <block id="e1c58302972da23d09a5ab5fe221a170" category="section-title">Investigando failovers inesperados</block>
  <block id="4fbaa99fc13cc42ed40e8b05969de8fb" category="paragraph">Quando um nó é fechado inesperadamente e seus serviços são movidos para outro nó, a primeira etapa deve ser verificar se o cluster indica falhas de recursos na parte inferior<block ref="fcad1c87c23363c990849a7aaf9d6cd9" prefix=" " category="inline-code"></block>do . Normalmente, nada estará presente se o esgrima for concluído com sucesso e os recursos forem reiniciados em outro nó.</block>
  <block id="31288ba37f67baa9a96377c197fd16b4" category="paragraph">Geralmente, o próximo passo será pesquisar através dos logs do systemd usando<block ref="eed23a3d2310f43954a09887cb36b398" prefix=" " category="inline-code"></block> em qualquer um dos nós de arquivo restantes (os logs do pacemaker são sincronizados em todos os nós). Se você souber a hora em que ocorreu a falha, você pode iniciar a pesquisa imediatamente antes da falha ocorrer (geralmente, pelo menos dez minutos antes é recomendado):</block>
  <block id="adc8528fced336e7a819071c746b5738" category="paragraph">As seções a seguir mostram o texto comum que você pode grep nos logs para restringir ainda mais a investigação.</block>
  <block id="a6dea15cd908ef20a94b7b92df902f0b" category="section-title">Passos para investigar/resolver</block>
  <block id="d418f50c5ddea28b4ca856017b36cb20" category="section-title">Passo 1: Verifique se o monitor BeeGFS detetou uma falha:</block>
  <block id="a0d295ceecafcdade2e77c52fee836e0" category="paragraph">Se o failover tiver sido acionado pelo monitor BeeGFS, você verá um erro (se não prosseguir para a próxima etapa).</block>
  <block id="ba83328d8d0f6845114641c46fd328ed" category="paragraph">Neste caso, o serviço BeeGFS meta_08 parou por algum motivo. Para continuar a solução de problemas, devemos inicializar o beegfs_02 e revisar os logs do serviço em<block ref="45434eee994714888e9eafad4993b0d3" prefix=" " category="inline-code"></block>. Por exemplo, o serviço BeeGFS pode ter encontrado um erro de aplicação devido a um problema interno ou problema com o nó.</block>
  <block id="ba35f78b5ee9757310a818131880e7ba" category="admonition">Diferentemente dos logs do pacemaker, os logs dos serviços BeeGFS não são distribuídos para todos os nós do cluster. Para investigar esses tipos de falhas, os logs do nó original onde a falha ocorreu são necessários.</block>
  <block id="e7ed0a662a65a2b9a77688262294bdeb" category="paragraph">Possíveis problemas que podem ser relatados pelo monitor incluem:</block>
  <block id="7cdeb72a25ab193e904385b516b1b346" category="list-text">O(s) alvo(s) não estão acessíveis!</block>
  <block id="b5937b98653f70b6902650183cf4ec74" category="list-text">Descrição: Indica que os volumes de bloco não estavam acessíveis.</block>
  <block id="2fe85519f178203eb9e17cd7d958eff5" category="list-text">Resolução de problemas:</block>
  <block id="a337b1ea21fcd18ca666a6d53d5d43cd" category="list-text">Se o serviço também não conseguir iniciar no nó de arquivo alternativo, confirme se o nó de bloco está em bom estado.</block>
  <block id="1a92a4c3328c821522ae4b4f7b7939f4" category="list-text">Verifique se há problemas físicos que impeçam o acesso aos nós de bloco a partir deste nó de arquivo, por exemplo, adaptadores InfiniBand com defeito ou cabos.</block>
  <block id="07d73b1c441d1587365e83eab249cc0e" category="list-text">A rede não está acessível!</block>
  <block id="640de5e4317b2b6b4cdfc75056c11dc1" category="list-text">Descrição: Nenhum dos adaptadores usados pelos clientes para se conetar a este serviço BeeGFS estava online.</block>
  <block id="a6fe0c48e93a5942e6a707553dc58b72" category="list-text">Se vários/todos os nós de arquivo foram afetados, verifique se houve uma falha na rede usada para conetar os clientes BeeGFS e o sistema de arquivos.</block>
  <block id="89af81e10eaa132cd26657feb6c0255d" category="list-text">Verifique se há problemas físicos que impeçam o acesso aos clientes a partir deste nó de arquivo, por exemplo, adaptadores InfiniBand ou cabos defeituosos.</block>
  <block id="74a668540699bf39afc1015b6ce839e7" category="list-text">O serviço BeeGFS não está ativo!</block>
  <block id="d297ccf512793d172de0cfd4051e2e96" category="list-text">Descrição: Um serviço BeeGFS parou inesperadamente.</block>
  <block id="4937184e80e5bebefae7244965d351b9" category="list-text">No nó de arquivo que relatou o erro, verifique os logs para o serviço BeeGFS impactado para ver se ele relatou uma falha. Se isso aconteceu, abra um caso com o suporte do NetApp para que a falha possa ser investigada.</block>
  <block id="feec20659fe99c02d4979b8ad026cc97" category="list-text">Se não houver erros relatados no log BeeGFS, verifique os logs do diário para ver se systemd registrou um motivo pelo qual o serviço foi interrompido. Em alguns cenários, o serviço BeeGFS pode não ter tido a chance de Registrar quaisquer mensagens antes do processo ser encerrado (por exemplo, se alguém executou<block ref="c287e2fa9b978b64df6b25bc14f4ebad" prefix=" " category="inline-code"></block> ).</block>
  <block id="6c187654c83a0705225e629e5ef0e690" category="section-title">Etapa 2: Verifique se o nó deixou o cluster inesperadamente</block>
  <block id="48de5b8ba61031259301e7dcfed5f30f" category="paragraph">Caso o nó tenha sofrido alguma falha catastrófica de hardware (por exemplo, a placa do sistema morreu) ou tenha ocorrido um problema de pânico do kernel ou de software semelhante, o monitor BeeGFS não reportará um erro. Em vez disso, procure o nome do host e você deve ver mensagens do Pacemaker indicando que o nó foi perdido inesperadamente:</block>
  <block id="e2c890774d7c7d0dbdd940e9e70a6e38" category="section-title">Passo 3: Verifique se o pacemaker foi capaz de cercar o nó</block>
  <block id="233ac49c948b907a2f3ece7ba249837e" category="paragraph">Em todos os cenários, você deve ver o pacemaker tentar cercar o nó para verificar se ele está realmente offline (as mensagens exatas podem variar por causa da esgrima):</block>
  <block id="43878a52c3fd9ee95d536dd53db82be8" category="paragraph">Se a ação de esgrima for concluída com sucesso, você verá mensagens como:</block>
  <block id="c9fc2871ff88666659a1639b7bc7a907" category="paragraph">Se a ação de esgrima falhou por algum motivo, os serviços BeeGFS não poderão reiniciar em outro nó para evitar o risco de corrupção de dados. Isso seria um problema para investigar separadamente, se, por exemplo, o dispositivo de vedação (PDU ou BMC) estivesse inacessível ou mal configurado.</block>
  <block id="824b5f569e1c282ba489e1d3fe24611f" category="section-title">Ações recurso Falha Endereço (encontradas na parte inferior do status PCs)</block>
  <block id="ac9c4f2d9dc79954795119e7ac4da835" category="inline-link-macro">failback após um failover não planejado</block>
  <block id="5b359307b8bd7b288c8e5b703cdf97d4" category="paragraph">Se um recurso necessário para executar um serviço BeeGFS falhar, um failover será acionado pelo monitor BeeGFS. Se isso ocorrer, provavelmente não haverá "ações de recurso com falha" listadas na parte inferior do<block ref="fcad1c87c23363c990849a7aaf9d6cd9" prefix=" " category="inline-code"></block> e você deve consultar as etapas sobre como <block ref="0a749dc3cd00487c17b8cc6492fb44ee" category="inline-link-macro-rx"></block>.</block>
  <block id="afdd1f65895e11b4a9ab295926e39116" category="paragraph">Caso contrário, geralmente deve haver apenas dois cenários onde você verá "ações de recurso falhadas".</block>
  <block id="43c78de0154f6f48f749527f62bfd41c" category="section-title">Cenário 1: Um problema temporário ou permanente foi detetado com um agente de esgrima e foi reiniciado ou movido para outro nó.</block>
  <block id="b06e37c96b80ada3e042c0997f9d54a6" category="paragraph">Alguns agentes de vedação são mais confiáveis do que outros, e cada um implementará seu próprio método de monitoramento para garantir que o dispositivo de vedação esteja pronto. Em particular, o agente de esgrima do redfish foi visto para relatar ações de recursos falhadas como as seguintes, mesmo que ele ainda mostre iniciado:</block>
  <block id="13ff1974a31501c1a357c51cda2ff685" category="paragraph">Não é esperado que um agente de esgrima que relata ações de recursos com falha em um nó específico acione um failover dos serviços BeeGFS executados nesse nó. Ele deve simplesmente ser reiniciado automaticamente no mesmo nó ou em um nó diferente.</block>
  <block id="549252a4b6f49c6993519d622a3e9c5d" category="paragraph">Passos para resolver:</block>
  <block id="51f376a71f801714c5dbbdfa83541a86" category="list-text">Se o agente de esgrima se recusar a executar consistentemente em todos ou em um subconjunto de nós, verifique se esses nós são capazes de se conetar ao agente de esgrima e verifique se o agente de esgrima está configurado corretamente no inventário do Ansible.</block>
  <block id="1ae58017c838c0e0ed1e3299e7c683d5" category="list-text">Por exemplo, se um agente de esgrima de peixe vermelho (BMC) estiver sendo executado no mesmo nó que é responsável por esgrima, e o gerenciamento de SO e IPs BMC estiverem na mesma interface física, algumas configurações de switch de rede não permitirão a comunicação entre as duas interfaces (para evitar loops de rede). Por padrão, o cluster de HA tentará evitar colocar agentes de vedação no nó que são responsáveis por cercas, mas isso pode acontecer em alguns cenários/configurações.</block>
  <block id="217b4320fb1b29ae95bb478645ec6ba8" category="list-text">Uma vez que todos os problemas são resolvidos (ou se o problema parecia efêmero), execute<block ref="b292ce60014c1c0e30e4db1f177243d3" prefix=" " category="inline-code"></block> para redefinir as ações de recursos com falha.</block>
  <block id="5e2b597167eb07cb64833681dcd53f6f" category="section-title">Cenário 2: O monitor BeeGFS detetou um problema e acionou um failover, mas por algum motivo os recursos não puderam ser iniciados em um nó secundário.</block>
  <block id="cf41377d64715247d22bef68c671d9dc" category="paragraph">Desde que o esgrima esteja habilitado e o recurso não tenha sido bloqueado de parar no nó original (consulte a seção de solução de problemas para "standby (on-fail)"), as razões mais prováveis incluem problemas para iniciar o recurso em um nó secundário porque:</block>
  <block id="ecbc2fa36aa8e4ccfd535f315ff5a1bc" category="list-text">O nó secundário já estava offline.</block>
  <block id="9fc9f95992286a812b388e7c2def3cde" category="list-text">Um problema de configuração físico ou lógico impediu que o secundário acessasse os volumes de bloco usados como destinos BeeGFS.</block>
  <block id="1ffc42a5bdee5039a96dffea4901017d" category="list-text">Para cada entrada nas ações de recursos com falha:</block>
  <block id="fb6dc7c10276db82fd903122c9aa6780" category="list-text">Confirme se a ação de recurso falhou foi uma operação de início.</block>
  <block id="6ec17a9b3e2983ef695c793467180ed8" category="list-text">Com base no recurso indicado e no nó especificado nas ações de recurso com falha:</block>
  <block id="15cdec9d63ec68e3300810746f7c66c5" category="list-text">Procure e corrija quaisquer problemas externos que impeçam o nó de iniciar o recurso especificado. Por exemplo, se o endereço IP BeeGFS (IP flutuante) não foi iniciado, verifique se pelo menos uma das interfaces necessárias está conetada/on-line e cabeada ao switch de rede direito. Se um destino BeeGFS (dispositivo de bloco/volume e-Series) falhar, verifique se as conexões físicas com os nós de bloco de back-end estão conetadas conforme o esperado e verifique se os nós de bloco estão íntegros.</block>
  <block id="66f0528ed6c9cd01b92486aef88bca25" category="list-text">Se não houver problemas externos óbvios e você desejar uma causa raiz para esse incidente, é sugerido que você abra um caso com suporte do NetApp para investigar antes de prosseguir, pois as etapas a seguir podem tornar a análise de causa raiz (RCA) desafiadora/impossível.</block>
  <block id="3f79d63c01f8e573f1485641a01784f5" category="list-text">Depois de resolver quaisquer problemas externos:</block>
  <block id="0fc5581e5e588d921d0659c6725c8bb7" category="list-text">Comente todos os nós não funcionais do arquivo Ansible inventory.yml e execute novamente o manual completo do Ansible para garantir que toda a configuração lógica esteja configurada corretamente nos nós secundários.</block>
  <block id="837bc4d502bb7c6e4bb1557e18c0d778" category="list-text">Observação: Não se esqueça de descomentar esses nós e executar novamente o manual de estratégia quando os nós estiverem saudáveis e você estiver pronto para o failback.</block>
  <block id="7198cccc6bdd4a3f49c6f73aecb797e3" category="list-text">Como alternativa, você pode tentar recuperar manualmente o cluster:</block>
  <block id="6db4e0b9e5f080b1d47896ae71390476" category="list-text">Coloque todos os nós offline de volta online usando:<block ref="2e6a9bc781ade1dd9ff94654afbc34bd" prefix=" " category="inline-code"></block></block>
  <block id="0292b418af30a3106696db822913b4fd" category="list-text">Limpar todas as ações de recursos com falha usando:<block ref="b292ce60014c1c0e30e4db1f177243d3" prefix=" " category="inline-code"></block></block>
  <block id="8177fac49f20d8c76b3afe0ead42fe89" category="list-text">Execute o status dos PCs e verifique se todos os serviços começam conforme esperado.</block>
  <block id="0a584da0f19f70578ae419f6c3de1804" category="list-text">Se necessário, execute<block ref="31b8a2d98f4312a9e7b7ac373d9cca6a" prefix=" " category="inline-code"></block> para mover os recursos de volta para o nó preferido (se ele estiver disponível).</block>
  <block id="b34551a00d39152d67273fc8e1fc4a52" category="section-title">Questões comuns</block>
  <block id="e728c5fcf9b4ab50066868a6b637a709" category="section-title">Os serviços BeeGFS não fazem failover ou failback quando solicitados</block>
  <block id="07f7fa9ba2b669bb79d185d75b136e12" category="paragraph">* Problema provável:* o<block ref="960b2f261f11ad1988eea18a4ecc34c9" prefix=" " category="inline-code"></block> comando run foi executado, mas nunca terminou com sucesso.</block>
  <block id="844f68b15c1713a6baa4b0ec6aa225df" category="paragraph">*Como verificar:* Executar<block ref="5a4892b5d40be89d668321c86afd400b" prefix=" " category="inline-code"></block> e verificar quaisquer restrições de localização com um ID de<block ref="2fcf6d99d76b884a404fa4e359bf2b59" prefix=" " category="inline-code"></block>.</block>
  <block id="9e43dd5b3ec5864eaeb73e8dc9a4a445" category="paragraph">*How to resolve:* execute<block ref="3132f7183339b30b65d4c94ec98e59c6" prefix=" " category="inline-code"></block> e execute novamente<block ref="5a4892b5d40be89d668321c86afd400b" prefix=" " category="inline-code"></block> para verificar se as restrições extras são removidas.</block>
  <block id="1950007e622fca4ac1ecb2dca5c5b0ca" category="section-title">Um nó no estado dos PCes mostra "standby (on-fail)" quando a vedação está desativada</block>
  <block id="7f73632b6cb42dac5be42f899b8f3075" category="paragraph">*Problema provável:* o pacemaker não conseguiu confirmar com êxito todos os recursos foram parados no nó que falhou.</block>
  <block id="62e46498125737c7dea16f67e65f663b" category="paragraph">*Como resolver:*</block>
  <block id="2443318955c1e9ac3d484a3a95366847" category="list-text">Execute<block ref="fcad1c87c23363c990849a7aaf9d6cd9" prefix=" " category="inline-code"></block> e verifique se há recursos que não são "iniciados" ou mostram erros na parte inferior da saída e resolva quaisquer problemas.</block>
  <block id="fde999fddc7a609f9b1112a0d74b811e" category="list-text">Para colocar o nó novamente online, execute<block ref="22c6d25b4cef458448bf6ec7b072cfdc" prefix=" " category="inline-code"></block>.</block>
  <block id="0b566700630488a9f296399143b71b21" category="section-title">Após um failover inesperado, os recursos mostram "Started (on-fail)" no status PCs quando o esgrima está ativado</block>
  <block id="d82216004991d1ee26d8a39d995fd037" category="paragraph">*Problema provável:* ocorreu Um problema que desencadeou um failover, mas o pacemaker não conseguiu verificar se o nó estava vedado. Isso pode acontecer porque o esgrima foi mal configurado ou houve um problema com o agente de esgrima (exemplo: O PDU foi desconetado da rede).</block>
  <block id="d9377bb89128ecc3849d522366a1bc0e" category="list-text">Verifique se o nó está realmente desligado.</block>
  <block id="26cf4911b5df9522d0b71ba51aa2797f" category="admonition">Se o nó especificado não estiver realmente desativado, mas executando serviços ou recursos de cluster, ocorrerá corrupção de dados/falha de cluster.</block>
  <block id="eb7adca6805c8d7130032cd721d69726" category="list-text">Confirme manualmente a vedação com:<block ref="5448b9bc8364c2b3f706918cda259325" prefix=" " category="inline-code"></block></block>
  <block id="1c0ee784ecf6c6dae18bd342462b0460" category="paragraph">Neste ponto, os serviços devem terminar de falhar e ser reiniciados em outro nó saudável.</block>
  <block id="144c35532a298805242b9831523175df" category="section-title">Tarefas comuns de resolução de problemas</block>
  <block id="e78d742ead1e3187a4781d20c9f53692" category="section-title">Reinicie os serviços BeeGFS individuais</block>
  <block id="5bd968465c3ccdeb171ce7ade4907d6f" category="paragraph">Normalmente, se um serviço BeeGFS precisar ser reiniciado (por exemplo, para facilitar uma alteração de configuração), isso deve ser feito atualizando o inventário do Ansible e executando novamente o manual de estratégia. Em alguns cenários, pode ser desejável reiniciar serviços individuais para facilitar a solução de problemas mais rápida, por exemplo, para alterar o nível de log sem precisar esperar que todo o manual de estratégia seja executado.</block>
  <block id="57f3d071d972e615cf2b21fc580b3981" category="admonition">A menos que quaisquer alterações manuais também sejam adicionadas ao inventário do Ansible, elas serão revertidas na próxima vez que o manual de estratégia do Ansible for executado.</block>
  <block id="e6ec687230170238fbff13af150aac11" category="section-title">Opção 1: Reinício controlado pelo sistema</block>
  <block id="8bd682031ba8c79bdc3518a66ecb5f1d" category="paragraph">Se houver um risco de o serviço BeeGFS não reiniciar corretamente com a nova configuração, primeiro coloque o cluster no modo de manutenção para impedir que o monitor BeeGFS detete que o serviço seja interrompido e acione um failover indesejado:</block>
  <block id="e445f63138e0cf42d48b191e7212fba5" category="paragraph">Se necessário, faça alterações na configuração dos serviços em<block ref="7b2e56941196b9587e16891bfbec2093" prefix=" " category="inline-code"></block> (exemplo:<block ref="e3cb2c4f0757837b4a51b638bed0ec4d" prefix=" " category="inline-code"></block>), em seguida, use systemd para reiniciá-lo:</block>
  <block id="fc618f42db9108f58f9c7fc76181a551" category="paragraph">Exemplo:<block ref="d1adfe915ae154bb103f4a2e2d28183d" prefix=" " category="inline-code"></block></block>
  <block id="b8a88c45f80fb4ad388f6cfe0958b272" category="section-title">Opção 2: Reinício controlado pelo pacemaker</block>
  <block id="b28d67df7faeb6762f0262ed21fd5c44" category="paragraph">Se você não estiver preocupado com a nova configuração pode fazer com que o serviço pare inesperadamente (por exemplo, simplesmente mudando o nível de log), ou você está em uma janela de manutenção e não está preocupado com o tempo de inatividade, você pode simplesmente reiniciar o monitor BeeGFS para o serviço que deseja reiniciar:</block>
  <block id="1ea90ec9ad2232dc8536efa244b502cd" category="paragraph">Por exemplo, para reiniciar o serviço de gerenciamento BeeGFS:<block ref="19191ce739dde363bc25ef750853010b" prefix=" " category="inline-code"></block></block>
  <block id="d60c67e58f8b774cb2aa20f043f8db60" category="summary">Use o Ansible para atualizar o BeeGFS e o cluster de HA.</block>
  <block id="3a06f222be74df90b61af2d3590f53fb" category="doc">Atualize a versão BeeGFS</block>
  <block id="fb7db280dc24f798821f72f3a6314baa" category="paragraph">Siga estas etapas para atualizar a versão BeeGFS do cluster de HA usando o Ansible.</block>
  <block id="de08fe25e6d2fa4fb114dee71c6d1955" category="paragraph">BeeGFS segue um<block ref="95d209426d2bead51bc37b6066b6ee21" prefix=" " category="inline-code"></block> esquema de controle de versão. As funções do BeeGFS HA Ansible são fornecidas para cada versão com suporte<block ref="708997fbc70843c52165e3f6faed4fa8" prefix=" " category="inline-code"></block> (por exemplo,<block ref="4111d90a1d8089aa9621c399414fd198" prefix=" " category="inline-code"></block> e<block ref="7bfdf60ffcc8e818739972660aeebf71" prefix=" " category="inline-code"></block>). Cada função de HA é fixada à versão de patch BeeGFS mais recente disponível no momento do lançamento da coleção Ansible.</block>
  <block id="51e0180a7b3c2158984fbbe6e8f869a0" category="paragraph">O Ansible deve ser usado em todas as atualizações do BeeGFS, incluindo a migração entre as versões principal, secundária e de patch do BeeGFS. Para atualizar o BeeGFS, primeiro você precisará atualizar a coleção BeeGFS Ansible, que também abordará as correções e os aprimoramentos mais recentes da automação de implantação/gerenciamento e do cluster de HA subjacente. Mesmo depois de atualizar para a versão mais recente da coleção, BeeGFS não será atualizado até<block ref="6afa1ad605a4192ba2e50e8be9966e68" prefix=" " category="inline-code"></block> que seja executado com o<block ref="1c5a0082b7b70fba66dc89c5dcadda70" prefix=" " category="inline-code"></block> conjunto.</block>
  <block id="c647c561b083b3d7395174f66f8631ea" category="inline-link-macro">Documentação do BeeGFS Upgrade</block>
  <block id="c24ac53eed3b244d067e62d9a64dfd49" category="admonition">Para obter mais informações sobre as versões BeeGFS, consulte <block ref="8574fc3a2a061b998ddd0369208f121a" category="inline-link-macro-rx"></block>.</block>
  <block id="901381f9137ae0a8db99e41924ff8ef1" category="section-title">Caminhos de atualização testados</block>
  <block id="47d550a414d88378d8af3a8ee7202f43" category="paragraph">Cada versão da coleção BeeGFS é testada com versões específicas do BeeGFS para garantir a interoperabilidade entre todos os componentes. Os testes também são realizados para garantir que as atualizações possam ser realizadas a partir das versões do BeeGFS compatíveis com a última versão da coleção, para as compatíveis na versão mais recente.</block>
  <block id="898fd772d03120abb80bc290103408c1" category="cell">Versão original</block>
  <block id="6b109fe64fc40b0f8653da2a76f4622d" category="cell">Versão de atualização</block>
  <block id="4805ea9349955c3f72d0d2a6e29e9599" category="cell">Multirail</block>
  <block id="3ec365dd533ddb7ef3d1c111186ce872" category="cell">Detalhes</block>
  <block id="9197ec103d780b6779cb78eec6afce31" category="cell">7.2.6</block>
  <block id="0cbcbda5109bcde6b94054595b5c2163" category="cell">7.3.2</block>
  <block id="93cba07454f06a4a960172bbd6e2a435" category="cell">Sim</block>
  <block id="80af1bca395a5729dba29bf239d414de" category="cell">Atualizando a coleção beegfs de v3,0.1 para v3,1.0, multirail adicionado</block>
  <block id="cd0d3c01d5de47172fb0980b9e484085" category="cell">7.2.8</block>
  <block id="bafd7322c6e97d25b6299b5d6fe8920b" category="cell">Não</block>
  <block id="f8c6df0b95129e4f957da4faa69e9a95" category="cell">Atualizando a coleção beegfs de v3,0.1 para v3,1.0</block>
  <block id="90e738eca301c4d89366b1a4d15fe37f" category="cell">7.3.1</block>
  <block id="37ee8dee8daa5fa1f91e93f31f1e4548" category="cell">Atualização usando beegfs coleção v3,1.0, multi-rail adicionado</block>
  <block id="35aee211b7a94a90469b8820e9b58379" category="cell">Atualize usando a coleção beegfs v3,1.0</block>
  <block id="12edeb5890095749089987982a1404ce" category="cell">7.4.1</block>
  <block id="edd2140e3bcb557a4bc234fc76e2dfb3" category="cell">Atualize usando a coleção beegfs v3,2.0</block>
  <block id="fb6df547cfb7d95cb9b49b8301cad3ab" category="cell">7.4.2</block>
  <block id="ee70a4cf48b74ec6f64d87c6e1480515" category="section-title">Etapas de atualização do BeeGFS</block>
  <block id="079cd431e62fc3a22940a2261f836245" category="paragraph">As seções a seguir fornecem etapas para atualizar a coleção BeeGFS Ansible e o próprio BeeGFS. Preste atenção especial a qualquer passo extra para atualizar as versões BeeGFS Major ou menor.</block>
  <block id="2cdd3511031afa1a313d8e79d7d576b1" category="section-title">Passo 1: Atualize a coleção BeeGFS</block>
  <block id="733ba000742537e7a4435573aca51393" category="inline-link-macro">Ansible Galaxy</block>
  <block id="2f4c1ac28e39c823ee4c1a07b7cd93aa" category="paragraph">Para atualizações de coleção com acesso ao <block ref="d8617fd1dfbd628e2360b843d6070e54" category="inline-link-macro-rx"></block>, execute o seguinte comando:</block>
  <block id="c199206a11a9882502e88de065338656" category="paragraph">Para atualizações de coleção offline, faça o download da coleção <block ref="d8617fd1dfbd628e2360b843d6070e54" category="inline-link-macro-rx"></block>clicando no desejado<block ref="5ab34c986ae1945ee0c548bc8d6ac4a8" prefix=" " category="inline-code"></block> e,em seguida<block ref="80af28150f2ffd9a902b18cd4e9b6656" prefix=" " category="inline-code"></block>, . Transfira o tarball para o nó de controle do Ansible e execute o seguinte comando.</block>
  <block id="dd26fb41f43f69172e0099b87c9d0732" category="inline-link-macro">Instalando coleções</block>
  <block id="6aa260cc14fabe54e7e9f6efd513b871" category="paragraph">Consulte <block ref="78e19afa50f5104f13264e857fffab2b" category="inline-link-macro-rx"></block> para obter mais informações.</block>
  <block id="f6abfd633f96f44e32dca944a1a80e9c" category="section-title">Etapa 2: Atualize o inventário do Ansible</block>
  <block id="e6811430a0324887ba2ad63393a262e1" category="inline-link-macro">Notas de atualização da versão</block>
  <block id="e520383c76f5e72226ebb572b987380c" category="inline-link-macro">Visão geral do Ansible Inventory</block>
  <block id="95172f30ff12c9cb640f1c8398d0b04a" category="paragraph">Faça todas as atualizações necessárias ou desejadas para os arquivos de inventário do Ansible do cluster. Consulte <block ref="2e381baad9ceebe6c5aa505098cb18a1" category="inline-link-macro-rx"></block>a seção abaixo para obter detalhes sobre seus requisitos de atualização específicos. Consulte <block ref="f7bda10e421919e9d8ced89dacaba34f" category="inline-link-macro-rx"></block>a seção para obter informações gerais sobre como configurar seu inventário BeeGFS HA.</block>
  <block id="de129d7813d91b8a2df6987dc1e993c1" category="section-title">Etapa 3: Atualizar o manual do Ansible (somente ao atualizar versões principais ou secundárias)</block>
  <block id="549cabdee707d530b4b718071c2b04e9" category="paragraph">Se você estiver se movendo entre versões maiores ou menores, no<block ref="2f78c4e27feaf25ffb33d97e8ff7e7a6" prefix=" " category="inline-code"></block> arquivo usado para implantar e manter o cluster, atualize o nome da<block ref="66b5cc4f55c22b7b05dfd4be1be47aab" prefix=" " category="inline-code"></block> função para refletir a versão desejada. Por exemplo, se você quiser implantar o BeeGFS 7,4, isso<block ref="bf8d782a5f25b975eee48d224688885f" prefix=" " category="inline-code"></block> seria :</block>
  <block id="800371603b58ee549a4a9674cd231cfd" category="inline-link-macro">Implante o cluster BeeGFS HA</block>
  <block id="ee7f4ebf4b84c588316192566a0cb8cd" category="paragraph">Para obter mais detalhes sobre o conteúdo deste arquivo de manual de estratégia, consulte <block ref="e4439ff10fb632bb30fbb98653fb7d05" category="inline-link-macro-rx"></block>a seção.</block>
  <block id="21c4f9c8b31954d3a790c8c8be86b9c8" category="section-title">Passo 4: Execute a atualização BeeGFS</block>
  <block id="5c349c42761230bd8e50fff98f6e7508" category="paragraph">Para aplicar a atualização BeeGFS:</block>
  <block id="a2dd7653f3025e7feb8e282bcc0bde84" category="paragraph">Nos bastidores, o papel BeeGFS HA vai lidar com:</block>
  <block id="2d304ec0e0fbeec292dc41145e2eecb0" category="list-text">Verifique se o cluster está no estado ideal com cada serviço BeeGFS localizado no nó preferido.</block>
  <block id="5f143f3872f8df75b9266e40b2272406" category="list-text">Coloque o cluster no modo de manutenção.</block>
  <block id="400df38ef11abbe30ea67fa8e7200a0d" category="list-text">Atualize os componentes do cluster HA (se necessário).</block>
  <block id="33421319eb71c7eeb0ce5b0e4a6e4b8f" category="list-text">Atualize cada nó de arquivo, um de cada vez, da seguinte forma:</block>
  <block id="e8e28076de7654eb24e044afdf734b1a" category="list-text">Coloque-a em standby e faça failover de seus serviços para o nó secundário.</block>
  <block id="428a1ecc41f6178248f2f8dadec2f62b" category="list-text">Atualize os pacotes BeeGFS.</block>
  <block id="8a1d7e8d1dce93a3d4fb9150570283c2" category="list-text">Serviços de retorno.</block>
  <block id="f4a4c394b32e613eb518abe373f40c37" category="list-text">Mova o cluster para fora do modo de manutenção.</block>
  <block id="9c8627d3001e5a503b31e4dcd6ecfd87" category="section-title">Notas de atualização da versão</block>
  <block id="2e5a7ec61feb5cc6bfdf6e50d5cc9a86" category="section-title">Atualização do BeeGFS versão 7.2.6 ou 7.3.0</block>
  <block id="909565cc470ef2ebeaadbdc37ace1c46" category="section-title">Alterações na autenticação baseada em conexão</block>
  <block id="7202d449c02688973a53bb72a0090f19" category="inline-link-macro">Autenticação baseada em conexão BeeGFS</block>
  <block id="334d537e5273e4291972dbb772133d23" category="paragraph">As versões BeeGFS lançadas após 7.3.1 não permitirão mais que os serviços iniciem sem especificar uma<block ref="6097b6e95af2579f2147a330c21f7b59" prefix=" " category="inline-code"></block> configuração ou<block ref="194193db6aa10dc83a871ef82dae32ce" prefix=" " category="inline-code"></block> no arquivo de configuração do serviço. É altamente recomendável habilitar a segurança de autenticação baseada em conexão. Consulte <block ref="f745eac1796bcd7c76bb4ab7bb03be5b" category="inline-link-macro-rx"></block> para obter mais informações.</block>
  <block id="37075250adff19201f1f54be05b5a07a" category="paragraph">Por padrão, as<block ref="59544be57ace17b034c14f8d12510eee" prefix=" " category="inline-code"></block> funções gerarão e distribuirão esse arquivo, adicionando-o também ao nó de controle do Ansible em<block ref="d60ea3ba7610ba191573b69dca307efb" prefix=" " category="inline-code"></block>. A<block ref="84f7933b4ff9fefcfc60fd5fff4b3b54" prefix=" " category="inline-code"></block> função também irá verificar a presença deste ficheiro e fornecê-lo aos clientes, se disponível.</block>
  <block id="1ea32c7c84666a27c0f0add65b2c620e" category="admonition">Se a<block ref="84f7933b4ff9fefcfc60fd5fff4b3b54" prefix=" " category="inline-code"></block> função não foi usada para configurar clientes, esse arquivo precisará ser distribuído manualmente para cada cliente e a<block ref="6097b6e95af2579f2147a330c21f7b59" prefix=" " category="inline-code"></block> configuração no<block ref="1b33ed41c854e3144951352c24ab4653" prefix=" " category="inline-code"></block> conjunto de arquivos para usá-lo. Ao atualizar a partir de uma versão anterior do BeeGFS onde a autenticação baseada em conexão não foi ativada, os clientes perderão o acesso a menos que a autenticação baseada em conexão seja desativada como parte da atualização definindo<block ref="2ff6bdfeb6b3a41d28029b9ff7bdb93c" prefix=" " category="inline-code"></block> em<block ref="4003590e6e5408f8e5272e50f909dfac" prefix=" " category="inline-code"></block> (não recomendado).</block>
  <block id="cd35a558180e5a60f1da5ebd80b06ed2" category="paragraph">Para obter detalhes adicionais e opções de configuração alternativas, consulte a etapa para configurar a autenticação de conexão na <block ref="dc7fd2b3ea1b2b4a060b953a1b281371" category="inline-link-macro-rx"></block>seção.</block>
  <block id="8d4ce44e7e1f685f22f0480066f6dadc" category="summary">Etapas para atualizar os storage arrays e-Series do cluster HA.</block>
  <block id="fecb4be6b37a9fda6b207eaf97363fed" category="doc">Atualizar o storage array do e-Series</block>
  <block id="26f796a7ab5fa8e4b49e64f8f8bf2a80" category="paragraph">Siga estas etapas para atualizar os storage arrays e-Series do cluster de HA (nós de bloco).</block>
  <block id="e134ac69d8641d9208d2cf890fad5275" category="paragraph">Manter os storage arrays NetApp e-Series atualizados do seu cluster de HA com o firmware mais recente garante desempenho ideal e segurança aprimorada. As atualizações de firmware para a matriz de armazenamento são aplicadas usando os arquivos SANtricity os, NVSRAM e firmware da unidade.</block>
  <block id="40039e282631364c07ceaedf99c2cf6c" category="admonition">Embora os storage arrays possam ser atualizados on-line com o cluster de HA, é recomendável colocar o cluster no modo de manutenção para todas as atualizações.</block>
  <block id="e23311179b5a9fe1039e35e28290b482" category="section-title">Bloquear etapas de atualização do nó</block>
  <block id="4a77379e9fcc01e35b7933a91b02a2bb" category="inline-link-macro">Considerações sobre a atualização</block>
  <block id="46b8f258a80b91c5c4fffd3d5ece01a4" category="paragraph">As etapas a seguir descrevem como atualizar o firmware dos storages de armazenamento usando a<block ref="e49e2f9371e7bc22ee200e5f75b6602c" prefix=" " category="inline-code"></block> coleção Ansible. Antes de prosseguir, reveja o <block ref="6c9178c1392ea3672f35be0055264c17" category="inline-link-macro-rx"></block> para atualizar os sistemas e-Series.</block>
  <block id="bdee1b73e1febbf048ec6a5f2831e85b" category="admonition">A atualização para o SANtricity os 11,80 ou versões posteriores só é possível a partir de 11.71.5P1. O storage array deve primeiro ser atualizado para 11.70.5P1 antes de aplicar novas atualizações.</block>
  <block id="d71cc28583686cddef55d03b0274281d" category="list-text">Verifique se o nó de controle do Ansible está usando a coleção mais recente do SANtricity Ansible.</block>
  <block id="958b4e178dbb15f4d101c7af076a86e0" category="list-text">Para atualizações off-line, baixe o tarball de coleta de <block ref="32839d1e65aead10794a1c6916b9ba54" category="inline-link-macro-rx"></block>, transfira-o para o nó de controle e execute:</block>
  <block id="b7c167ccf3ed53b1f6e48097aeff0a80" category="list-text">Obtenha o firmware mais recente para a sua matriz de armazenamento e unidades.</block>
  <block id="b48447584775163c7687f535f818de69" category="list-text">Transfira os ficheiros de firmware.</block>
  <block id="9c093f14319e8253b8c9b37290597239" category="inline-link-macro">Site de suporte da NetApp</block>
  <block id="8730ba85a04b4b9309e2eb5e8255e024" category="list-text">*SANtricity os e NVSRAM:* navegue até o <block ref="a9f7476d3f84cd9adf0af429b2aa178f" category="inline-link-macro-rx"></block> e faça o download da versão mais recente do SANtricity os e NVSRAM para seu modelo de storage array.</block>
  <block id="482a1edf3e9cd198f6ee458a1cea1af9" category="inline-link-macro">Site de firmware de disco e-Series</block>
  <block id="bad7f30f1449c1f5ab5e97ce89aee762" category="list-text">*Drive firmware:* navegue até o <block ref="dc6c914f008159d5969a25304ddfb479" category="inline-link-macro-rx"></block> e faça o download do firmware mais recente para cada um dos modelos de unidade da matriz de armazenamento.</block>
  <block id="c26b41b932786e55f3bf481a6938083e" category="list-text">Armazene os arquivos de firmware da unidade, NVSRAM e do sistema operacional SANtricity no diretório do nó de controle do Ansible<block ref="971398284b1e828e40efc6b6630f0369" prefix=" " category="inline-code"></block>.</block>
  <block id="09a777fce4515aa1a8dcd86346441924" category="list-text">Se necessário, atualize os arquivos de inventário do Ansible do cluster para incluir todos os storage arrays (nós de bloco) que exigem atualizações. Para obter orientação, consulte <block ref="f7bda10e421919e9d8ced89dacaba34f" category="inline-link-macro-rx"></block>a secção.</block>
  <block id="44ab0407eb93bf62fd987a8132e5a912" category="list-text">Garantir que o cluster esteja no estado ideal, com cada serviço BeeGFS no nó de sua preferência. <block ref="1d1f85855f64d7b14ac7c0ae29a52511" category="inline-link-macro-rx"></block>Consulte para obter detalhes.</block>
  <block id="f525483091b48c05e08ecf537a6c9e5a" category="list-text">Coloque o cluster no modo de manutenção seguindo as instruções na <block ref="4b8504199df3a0ade85c92603634e18f" category="inline-link-macro-rx"></block>.</block>
  <block id="390c5fa21f5dea398732a7b3b4024304" category="list-text">Crie um novo manual do Ansible chamado<block ref="bdc450c9ffd9674cb7c88bcb24bfedb8" prefix=" " category="inline-code"></block>. Preencha o manual com o seguinte conteúdo, substituindo as versões do SANtricity os, NVSRAM e firmware da unidade para o caminho de atualização desejado:</block>
  <block id="13ec6a1291f9e3d303bbc7f6bece60a3" category="list-text">Para iniciar as atualizações, execute o seguinte comando a partir do nó de controle do Ansible:</block>
  <block id="2268e1bfefae0c28c267b29923d65e0c" category="list-text">Depois que o manual de estratégia for concluído, verifique se cada storage array está no estado ideal.</block>
  <block id="c1fdae9b6a94c3924447ee6c483855cb" category="list-text">Mova o cluster para fora do modo de manutenção e valide que o cluster está no estado ideal. Cada serviço BeeGFS está no nó de sua preferência.</block>
  <block id="40df644de3579bec4038eafb77eb26fe" category="summary">Como opção, o Ansible pode ser usado para configurar clientes BeeGFS e montar o sistema de arquivos.</block>
  <block id="107dafc3c3dfc88c15a7700fd40a35dc" category="doc">Implante clientes BeeGFS</block>
  <block id="fc9048a17c6ddc968465bcc02c0ea486" category="inline-link-macro">Função do Ansible</block>
  <block id="dcce328dbfa187984479bbc5ace17bf2" category="paragraph">Acessar os sistemas de arquivos BeeGFS requer a instalação e a configuração do cliente BeeGFS em cada nó que precisa montar o sistema de arquivos. Esta seção documenta como executar essas tarefas usando o <block ref="0ceebef54e9df7cedfb22dd6dcf5ed37" category="inline-link-macro-rx"></block>disponível .</block>
  <block id="2106244b87f596d4fefd89f77dae13da" category="section-title">Crie o Arquivo de Inventário do Cliente</block>
  <block id="f4bf34ee26e45437b7b34ee3858d3f39" category="list-text">Se necessário, configure o SSH sem senha do nó de controle do Ansible para cada um dos hosts que você deseja configurar como clientes BeeGFS:</block>
  <block id="7dc2ac40c1549980b4ac09d940856f47" category="list-text">Em<block ref="4d729f58293c8a48f1f8d918cdd1d28f" prefix=" " category="inline-code"></block>, crie um arquivo para cada cliente BeeGFS nomeado<block ref="a0253f5b8f5dd7be8b02cda13da40729" prefix=" " category="inline-code"></block> com o seguinte conteúdo, preenchendo o texto do espaço reservado com as informações corretas para o seu ambiente:</block>
  <block id="689b0940ce8c21b1ecd3dafd9cc19d56" category="list-text">Inclua, opcionalmente, uma das opções a seguir, se quiser usar as funções da coleção de hosts do NetApp e-Series para configurar interfaces InfiniBand ou Ethernet para clientes se conetarem a nós de arquivos BeeGFS:</block>
  <block id="13252baac98263adb995638740670156" category="inline-link-macro">InfiniBand (usando IPoIB)</block>
  <block id="4ec9f0d4c55bed99ab83189074c79fda" category="list-text">Se o tipo de rede for <block ref="ce64f086b1422863947177e8ac3c3f3f" category="inline-link-macro-rx"></block>:</block>
  <block id="703a1e1ae0933c0197e1615ce5751d82" category="inline-link-macro">RDMA em Ethernet convergente (RoCE)</block>
  <block id="e8f5d6c59a43e4d1004ee930d690ba27" category="list-text">Se o tipo de rede for <block ref="513b838786f4a360fbbf4a58f2a48329" category="inline-link-macro-rx"></block>:</block>
  <block id="1e6c082cb30ec9603b75d0e43e10ed58" category="inline-link-macro">Ethernet (apenas TCP, sem RDMA)</block>
  <block id="022fdafc43fcb01f91b57ea09f74ecea" category="list-text">Se o tipo de rede for <block ref="0d1150d6d50cb438873f5f691ec395a3" category="inline-link-macro-rx"></block>:</block>
  <block id="825f3be2c17c36c0e4901143db982773" category="list-text">Crie um novo<block ref="c28f9364916e661fea858844d2b96b81" prefix=" " category="inline-code"></block> arquivo e especifique o usuário que o Ansible deve usar para se conetar a cada cliente. A senha que o Ansible deve usar para encaminhar privilégios (isso requer<block ref="f2bf771afbc16045e1951ded58c56f98" prefix=" " category="inline-code"></block> root ou ter sudo Privileges):</block>
  <block id="c3ee5ddf91e65773d3e9d27f9e627350" category="inline-link-macro">Documentação do Ansible</block>
  <block id="c5a4ae1aa23001e8780b413f175b50b3" category="admonition">Não armazene senhas em texto simples. Em vez disso, use o Ansible Vault (consulte o <block ref="f2e33a881c3eb75b68333af99119c0b8" category="inline-link-macro-rx"></block> para criptografar conteúdo com o Ansible Vault) ou use a<block ref="13d87b4892426ec19bdc58a4643d3104" prefix=" " category="inline-code"></block> opção ao executar o manual de estratégia.</block>
  <block id="848f64fc57104cb2b416f6102d34e699" category="list-text">No<block ref="c28f9364916e661fea858844d2b96b81" prefix=" " category="inline-code"></block> arquivo, liste todos os hosts que devem ser configurados como clientes BeeGFS no<block ref="fc2e11772a55c48ed2b4ec7bc5d94664" prefix=" " category="inline-code"></block> grupo e, em seguida, consulte os comentários inline e descomente qualquer configuração adicional necessária para criar o módulo do kernel do cliente BeeGFS no seu sistema:</block>
  <block id="42d868a1eb5776ce2eb9b95938bcc056" category="inline-link-macro">Suporte RDMA</block>
  <block id="815feebb5e4cc6a260b0689a8647ef51" category="admonition">Ao usar os drivers NVIDIA OFED, certifique-se de que beegfs_client_ofed_include_path aponte para o "caminho de inclusão de cabeçalho" correto para a instalação do Linux. Para obter mais informações, consulte a documentação do BeeGFS para <block ref="a36a0245ff208157cbdf93cd51fc1311" category="inline-link-macro-rx"></block>.</block>
  <block id="c378775497a55638adcb42719d8daddb" category="list-text">No<block ref="c28f9364916e661fea858844d2b96b81" prefix=" " category="inline-code"></block> arquivo, liste os sistemas de arquivos BeeGFS que você deseja montar em qualquer um definido anteriormente<block ref="b63119da730344b345cdc8f62a4711e9" prefix=" " category="inline-code"></block> :</block>
  <block id="69e81fdce48c1bfa30329304eaa6d50d" category="inline-link-macro">autenticação de conexão</block>
  <block id="508ccac845ca75d6cdda20dfa455a2bd" category="inline-link-macro">configuração comum de nó de arquivo</block>
  <block id="3ad9625708cd0c96f347ec4ce5d874d3" category="list-text">A partir do BeeGFS 7.2.7 e 7.3.1 <block ref="770c4b58b3b364c4ac52cf5cc555453f" category="inline-link-macro-rx"></block>devem ser configurados ou explicitamente desativados. Dependendo de como você escolhe configurar a autenticação baseada em conexão ao especificar <block ref="8920d94093ad4ef03a0a5d6b5041695b" category="inline-link-macro-rx"></block>, talvez seja necessário ajustar a configuração do cliente:</block>
  <block id="a7d7def0ef1d6627e10199d423565e7e" category="list-text">Por padrão, a implantação do cluster de HA configurará automaticamente a autenticação de conexão e gerará uma<block ref="cd304377fdc20285a5aa94e55ae85aa7" prefix=" " category="inline-code"></block> que será colocada/mantida no nó de controle do Ansible em<block ref="eee2923df30539b680421ca53d7c066b" prefix=" " category="inline-code"></block>. Por padrão, a função de cliente BeeGFS é configurada para ler/distribuir esse arquivo aos clientes definidos no<block ref="c28f9364916e661fea858844d2b96b81" prefix=" " category="inline-code"></block>, e nenhuma ação adicional é necessária.</block>
  <block id="2c96dc448de9d0218bb361afae4689c8" category="inline-link-macro">Função de cliente BeeGFS</block>
  <block id="cb7223c9ecb20da5826418267937cb4b" category="list-text">Para opções avançadas, consulte a lista completa de padrões incluídos no <block ref="1507a901cf67edf9930d46c852b1993d" category="inline-link-macro-rx"></block>.</block>
  <block id="f4c29fbb6bcbcc6c55ae76c0a5254687" category="list-text">Se você optar por especificar um segredo personalizado com<block ref="8b76cf2fb65e09dad03ca686be5cd464" prefix=" " category="inline-code"></block> especifique-o<block ref="c28f9364916e661fea858844d2b96b81" prefix=" " category="inline-code"></block> no arquivo também:</block>
  <block id="2f01d79351dcc30d05b4a5a46dee42df" category="list-text">Se você optar por desativar totalmente a autenticação baseada em conexão com<block ref="6c8dd8672ca377e74101ad236282225a" prefix=" " category="inline-code"></block> o , especifique isso também no<block ref="c28f9364916e661fea858844d2b96b81" prefix=" " category="inline-code"></block> arquivo:</block>
  <block id="4debabcfd87e8aaf710a4ef0b5fc0fbc" category="inline-link-macro">Documentação completa do cliente BeeGFS</block>
  <block id="6c92285fa6d3e827b198d120ea3ac674" category="inline-link-macro">aqui</block>
  <block id="be564dd8130b7faafb95d140037162bb" category="paragraph">Para obter uma lista completa dos parâmetros suportados e detalhes adicionais, consulte o <block ref="28ce7a1eece2b507c973d3cca2a82121" category="inline-link-macro-rx"></block>. Para obter um exemplo completo de um inventário de cliente, clique <block ref="b0d51f66522ad4d9697fdf435a95c97a" category="inline-link-macro-rx"></block>em .</block>
  <block id="da7e04a55b40629ae3a62baa9635b36d" category="section-title">Crie o arquivo de Playbook do cliente BeeGFS</block>
  <block id="964a26fa475bbef370601a9a9fb613cb" category="list-text">Crie um novo arquivo<block ref="34bd6e27c43e6508a64d0a1bf093c7d2" prefix=" " category="inline-code"></block></block>
  <block id="ac25f4ce0e4e52459d58c2db4ebda280" category="list-text">Opcional: Se você quiser usar as funções da coleção de hosts do NetApp e-Series para configurar interfaces para que os clientes se conetem aos sistemas de arquivos BeeGFS, importe a função correspondente ao tipo de interface que você está configurando:</block>
  <block id="9f7ee0cead06efb0babbaca7b021e3ed" category="list-text">Se você estiver usando o InfiniBand (IPoIB):</block>
  <block id="54b431528476178eb45a6c2570eff415" category="list-text">Se você estiver usando o RDMA em Converged Ethernet (RoCE):</block>
  <block id="ea7cb942473ffddb52c2661da2f3b951" category="list-text">Se você estiver usando Ethernet (somente TCP, sem RDMA):</block>
  <block id="975fc05779caaf583c3a8ab6b5c5adf1" category="list-text">Por último, importe a função de cliente BeeGFS para instalar o software cliente e configurar as montagens do sistema de arquivos:</block>
  <block id="02870b17064b23fcbf2e080b9624fd6d" category="paragraph">Para obter um exemplo completo de um manual de estratégia de cliente, clique <block ref="dee50bfc7f141fd7ad52d525c94ac7f5" category="inline-link-macro-rx"></block>em .</block>
  <block id="354895762186e608f5675b1498c26501" category="section-title">Execute o Playbook do cliente BeeGFS</block>
  <block id="831a82eacd2203b1049bc6c01826fbef" category="paragraph">Para instalar/construir o cliente e montar o BeeGFS, execute o seguinte comando:</block>
  <block id="31a21a1e42c30056168ee5a4cca695a9" category="summary">Especifique quais tarefas devem ser executadas para implantar o cluster BeeGFS HA usando um manual de estratégia.</block>
  <block id="aca5a5a6b413ed0913ad90f87766df63" category="paragraph">Esta seção aborda como montar o manual de estratégia padrão usado para implantar/gerenciar o BeeGFS no NetApp.</block>
  <block id="b3254ab5c14c4bb06dbb987f8ee20900" category="section-title">Crie o Playbook do Ansible</block>
  <block id="dc1e1a7b77e4fce07756f071e5ec7d8b" category="paragraph">Crie o arquivo<block ref="2f78c4e27feaf25ffb33d97e8ff7e7a6" prefix=" " category="inline-code"></block> e preencha-o da seguinte forma:</block>
  <block id="a3b34c0871dc2fd51eec5559b68f709d" category="inline-link-macro">reproduzir</block>
  <block id="3b4e65c5ca327e9a010b0e69fb90e476" category="list-text">Primeiro defina um conjunto de tarefas (comumente chamadas de a <block ref="6d76655a02e5cb4ca885a92d78a5ab31" category="inline-link-macro-rx"></block>) que devem ser executadas somente em nós de bloco do NetApp e-Series. Usamos uma tarefa de pausa para avisar antes de executar a instalação (para evitar execuções acidentais de playbooks) e depois importar a<block ref="504ead1cde99fc3bc223588114102919" prefix=" " category="inline-code"></block> função. Essa função lida com a aplicação de qualquer configuração geral do sistema definida em<block ref="7bc866ffde9914c7ef21768fcf6f0683" prefix=" " category="inline-code"></block> arquivos individuais ou individuais<block ref="7011fddbea4410953d6718ccf9ef966a" prefix=" " category="inline-code"></block>.</block>
  <block id="19c06a0dc65b61c783f73d77e193957e" category="list-text">Defina a reprodução que será executada em todos os nós de arquivo e bloco:</block>
  <block id="25296aae8975fe74b18a42af79a293d3" category="list-text">Dentro desta jogada, podemos opcionalmente definir um conjunto de "pré-tarefas" que devem ser executadas antes de implantar o cluster HA. Isso pode ser útil para verificar/instalar quaisquer pré-requisitos como Python. Também podemos injetar quaisquer verificações antes do voo, por exemplo, verificando as tags Ansible fornecidas são compatíveis:</block>
  <block id="adcd434b091e5725531891ba91d50193" category="list-text">Por último, essa peça importa a função BeeGFS HA para a versão do BeeGFS que você deseja implantar:</block>
  <block id="d1b15e5b42308e0128908c431c40f477" category="inline-link-macro">guia de atualização</block>
  <block id="98ef1fa853194aa97ce7e1d48795cef5" category="admonition">Uma função BeeGFS HA é mantida para cada versão maior.menor suportada do BeeGFS. Isso permite que os usuários escolham quando querem atualizar versões principais/secundárias. Atualmente, o BeeGFS 7,3.x <block ref="b8974e83e3e52aff89dd9fef2fd40433" prefix="(" category="inline-code"></block>) ou o BeeGFS 7,2.x <block ref="a89433e176d102073aaa272a94fc99a0" prefix="(" category="inline-code"></block>) são compatíveis. Por padrão, ambas as funções implantarão a versão mais recente do patch BeeGFS no momento do lançamento, embora os usuários possam optar por substituir isso e implantar o patch mais recente, se desejado. Consulte o mais recente <block ref="ea68a501eb5a456f305896d5a2358bdb" category="inline-link-macro-rx"></block> para obter mais detalhes.</block>
  <block id="cf0e39575a3cd74789827d1f8d28bcb0" category="list-text">Opcional: Se você deseja definir tarefas adicionais, lembre-se de que as tarefas devem ser direcionadas a<block ref="a181a603769c1f98ad927e7367c7aa51" prefix=" " category="inline-code"></block> hosts (incluindo os sistemas de storage e-Series) ou apenas aos nós de arquivos. Se necessário, defina uma nova reprodução segmentando especificamente os nós de arquivos usando<block ref="0c748da7ba6880eb7537e471415afd58" prefix=" " category="inline-code"></block>o .</block>
  <block id="abd8b7e36cb7499818727f42837b0025" category="paragraph">Clique <block ref="01ba4d718d4b882a06a17b3dab000fe7" category="inline-link-macro-rx"></block> para obter um exemplo de um arquivo de manual completo.</block>
  <block id="c6def9892d45d8f594a1141d759cff35" category="section-title">Instalar as coleções do NetApp Ansible</block>
  <block id="f996e211f2d82b62da74abbaa175d7bc" category="paragraph">A coleção BeeGFS para Ansible e todas as dependências são mantidas <block ref="d8617fd1dfbd628e2360b843d6070e54" category="inline-link-macro-rx"></block>no . No nó de controle do Ansible, execute o seguinte comando para instalar a versão mais recente:</block>
  <block id="9a603171be277ec1f9319dc83b272723" category="paragraph">Embora normalmente não seja recomendado, também é possível instalar uma versão específica da coleção:</block>
  <block id="cb5da77fc5fc3c2fdb8aeff46789a9ca" category="section-title">Execute o Playbook</block>
  <block id="440d2c1c46f7c70d35f630781d07e912" category="paragraph">A partir do diretório no nó de controle do Ansible que contém os<block ref="d28e452e49fc926f32af1d87afcff3ce" prefix=" " category="inline-code"></block> arquivos e<block ref="2f78c4e27feaf25ffb33d97e8ff7e7a6" prefix=" " category="inline-code"></block>, execute o manual de estratégia da seguinte forma:</block>
  <block id="b7a14d8dfd866e91a40ba8804324679a" category="paragraph">Com base no tamanho do cluster, a implantação inicial pode levar mais de 20 minutos. Se a implantação falhar por qualquer motivo, basta corrigir quaisquer problemas (por exemplo, falta de cabeamento, nó não foi iniciado, etc.) e reiniciar o manual de estratégia do Ansible.</block>
  <block id="3a08f340332ef25464a2e7b7cfe7f232" category="paragraph">Ao <block ref="8920d94093ad4ef03a0a5d6b5041695b" category="inline-link-macro-rx"></block>especificar o , se você escolher a opção padrão para que o Ansible gerencie automaticamente a autenticação baseada na conexão, um<block ref="6097b6e95af2579f2147a330c21f7b59" prefix=" " category="inline-code"></block> segredo usado como um segredo compartilhado agora pode ser encontrado em<block ref="8e9df790452dc085676f10b7754aa94b" prefix=" " category="inline-code"></block> (por padrão). Qualquer cliente que precise acessar o sistema de arquivos precisará usar esse segredo compartilhado. Isso é Tratado automaticamente se os clientes forem configurados usando o <block ref="a5e865a21fc7e89f99d76e47a99103f5" category="inline-link-macro-rx"></block>.</block>
  <block id="71a6b27b610785178635f3c7fea0dc9c" category="summary">Implantação e gerenciamento de clusters de HA do BeeGFS com o Ansible.</block>
  <block id="03d8a35d2c337d83e9a0c791c0bde873" category="doc">Visão geral do Playbook do Ansible</block>
  <block id="dd3429f2a44e55e208032b591c258877" category="paragraph">As seções anteriores descreveram as etapas necessárias para criar um inventário do Ansible que representa um cluster de HA do BeeGFS. Esta seção apresenta a automação do Ansible desenvolvida pela NetApp para implantar e gerenciar o cluster.</block>
  <block id="531369b10b19be4aa811f6b1b1abfc32" category="section-title">Ansible: Conceitos-chave</block>
  <block id="c4c6df2bdb8451df5f63cc2602cd3266" category="paragraph">Antes de prosseguir, é útil estar familiarizado com alguns conceitos-chave do Ansible:</block>
  <block id="0a4d7a775f170dc43fae102dc8eed0f1" category="list-text">As tarefas a serem executadas em um inventário do Ansible são definidas no que é conhecido como *manual de estratégia*.</block>
  <block id="503c50788505311e2737ca28bcfc6d1b" category="list-text">A maioria das tarefas no Ansible foi projetada para ser *idempotente*, o que significa que elas podem ser executadas várias vezes para verificar se a configuração/estado desejado ainda é aplicada sem quebrar coisas ou fazer atualizações desnecessárias.</block>
  <block id="fb3edd793b0a4233a87fc2742a893d8d" category="list-text">A menor unidade de execução no Ansible é um *módulo*.</block>
  <block id="d30cef0e8eb4eaf16c7181329c0d06bd" category="list-text">Os playbooks típicos usam vários módulos.</block>
  <block id="424107bb38bc62e70c34a281a355ca1d" category="list-text">Exemplos: Baixar um pacote, atualizar um arquivo de configuração, iniciar/ativar um serviço.</block>
  <block id="b34cf1156d6d4fc5d2020447509756c9" category="list-text">O NetApp distribui módulos para automatizar os sistemas NetApp e-Series.</block>
  <block id="a5a68481f09270734c66ad9ff1dcd0af" category="list-text">A automação complexa é melhor empacotada como uma função.</block>
  <block id="4eac750d0b9763378029ed193c50648c" category="list-text">Essencialmente um formato padrão para distribuir um manual reutilizável.</block>
  <block id="caa4d8cd3e05670bd54bb0281f679498" category="list-text">O NetApp distribui funções para hosts Linux e sistemas de arquivos BeeGFS.</block>
  <block id="1aa532e3c0c6ac72094492dd5d4ad8fa" category="section-title">Papel BeeGFS HA para Ansible: Conceitos-chave</block>
  <block id="8313d0dcd5307c834d7d37f194d4ea32" category="inline-link-macro">Coleção Ansible do NetApp e-Series para BeeGFS</block>
  <block id="8694b9bbf06f92b8fb6a129f90967b56" category="paragraph">Toda a automação necessária para implantar e gerenciar cada versão do BeeGFS no NetApp funciona como uma função do Ansible e é distribuída como parte <block ref="0d95f34d028d609c5e44d4c47f78ca03" category="inline-link-macro-rx"></block>do :</block>
  <block id="e14542ae9d29391a92cc14f6b44e67fd" category="list-text">Essa função pode ser pensada como algures entre um *instalador* e um moderno mecanismo de implantação/gerenciamento* para o BeeGFS.</block>
  <block id="3bcab18a67a5ea90f159f8f472ab0f9d" category="list-text">Aplica infraestrutura moderna como práticas e filosofias de código para simplificar o gerenciamento da infraestrutura de armazenamento em qualquer escala.</block>
  <block id="82877b38f579bedd3acfc034e6aa2a8e" category="inline-link-macro">Kubespray</block>
  <block id="7e96a3522e757b7c2f84f96e80a5204a" category="list-text">Semelhante a como o <block ref="4b612fd25b54d8125236d973922744dd" category="inline-link-macro-rx"></block> projeto permite que os usuários implantem/mantenham toda uma distribuição do Kubernetes para uma infraestrutura de computação com escalabilidade horizontal.</block>
  <block id="34681b6b5fc6e725199f30a154956754" category="list-text">Essa função é o formato *definido por software* que o NetApp usa para empacotar, distribuir e manter o BeeGFS nas soluções NetApp.</block>
  <block id="3c359db1a2bcb271a8a28e3381057655" category="list-text">Esforce-se para criar uma experiência "semelhante a um dispositivo" sem a necessidade de distribuir uma distribuição Linux inteira ou uma imagem grande.</block>
  <block id="ebc3365fe74d7c659b1f0298995f6d39" category="list-text">Inclui agentes de recursos de cluster compatíveis com OCF (Open Cluster Framework) da NetApp para destinos BeeGFS personalizados, endereços IP e monitoramento que fornecem integração inteligente com o fabricante de pacemaker/BeeGFS.</block>
  <block id="8af5165ce6aabae36357e63702ba3fbf" category="list-text">Esta função não é simplesmente "automação" de implantação e destina-se a gerenciar todo o ciclo de vida do sistema de arquivos, incluindo:</block>
  <block id="444e2df3560fe0281204fd385d895403" category="list-text">Aplicação de alterações e atualizações de configuração por serviço ou em todo o cluster.</block>
  <block id="61ef90c42824e8e8c92d69c04046a94b" category="list-text">Automatizar a recuperação e a recuperação de clusters após problemas de hardware serem resolvidos.</block>
  <block id="bb8450666975061db9804d65dbb5afbf" category="list-text">Simplificação do ajuste de performance com base em valores padrão definidos com base em testes abrangentes com o BeeGFS e o NetApp volumes.</block>
  <block id="fded9f625af9335e3b78e65d6fd6abac" category="list-text">Verificando e corrigindo o desvio de configuração.</block>
  <block id="16a4e0aca277107b3401d2d33d4e5c00" category="inline-link-macro">Clientes BeeGFS</block>
  <block id="1c82d73e983ef595a7c60ff4647716a7" category="paragraph">O NetApp também fornece uma função Ansible para <block ref="b6cde77df9fbd5f549a35216e2ea351f" category="inline-link-macro-rx"></block>, que pode ser usada, como opção, para instalar o BeeGFS e montar sistemas de arquivos nos nós de computação/GPU/login.</block>
  <block id="86cd3363bcd965ea6807e544cdb56311" category="summary">Verifique a implantação do sistema de arquivos antes de colocar o sistema em produção.</block>
  <block id="0c947320dda2aecdd9ad8baca329d8a9" category="doc">Verifique a implantação do BeeGFS</block>
  <block id="9f4d5d32220ec3141c624637c9a8b89f" category="paragraph">Antes de colocar o sistema de arquivos BeeGFS em produção, execute algumas verificações.</block>
  <block id="09b37befd9a82a1583041aaff8b9a03a" category="list-text">Faça login em qualquer cliente e execute o seguinte para garantir que todos os nós esperados estejam presentes/acessíveis, e não haja inconsistências ou outros problemas relatados:</block>
  <block id="a1729ed32ceab91f7ef692e7af48a6b8" category="list-text">Encerre todo o cluster e reinicie-o. A partir de qualquer nó de arquivo, execute o seguinte:</block>
  <block id="989e28705c44d76a13ea323790377850" category="list-text">Coloque cada nó em standby e verifique se os serviços do BeeGFS são capazes de fazer failover para nós secundários. Para fazer esse login em qualquer um dos nós de arquivo e executar o seguinte:</block>
  <block id="ba2b2e2a9229fbcedccdb09d825096ee" category="inline-link-macro">Verificação de design</block>
  <block id="8de8ee53c552f1f6dd7babfe6c53c01d" category="list-text">Use ferramentas de benchmarking de desempenho, como IOR e MDTest, para verificar se o desempenho do sistema de arquivos atende às expetativa. Exemplos de testes e parâmetros comuns usados com o BeeGFS podem ser encontrados na <block ref="a0a81c919707a85f36fb8f6f519c1f93" category="inline-link-macro-rx"></block>seção do BeeGFS na arquitetura verificada do NetApp.</block>
  <block id="fdb55059a4337ca76c138af7ad303efa" category="paragraph">Testes adicionais devem ser realizados com base nos critérios de aceitação definidos para um determinado local/instalação.</block>
  <block id="9df40d55a663f7c179e328bf937587fe" category="summary">Os serviços BeeGFS são configurados usando variáveis de grupo (group_vars).</block>
  <block id="973cf6ca298b6ecfb5f2f3290ca4cd2f" category="doc">Definir o serviço de gerenciamento BeeGFS</block>
  <block id="a461b810f49c26d9dc6d92a1e3a344bc" category="paragraph">Esta seção descreve a definição do serviço de gerenciamento BeeGFS. Apenas um serviço desse tipo deve existir no(s) cluster(s) HA para um sistema de arquivos específico. A configuração deste serviço inclui a definição de:</block>
  <block id="a9da9d90de8c8b13991c884b03f76658" category="list-text">O tipo de serviço (gerenciamento).</block>
  <block id="164d597920f7afac5bd1bc14b783ff41" category="list-text">Definição de qualquer configuração que só se aplique a este serviço BeeGFS.</block>
  <block id="9e4755a30f0ec19b232cf1ce068ab8d4" category="list-text">Configurar um ou mais IPs flutuantes (interfaces lógicas) onde este serviço pode ser alcançado.</block>
  <block id="b966cc65076783762d4b37aff48e5a1f" category="list-text">Especificar onde/como um volume deve ser armazenado os dados para esse serviço (o destino de gerenciamento do BeeGFS).</block>
  <block id="3990d1c8eb99844fa4339dea97a4f692" category="inline-link-macro">Planeie o sistema de ficheiros</block>
  <block id="d27d0d9d916f3c0f77ce2785848cb725" category="paragraph">Crie um novo arquivo<block ref="096c36ebf1ab8bf90e099d6808eb57d0" prefix=" " category="inline-code"></block> e consulte a <block ref="b777967ae458ad80005c5e1730bd996c" category="inline-link-macro-rx"></block> seção preencha-o da seguinte forma:</block>
  <block id="66969fa0d9af9f38ebaa31ea1c4b7051" category="list-text">Indicar que esse arquivo representa a configuração de um serviço de gerenciamento BeeGFS:</block>
  <block id="968fc19eb9be6283a0d5f79c8536f855" category="list-text">Defina qualquer configuração que se aplique somente a esse serviço BeeGFS. Normalmente, isso não é necessário para o serviço de gerenciamento, a menos que você precise ativar cotas, no entanto, qualquer parâmetro de configuração suportado do<block ref="025b9ec9690bfeefef6aedbac6e66c87" prefix=" " category="inline-code"></block> pode ser incluído. Observação os seguintes parâmetros são configurados automaticamente/em outro lugar e não devem ser especificados aqui:<block ref="02a09b36e77ebbfe1d499e597daef0d5" prefix=" " category="inline-code"></block><block ref="6097b6e95af2579f2147a330c21f7b59" prefix=" " category="inline-code"></block> , ,<block ref="1c285a92de2348d33dd1fc333fb66c45" prefix=" " category="inline-code"></block>, ,<block ref="7f8e8358da4bb8d8e7f6f717ad9eb0e9" prefix=" " category="inline-code"></block> E<block ref="b61a9cecccc8e8db252dd5200883c7cc" prefix=" " category="inline-code"></block>.</block>
  <block id="71529044e633eb2a4b25c87eb3ea0358" category="list-text">Configure um ou mais IPs flutuantes que outros serviços e clientes usarão para se conetar a esse serviço (isso definirá automaticamente a opção BeeGFS<block ref="7f8e8358da4bb8d8e7f6f717ad9eb0e9" prefix=" " category="inline-code"></block>):</block>
  <block id="db6bbb0bcb13fc624704b26d5d879534" category="list-text">Opcionalmente, especifique uma ou mais sub-redes IP permitidas que podem ser usadas para comunicação de saída (isso definirá automaticamente a opção BeeGFS<block ref="b61a9cecccc8e8db252dd5200883c7cc" prefix=" " category="inline-code"></block>):</block>
  <block id="8e19ae7e081dee60d1c86f207028684b" category="list-text">Especifique o destino de gerenciamento do BeeGFS no qual esse serviço armazenará dados de acordo com as seguintes diretrizes:</block>
  <block id="e0f52cfdc30da3e272257c8783119a56" category="list-text">O mesmo pool de storage ou nome de grupo de volumes pode ser usado para vários serviços/destinos do BeeGFS. Basta usar a mesma<block ref="b068931cc450442b63f5b3d276ea4297" prefix=" " category="inline-code"></block><block ref="48658e2ad8eaaf7daff452601ea618db" prefix=" " category="inline-code"></block> configuração ,<block ref="2d0e37110968341728e47095df64a19c" prefix=" " category="inline-code"></block> e e<block ref="e241a8daa5b8e1af3b82b1e1a8ec24a9" prefix=" " category="inline-code"></block> para cada um (os volumes listados para cada serviço devem ser diferentes).</block>
  <block id="245b1bd598314a0a050725e4c5d97c78" category="list-text">Os tamanhos de volume devem ser especificados como uma porcentagem do pool de armazenamento/grupo de volumes e o total não deve exceder 100 em todos os serviços/volumes usando um pool de armazenamento/grupo de volumes específico. Observação ao usar SSDs, é recomendável deixar algum espaço livre no grupo de volumes para maximizar o desempenho do SSD e a vida útil do desgaste (clique <block ref="16def06e05414fadffd7f5aab36ffa19" category="inline-link-macro-rx"></block> para obter mais detalhes).</block>
  <block id="339c4b049c3a7e5cdf355daceda6f43a" category="list-text">Clique <block ref="0a71609ed00bd9652e70cd5b106f9ae3" category="inline-link-macro-rx"></block> em para obter uma lista completa das opções de configuração disponíveis para o<block ref="8ca968d07b3817015da8919c700152f5" prefix=" " category="inline-code"></block>. Observação algumas opções, como<block ref="9ed39e2ea931586b6a985a6942ef573e" prefix=" " category="inline-code"></block> ,<block ref="67b3dba8bc6778101892eb77249db32e" prefix=" " category="inline-code"></block>, ,<block ref="99bd6603c88a46584bf9b94ffab3d6c9" prefix=" " category="inline-code"></block>,<block ref="db137bf87e9c1a766b82885236ac8b87" prefix=" " category="inline-code"></block><block ref="7951c85f8306dda4792beb0e6a356282" prefix=" " category="inline-code"></block> e e nomes de volume são geradas automaticamente e não devem ser especificadas aqui.</block>
  <block id="1511cb861f1160e48d8e9c07e416cd1a" category="paragraph">Clique <block ref="ffb907e2c03168946e1e4d8df77e6e36" category="inline-link-macro-rx"></block> para ver um exemplo de um arquivo de inventário completo que representa um serviço de gerenciamento BeeGFS.</block>
  <block id="29ee3861e1e5ac6fa4281c3c3fddd958" category="doc">Defina o serviço de metadados do BeeGFS</block>
  <block id="60513084f53d0d484c55e212d6a9248e" category="paragraph">Esta seção descreve a definição do serviço de metadados do BeeGFS. Pelo menos um serviço desse tipo deve existir no(s) cluster(s) HA para um sistema de arquivos específico. A configuração deste serviço inclui a definição de:</block>
  <block id="ef1af77af85196869032232af1a07f87" category="list-text">O tipo de serviço (metadados).</block>
  <block id="fc266b5cc64e2d259e49bb24b0c186d0" category="list-text">Especificar onde/como um volume deve ser armazenado os dados para esse serviço (o destino de metadados do BeeGFS).</block>
  <block id="884a1a74c4254f0e663282849a218050" category="paragraph">Fazendo referência à <block ref="b777967ae458ad80005c5e1730bd996c" category="inline-link-macro-rx"></block> seção, crie um arquivo em<block ref="3ffe66d0860049a5a100c385493d4997" prefix=" " category="inline-code"></block> para cada serviço de metadados no cluster e preencha-os da seguinte forma:</block>
  <block id="9cef1e732270bc660ef17d29df58c49c" category="list-text">Indicar que esse arquivo representa a configuração de um serviço de metadados do BeeGFS:</block>
  <block id="d1bbe7b3631d4fdecc7637f7f28f2cd9" category="list-text">Defina qualquer configuração que se aplique somente a esse serviço BeeGFS. No mínimo, você deve especificar a porta TCP e UDP desejada, no entanto, qualquer parâmetro de configuração suportado<block ref="672e512128cc9536bcf9f16964b20c49" prefix=" " category="inline-code"></block> também pode ser incluído. Observação os seguintes parâmetros são configurados automaticamente/em outro lugar e não devem ser especificados aqui:<block ref="6ea5464abdaaa0243bf0db8481a9a52b" prefix=" " category="inline-code"></block><block ref="dbca95678907e2f2bf827d44042c16c5" prefix=" " category="inline-code"></block> , ,<block ref="6097b6e95af2579f2147a330c21f7b59" prefix=" " category="inline-code"></block>,<block ref="1c285a92de2348d33dd1fc333fb66c45" prefix=" " category="inline-code"></block>, ,<block ref="7f8e8358da4bb8d8e7f6f717ad9eb0e9" prefix=" " category="inline-code"></block> E<block ref="b61a9cecccc8e8db252dd5200883c7cc" prefix=" " category="inline-code"></block>.</block>
  <block id="d3de182528701519a47cbe276590393a" category="list-text">Especifique o destino de metadados do BeeGFS no qual esse serviço armazenará dados de acordo com as diretrizes a seguir (isso também configurará a opção automaticamente<block ref="dbca95678907e2f2bf827d44042c16c5" prefix=" " category="inline-code"></block>):</block>
  <block id="df5fc0ef6e9aaec0f45d18fdd7ee8f12" category="paragraph">Clique <block ref="c59646481b474fffe5bc2a736ab8653d" category="inline-link-macro-rx"></block> para ver um exemplo de um arquivo de inventário completo que representa um serviço de metadados BeeGFS.</block>
  <block id="0badcf73673abd8a3f15cc4e386caafa" category="doc">Defina o serviço de storage BeeGFS</block>
  <block id="624bf455f36c44a126036391cd39a75c" category="paragraph">Esta seção descreve a definição do serviço de storage BeeGFS. Pelo menos um serviço desse tipo deve existir no(s) cluster(s) HA para um sistema de arquivos específico. A configuração deste serviço inclui a definição de:</block>
  <block id="e03fff2a92d72a09b4f9f5d0e895d1fd" category="list-text">O tipo de serviço (armazenamento).</block>
  <block id="e5e9883649f056a718503df3542a70d4" category="list-text">Especificar onde/como os volumes devem ser armazenados para esse serviço (os destinos de storage do BeeGFS).</block>
  <block id="bbadc58dfee849a3a02be97243b97990" category="paragraph">Fazendo referência à <block ref="b777967ae458ad80005c5e1730bd996c" category="inline-link-macro-rx"></block> seção, crie um arquivo em<block ref="a16ac980b359b788a73d8add9202cc6f" prefix=" " category="inline-code"></block> para cada serviço de armazenamento no cluster e preencha-os da seguinte forma:</block>
  <block id="204caa9915a25307074d637daed7faba" category="list-text">Indicar que esse arquivo representa a configuração de um serviço de storage BeeGFS:</block>
  <block id="d03efed3ebed6860068fb8a5123ef4c6" category="list-text">Defina qualquer configuração que se aplique somente a esse serviço BeeGFS. No mínimo, você deve especificar a porta TCP e UDP desejada, no entanto, qualquer parâmetro de configuração suportado<block ref="8a87bdd1964512794d560f1af3699fa1" prefix=" " category="inline-code"></block> também pode ser incluído. Observação os seguintes parâmetros são configurados automaticamente/em outro lugar e não devem ser especificados aqui:<block ref="6ea5464abdaaa0243bf0db8481a9a52b" prefix=" " category="inline-code"></block><block ref="facec0675a87a8e14bef255e83e40f1e" prefix=" " category="inline-code"></block> , ,<block ref="6097b6e95af2579f2147a330c21f7b59" prefix=" " category="inline-code"></block>,<block ref="1c285a92de2348d33dd1fc333fb66c45" prefix=" " category="inline-code"></block>, ,<block ref="7f8e8358da4bb8d8e7f6f717ad9eb0e9" prefix=" " category="inline-code"></block> E<block ref="b61a9cecccc8e8db252dd5200883c7cc" prefix=" " category="inline-code"></block>.</block>
  <block id="b0e2ab52d86028182775498a8ba8dcc3" category="list-text">Especifique o(s) destino(s) de storage BeeGFS em que esse serviço armazenará dados de acordo com as diretrizes a seguir (isso também configurará automaticamente a<block ref="facec0675a87a8e14bef255e83e40f1e" prefix=" " category="inline-code"></block> opção):</block>
  <block id="b18c6fe32d4f2f076f7c708ea5be89c1" category="paragraph">Clique <block ref="7bc3fba5853c696254cf4264774b5d50" category="inline-link-macro-rx"></block> para ver um exemplo de um arquivo de inventário completo que representa um serviço de storage BeeGFS.</block>
  <block id="2636cdb2e4c8c163e637fb4b1be7ef57" category="summary">Especifique a configuração de nó de bloco comum usando variáveis de grupo (group_vars).</block>
  <block id="42379f3693325579ec45c17436f3fa30" category="doc">Especifique Common Block Node Configuration</block>
  <block id="f3b82d936104a57a294cfa3abe47b556" category="paragraph">A configuração que deve ser Apple para todos os nós de bloco é definida em<block ref="7bc866ffde9914c7ef21768fcf6f0683" prefix=" " category="inline-code"></block>. Geralmente inclui:</block>
  <block id="8265488ffd9c98f3bf95687c608f6db9" category="list-text">Detalhes sobre como o nó de controle do Ansible deve se conectar aos sistemas de storage e-Series usados como nós de bloco.</block>
  <block id="e6a6b0e56e4888732076684459908257" category="list-text">Quais versões de firmware, NVSRAM e firmware da unidade os nós devem ser executados.</block>
  <block id="432cd2d056edf811cddfd42fe9367df2" category="list-text">Configuração global, incluindo configurações de cache, configuração de host e configurações de como os volumes devem ser provisionados.</block>
  <block id="b34cde4ef9da9f08725d6c62977d706a" category="admonition">As opções definidas neste arquivo também podem ser definidas em nós de bloco individuais, por exemplo, se modelos de hardware mistos estiverem em uso ou se você tiver senhas diferentes para cada nó. A configuração em nós de bloco individuais terá precedência sobre a configuração neste arquivo.</block>
  <block id="6afa815954c372aee339049211ead69a" category="paragraph">Crie o arquivo<block ref="7bc866ffde9914c7ef21768fcf6f0683" prefix=" " category="inline-code"></block> e preencha-o da seguinte forma:</block>
  <block id="35604a35256cdb2079414a606f693bc3" category="list-text">O Ansible não usa SSH para se conectar a nós de bloco e, em vez disso, usa APIs REST. Para conseguir isso, devemos definir:</block>
  <block id="c4cb5f6ece988910c4cb1a90025fb6fd" category="list-text">Especifique o nome de usuário e a senha para gerenciar cada nó. O nome de usuário pode ser omitido opcionalmente (e será padrão para admin), caso contrário, você pode especificar qualquer conta com admin Privileges. Especifique também se os certificados SSL devem ser verificados ou ignorados:</block>
  <block id="4b47eaf1cc2e42fd7841edf5ee136cf9" category="admonition">Listar senhas em texto simples não é recomendado. Use o Ansible Vault ou forneça o<block ref="b59049923d63016545b743560345fa56" prefix=" " category="inline-code"></block> ao executar o Ansible usando --extra-vars.</block>
  <block id="7a48384bf61ccc1cd67f79e20b2946b0" category="list-text">Opcionalmente, especifique o firmware da controladora, NVSRAM e da unidade que devem ser instalados nos nós. Eles precisarão ser baixados para<block ref="93501a11e921083efbd154e0cdff5f10" prefix=" " category="inline-code"></block> o diretório antes de executar o Ansible. O firmware da controladora e-Series e a NVSRAM podem ser baixados <block ref="66d434b6c80c5839cd158404e9040bf6" category="inline-link-macro-rx"></block> e o firmware da unidade <block ref="289e1473afcefdacfca9006e22cec3f7" category="inline-link-macro-rx"></block>:</block>
  <block id="9f068c46b4a825d808c2c9767e358bf4" category="admonition">Se essa configuração for especificada, o Ansible atualizará automaticamente todo o firmware, incluindo a reinicialização de controladores (se necessário) sem prompts adicionais. Espera-se que isso não cause interrupções na e/S do BeeGFS/host, mas possa causar uma diminuição temporária na performance.</block>
  <block id="e34a3cd38452267edb183f6fec7d3128" category="list-text">Ajuste os padrões globais de configuração do sistema. As opções e valores listados aqui são comumente recomendados para BeeGFS no NetApp, mas podem ser ajustados se necessário:</block>
  <block id="959afa15d8283f663da6fb31c0931335" category="list-text">Configurar padrões globais de provisionamento de volume. As opções e valores listados aqui são comumente recomendados para BeeGFS no NetApp, mas podem ser ajustados se necessário:</block>
  <block id="36aa3776a01484babb7b935f0790e38d" category="list-text">Se necessário, ajuste a ordem pela qual o Ansible selecionará unidades para pools de storage e grupos de volumes tendo em mente as práticas recomendadas a seguir:</block>
  <block id="9ddcb68f677516aceffc3293429a25e8" category="list-text">Liste as unidades (potencialmente menores) que devem ser usadas primeiro para gerenciamento e/ou volumes de metadados e, por último, os volumes de storage.</block>
  <block id="6857ed48db753853948c52afd2297877" category="list-text">Certifique-se de equilibrar a ordem de seleção da unidade entre os canais de unidade disponíveis com base no(s) modelo(s) de compartimento de disco/compartimento de unidade. Por exemplo, com o EF600 e sem expansões, as unidades 0-11 estão no canal de unidade 1 e as unidades 12-23 estão no canal de unidade. Assim, uma estratégia para equilibrar a seleção da unidade é selecionar<block ref="22527cd74d7cc7f48375817974dc1712" prefix=" " category="inline-code"></block> 99:0, 99:23, 99:1, 99:22, etc. caso haja mais de um compartimento, o primeiro dígito representa a ID do compartimento da unidade.</block>
  <block id="1f28da07b9b1480e254e0e0fe280f3a2" category="paragraph">Clique <block ref="85c5b5287ec04e7c836b5655b59fd26c" category="inline-link-macro-rx"></block> para ver um exemplo de um arquivo de inventário completo que representa a configuração de nó de bloco comum.</block>
  <block id="7b56de51b6636ae6d5c0129d3aa799db" category="summary">Especifique a configuração de nó de arquivo comum usando variáveis de grupo (group_vars).</block>
  <block id="db3a70a0b14fbd38f2ad1025900202fe" category="paragraph">A configuração que deve ser Apple para todos os nós de arquivo é definida em<block ref="4003590e6e5408f8e5272e50f909dfac" prefix=" " category="inline-code"></block>. Geralmente inclui:</block>
  <block id="8a78a1a399a517e776a6453f500e5c3c" category="list-text">Detalhes sobre como conetar e fazer login em cada nó de arquivo.</block>
  <block id="d749e2ca3efe2efbf2d8495c53fa6cb8" category="list-text">Configuração de rede comum.</block>
  <block id="01166eafe622404b58002e5aa76ca528" category="list-text">Se as reinicializações automáticas são permitidas.</block>
  <block id="109b40c80787d84c2b222ada208f2967" category="list-text">Como o firewall e os estados selinux devem ser configurados.</block>
  <block id="cd29db396a81799f9eb0187ecae937b1" category="list-text">Configuração de cluster, incluindo alertas e cercas.</block>
  <block id="8b4f60df6198db9d4eb1c6bbb19def6d" category="list-text">Ajuste de desempenho.</block>
  <block id="8ae73df7c749e2eb45a156f0c39fcc04" category="list-text">Configuração comum do serviço BeeGFS.</block>
  <block id="787446c6f7e5e0f4a50705b5035eba79" category="admonition">As opções definidas neste arquivo também podem ser definidas em nós de arquivo individuais, por exemplo, se modelos de hardware mistos estiverem em uso ou se você tiver senhas diferentes para cada nó. A configuração em nós de arquivo individuais terá precedência sobre a configuração neste arquivo.</block>
  <block id="0971602076ba9dff100f7cfc2d9e6059" category="paragraph">Crie o arquivo<block ref="4003590e6e5408f8e5272e50f909dfac" prefix=" " category="inline-code"></block> e preencha-o da seguinte forma:</block>
  <block id="84531cf8a820148a6599e174baf94979" category="list-text">Indique como o nó Ansible Control deve se autenticar com os hosts remotos:</block>
  <block id="ec6e88f08b026e04d1ce5f5f31493b21" category="inline-link-macro">Criptografia de conteúdo com o Ansible Vault</block>
  <block id="2d33afd54604fb6475c44a1bc47fe2b1" category="admonition">Particularmente para ambientes de produção, não armazene senhas em texto simples. Em vez disso, use o Ansible Vault (<block ref="37147a1e5d41497ae56472e8a2868a2a" category="inline-link-macro-rx"></block>consulte ) ou a<block ref="13d87b4892426ec19bdc58a4643d3104" prefix=" " category="inline-code"></block> opção ao executar o manual de estratégia. Se o<block ref="f2bf771afbc16045e1951ded58c56f98" prefix=" " category="inline-code"></block> já for root, você pode omitir opcionalmente o<block ref="424240cd4e5c359372b7f199431603d5" prefix=" " category="inline-code"></block>.</block>
  <block id="0a94da3169c04bc12f2c561654269433" category="list-text">Se você estiver configurando IPs estáticos em interfaces ethernet ou InfiniBand (por exemplo, IPs de cluster) e várias interfaces estiverem na mesma sub-rede IP (por exemplo, se ib0 estiver usando 192.168.1.10/24 e IB1 estiver usando 192.168.1.11/24), tabelas e regras de roteamento IP adicionais devem ser configuradas para que o suporte multi-homed funcione corretamente. Basta ativar o gancho de configuração da interface de rede fornecido da seguinte forma:</block>
  <block id="502d35f94d5c17779c9050bbed75f65f" category="list-text">Ao implantar o cluster, dependendo do protocolo de storage, pode ser necessário reiniciar os nós para facilitar a descoberta de dispositivos de bloco remoto (volumes e-Series) ou aplicar outros aspetos da configuração. Por padrão, os nós serão solicitados antes da reinicialização, mas você pode permitir que os nós sejam reiniciados automaticamente especificando o seguinte:</block>
  <block id="ff31dc05d095d346c18f3e8f2d758fe0" category="list-text">Por padrão, após uma reinicialização, para garantir que os dispositivos de bloco e outros serviços estejam prontos, o Ansible aguardará até que o systemd<block ref="dbd7cb25a43d1cd2bbc3bac871dad694" prefix=" " category="inline-code"></block> seja alcançado antes de continuar com a implantação. Em alguns cenários em que o NVMe/IB está em uso, isso pode não ser longo o suficiente para inicializar, descobrir e se conetar a dispositivos remotos. Isto pode resultar na continuação prematura e falha da implementação automatizada. Para evitar isso ao usar o NVMe/IB, defina o seguinte:</block>
  <block id="c41782825542f82199bd141519f37211" category="list-text">Várias portas de firewall são necessárias para que os serviços do cluster BeeGFS e HA se comuniquem. A menos que você deseje configurar o firwewall manualmente (não recomendado), especifique o seguinte para que as zonas de firewall necessárias sejam criadas e as portas abertas automaticamente:</block>
  <block id="2514951e199c5ba1bae751dec2faccfa" category="list-text">Neste momento, o SELinux não é suportado, e é recomendável que o estado seja definido como desativado para evitar conflitos (especialmente quando o RDMA está em uso). Defina o seguinte para garantir que o SELinux esteja desativado:</block>
  <block id="97a322f05bd6e92c24c84cd8a09de904" category="list-text">Configure a autenticação para que os nós de arquivo possam se comunicar, ajustando os padrões conforme necessário com base nas políticas da sua organização:</block>
  <block id="3061d639cb074dd9a1f3c7d24d061d94" category="list-text">Com base na <block ref="b777967ae458ad80005c5e1730bd996c" category="inline-link-macro-rx"></block> seção, especifique o IP de gerenciamento do BeeGFS para este sistema de arquivos:</block>
  <block id="e69d5d030b5267144694edd30e58fa4b" category="admonition">Embora pareça redundante,<block ref="58d2053fd85feeb270797993bb67b146" prefix=" " category="inline-code"></block> é importante quando você escala o sistema de arquivos BeeGFS além de um único cluster de HA. Os clusters de HA subsequentes são implantados sem um serviço de gerenciamento BeeGFS adicional e apontam para o serviço de gerenciamento fornecido pelo primeiro cluster.</block>
  <block id="d6521cd21608c38eda94ff4b2607ebac" category="list-text">Ative alertas de e-mail, se desejado:</block>
  <block id="369512731d385e76ab6ae5702e43d88e" category="list-text">A ativação do esgrima é fortemente recomendada, caso contrário, os serviços podem ser bloqueados de iniciar em nós secundários quando o nó primário falhar.</block>
  <block id="679f9b26ee84fb8a265eb6a80d1141b0" category="list-text">Ative a vedação globalmente especificando o seguinte:</block>
  <block id="2b86513417433b960c2a9628820cce70" category="inline-link-macro">propriedade cluster</block>
  <block id="a4a918a45181164207929d52aec36aec" category="inline-link-macro">predefinições</block>
  <block id="aaf17f2a8cba647c8702de94c1bef112" category="list-text">Observação qualquer suporte <block ref="f4efc844d4401fa0cd59f82e6a720d5a" category="inline-link-macro-rx"></block> também pode ser especificado aqui, se necessário. Normalmente, não é necessário ajustá-los, uma vez que a função BeeGFS HA é fornecida com uma série de testes bem testados<block ref="62cb44c0555eaba8953c22f475d751a4" category="inline-link-macro-rx"></block>.</block>
  <block id="8cb3e998c7b1e4cbe36289f2177363b5" category="list-text">Em seguida, selecione e configure um agente de esgrima:</block>
  <block id="bc6b3ed04c45895c341d99b6765c1caa" category="list-text">Opção 1: Para ativar a vedação utilizando unidades de distribuição de energia (PDUs) da APC:</block>
  <block id="94ebb967d1a890978b9758e3f2aac3bb" category="list-text">Opção 2: Para habilitar o esgrima usando as APIs do Redfish fornecidas pelo Lenovo XCC (e outros BMCs):</block>
  <block id="7f2e85da597afbbb84c30c58c72fc4a2" category="inline-link-macro">Documentação RedHat</block>
  <block id="064f7cc76dc5afb2fb3aa165873ba871" category="list-text">Para obter detalhes sobre a configuração de outros agentes de vedação, consulte o <block ref="1e76955e0560eaf6ce328d55fb062eeb" category="inline-link-macro-rx"></block>.</block>
  <block id="b611c6838bc0b80a5b542ae4d720301f" category="list-text">A função BeeGFS HA pode aplicar muitos parâmetros de ajuste diferentes para ajudar a otimizar ainda mais a performance. Estes incluem a otimização da utilização da memória do kernel e a e/S do dispositivo de bloco, entre outros parâmetros. A função é fornecida com um conjunto razoável de <block ref="e3e5af180e2cd561ad9b935d8101ce4e" category="inline-link-macro-rx"></block> com base em testes com os nós de bloco do NetApp e-Series, mas por padrão estes não são aplicados a menos que você especifique:</block>
  <block id="1242eea64a7ebfd7464359e597a4ec62" category="inline-link-macro">parâmetros de ajuste de desempenho</block>
  <block id="7353e78ee2c3bb2136aa1b29915ccf4b" category="list-text">Se necessário, especifique também quaisquer alterações ao ajuste de desempenho padrão aqui. Consulte a documentação completa <block ref="df0e33f301a426939663a0f2db36079c" category="inline-link-macro-rx"></block>para obter detalhes adicionais.</block>
  <block id="e535abe8b416a666cd34177ff6bbe395" category="list-text">Para garantir que os endereços IP flutuantes (às vezes conhecidos como interfaces lógicas) usados para serviços BeeGFS possam fazer failover entre nós de arquivo, todas as interfaces de rede devem ser nomeadas de forma consistente. Por padrão, os nomes de interface de rede são gerados pelo kernel, o que não é garantido para gerar nomes consistentes, mesmo em modelos de servidor idênticos com adaptadores de rede instalados nos mesmos slots PCIe. Isso também é útil ao criar inventários antes que o equipamento seja implantado e os nomes de interface gerados sejam conhecidos. Para garantir nomes de dispositivos consistentes, com base em um diagrama de blocos do servidor ou<block ref="6efa276570b668a53eaf7bf29c69d544" prefix=" " category="inline-code"></block> saída, especifique o mapeamento de interface lógica de endereço PCIe desejado da seguinte forma:</block>
  <block id="b577b9bc7da15f148c6521018b1c26f7" category="list-text">Para interfaces de rede InfiniBand (IPoIB):</block>
  <block id="10b951f140b750e6d3b9a61a2aa51fc1" category="list-text">Para interfaces de rede Ethernet:</block>
  <block id="e71729643558be7be36227d3edb537a5" category="admonition">Para evitar conflitos quando as interfaces são renomeadas (impedindo-as de serem renomeadas), você não deve usar nomes padrão potenciais como eth0, ens9f0, ib0 ou ibs4f0. Uma convenção de nomenclatura comum é usar 'e' ou 'i' para Ethernet ou InfiniBand, seguido do número do slot PCIe e uma letra para indicar a porta. Por exemplo, a segunda porta de um adaptador InfiniBand instalado no slot 3 seria: i3b.</block>
  <block id="62e75ccd7f725aa6905f33580950953f" category="admonition">Se você estiver usando um modelo de nó de arquivo verificado, clique <block ref="3d76a23cff20eb55b7795ee99a64cc43" category="inline-link-macro-rx"></block> em exemplo mapeamentos de endereço PCIe para porta lógica.</block>
  <block id="37fa384fbce35691f87f5108b23924df" category="list-text">Especifique opcionalmente a configuração que deve ser aplicada a todos os serviços BeeGFS no cluster. Os valores de configuração padrão podem ser <block ref="cb8aac20b4c821ca121d5c55cc4298ed" category="inline-link-macro-rx"></block>encontrados e a configuração por serviço é especificada em outro lugar:</block>
  <block id="1644ff30bfdd323dac0e52e1620614b2" category="list-text">Serviço de gerenciamento BeeGFS:</block>
  <block id="c9c23b537bdcdcf7e82ad149d3e28ab1" category="list-text">Serviços de metadados BeeGFS:</block>
  <block id="b292484ec320b2afcb3a63fdbff30bd3" category="list-text">Serviços BeeGFS Storage:</block>
  <block id="d636cd57abce18fc564705e1931029aa" category="list-text">A partir do BeeGFS 7.2.7 e 7.3.1 <block ref="770c4b58b3b364c4ac52cf5cc555453f" category="inline-link-macro-rx"></block>devem ser configurados ou explicitamente desativados. Há algumas maneiras de configurar isso usando a implantação baseada no Ansible:</block>
  <block id="2beb66fd9b0c065cfc742ee53ee1055d" category="list-text">Por padrão, a implantação configurará automaticamente a autenticação de conexão e gerará uma<block ref="cd304377fdc20285a5aa94e55ae85aa7" prefix=" " category="inline-code"></block> que será distribuída para todos os nós de arquivos e usada com os serviços BeeGFS. Esse arquivo também será colocado/mantido no nó de controle do Ansible<block ref="eee2923df30539b680421ca53d7c066b" prefix=" " category="inline-code"></block> onde ele deve ser mantido (com segurança) para reutilização com clientes que precisam acessar esse sistema de arquivos.</block>
  <block id="a6eacd255bbcfb7c0ed5589f3f4b3b80" category="list-text">Para gerar uma nova chave, especifique<block ref="34efb4240137e7a93d7ad83bde309514" prefix=" " category="inline-code"></block> ao executar o manual de estratégia do Ansible. Nota isto é ignorado se a<block ref="8b76cf2fb65e09dad03ca686be5cd464" prefix=" " category="inline-code"></block> estiver definida.</block>
  <block id="4d93b986f0992f2770f494a3ced4bd11" category="inline-link-macro">BeeGFS HA função</block>
  <block id="61eef27bde9b61db5c00501b13e855d5" category="list-text">Para opções avançadas, consulte a lista completa de padrões incluídos no <block ref="cf22ff8e76067e7f0eed610c434ec47d" category="inline-link-macro-rx"></block>.</block>
  <block id="ca03fa9d55c2bc9aa4bb21f10949f48a" category="list-text">Um segredo personalizado pode ser usado definindo o seguinte em<block ref="3cd295e6aaa39e2510aff65b801cc5ab" prefix=" " category="inline-code"></block>:</block>
  <block id="00d80f50123e52756def9093de1ba2aa" category="list-text">A autenticação de conexão pode ser totalmente desativada (NÃO recomendada):</block>
  <block id="b8a5eb74062e4ce8ebe0914712be3ae2" category="paragraph">Clique <block ref="632283d8f4d8d92337070d81c0b8ed5f" category="inline-link-macro-rx"></block> para ver um exemplo de um arquivo de inventário completo que representa a configuração comum do nó de arquivo.</block>
  <block id="74acf7796c51f1f58661f8cf66f5b969" category="section-title">Usando InfiniBand HDR (200GBK) com nós de bloco NetApp EF600:</block>
  <block id="9e152ebb462ebe95f96d2711a934ec01" category="paragraph">Para usar o InfiniBand HDR (200GB) com o EF600, o gerenciador de sub-rede deve suportar a virtualização. Se os nós de arquivo e bloco estiverem conetados usando um switch, isso precisará ser ativado no gerenciador de sub-rede para a malha geral.</block>
  <block id="11f007a0a372dd0901653de91029d3d8" category="inline-link-macro">configurando interfaces de storage de nós de arquivo</block>
  <block id="5a89b4f80128d0b3669b1564943cd510" category="paragraph">Se os nós de bloco e arquivo estiverem diretamente conetados usando InfiniBand, uma instância de<block ref="d21519b2c7af8ce90e382199384a8c06" prefix=" " category="inline-code"></block> deve ser configurada em cada nó de arquivo para cada interface diretamente conetada a um nó de bloco. Isso é feito especificando<block ref="a983fd54df8f83bdfdc5756fe288aa56" prefix=" " category="inline-code"></block> quando <block ref="9a73a9f8352cf6494b7d5bc6c3eb6d0a" category="inline-link-macro-rx"></block>.</block>
  <block id="5452bc376e228dbfc0b465054f2483c7" category="paragraph">Atualmente, a versão da caixa de entrada<block ref="d21519b2c7af8ce90e382199384a8c06" prefix=" " category="inline-code"></block> fornecida com distribuições Linux suportadas não suporta virtualização. Em vez disso, é necessário instalar e configurar a versão do<block ref="d21519b2c7af8ce90e382199384a8c06" prefix=" " category="inline-code"></block> a partir do NVIDIA OpenFabrics Enterprise Distribution (OFED). Embora a implantação usando Ansible ainda seja compatível, algumas etapas adicionais são necessárias:</block>
  <block id="b13b4c123d075f5df5e6f618489fde5f" category="inline-link-macro">requisitos de tecnologia</block>
  <block id="5c823b437a4fc165b3349c1455412d2b" category="list-text">Usando curl ou a ferramenta desejada, baixe os pacotes para a versão do OpenSM listados na <block ref="178d97073525b373723b8dda031e8548" category="inline-link-macro-rx"></block>seção do site do NVIDIA para<block ref="4d67f7bc650c0237a4f14903bb4e32de" prefix=" " category="inline-code"></block> o diretório. Por exemplo:</block>
  <block id="df1f716d0a26eb697eb7605722643850" category="list-text">Em<block ref="4003590e6e5408f8e5272e50f909dfac" prefix=" " category="inline-code"></block> Definir a seguinte configuração:</block>
  <block id="c25698c0b0a8b21ec89a22a39d05b4e4" category="summary">Especifique a configuração para nós de bloco individuais usando variáveis de host (host_vars).</block>
  <block id="007670379f88b0b437948cd7ffd18854" category="doc">Configurar nós de bloco individual</block>
  <block id="c04b45b2e867c15ec034a753c3caad42" category="paragraph">Esta seção aborda o preenchimento de um<block ref="e401274046660da23cecf42c63b0dc71" prefix=" " category="inline-code"></block> arquivo para cada nó de bloco no cluster. Esses arquivos só devem conter configuração exclusiva de um nó de bloco específico. Isso geralmente inclui:</block>
  <block id="718e1c8b260f855e4dfed258432c772c" category="list-text">O nome do sistema (conforme apresentado no System Manager).</block>
  <block id="d6535083366c5efbc468368177b26a11" category="list-text">O URL HTTPS para um dos controladores (usado para gerenciar o sistema usando sua API REST).</block>
  <block id="d34a9e5f2aea0e08afe426c3db560f6f" category="list-text">Quais nós de arquivo de protocolo de storage usam para se conectar a esse nó de bloco.</block>
  <block id="ac7d8826ccdecec74ae70f73a19ab9d6" category="list-text">Configuração de portas de placa de interface do host (HIC), como endereços IP (se necessário).</block>
  <block id="fa90fb024c68aeaa307b3486cdb0811c" category="paragraph">Fazendo referência ao esquema de endereçamento IP definido na <block ref="b777967ae458ad80005c5e1730bd996c" category="inline-link-macro-rx"></block>seção, para cada nó de bloco no cluster, crie um arquivo<block ref="9a669560bf11c3e8770f91d615f47c78" prefix=" " category="inline-code"></block> e o preencha da seguinte forma:</block>
  <block id="80eb8027c5428b5220f76ca5617cdbef" category="list-text">Na parte superior, especifique o nome do sistema e o URL HTTPS para um dos controladores:</block>
  <block id="81788ba0d7d02d81c063dbca621ba11b" category="inline-link-macro">protocolo</block>
  <block id="d1ac4a3f6cf15e4c501caf76560363b8" category="list-text">Selecione os <block ref="42254e7bd4c71b16c1c0d21e675ced23" category="inline-link-macro-rx"></block>nós de arquivo que serão usados para se conetar a esse nó de bloco:</block>
  <block id="c2e9d327966d74c358df1c68e849c85b" category="list-text">Protocolos suportados:<block ref="9df22f196a33acd0b372fe502de51211" prefix=" " category="inline-code"></block><block ref="39eea648dab96b0ee6022dabb38bc420" prefix=" " category="inline-code"></block> , ,<block ref="e05fe30750d3ea262a610d17ebc07019" prefix=" " category="inline-code"></block>,<block ref="a8a64cef262a04de4872b68b63ab7cd8" prefix=" " category="inline-code"></block>, , ,<block ref="7aee267b2c70d17165e6fa56dc01795a" prefix=" " category="inline-code"></block>,<block ref="11104f7e32c1e7884522b538834ffd9a" prefix=" " category="inline-code"></block><block ref="0ab2fb14820281e536188e7478368635" prefix=" " category="inline-code"></block>, ,<block ref="99e6ba7d601220dd39e915ce4c6ff74c" prefix=" " category="inline-code"></block>,<block ref="384fddfa43cdca25e66ad1b9a278e6c7" prefix=" " category="inline-code"></block>.</block>
  <block id="0c5c276a533c6231e1004931dde34c40" category="list-text">Dependendo do protocolo em uso, as portas HIC podem exigir configuração adicional. Quando necessário, a configuração da porta HIC deve ser definida de modo que a entrada superior na configuração para cada controlador corresponda com a porta física mais à esquerda em cada controlador, e a porta inferior a porta mais à direita. Todas as portas requerem uma configuração válida mesmo que não estejam em uso no momento.</block>
  <block id="95e06a898133e12b42adf8c80aafb2f7" category="admonition">Consulte também a seção abaixo se você estiver usando HDR (200GB) InfiniBand ou 200GB RoCE com EF600 nós de bloco.</block>
  <block id="2a6f3123e92916a549d4843b0432ee15" category="list-text">Para iSCSI:</block>
  <block id="b405e253b7123d507b950877cb495779" category="list-text">Para iSER:</block>
  <block id="3becb61841658038a043e3eca2dc705e" category="list-text">Para NVMe/IB:</block>
  <block id="5f42fe6193c58ec9a447a090be2e17b8" category="list-text">Para NVMe/RoCE:</block>
  <block id="4b9c9e1cc0a87604a342176becdb9d29" category="list-text">Os protocolos FC e SAS não exigem configuração adicional. SRP não é recomendado corretamente.</block>
  <block id="55876228853abf632dec9346a4f372ec" category="inline-link-macro">documentação</block>
  <block id="d487c72028a8f41291fa35df82cfe348" category="paragraph">Para opções adicionais para configurar portas HIC e protocolos host, incluindo a capacidade de configurar CHAP iSCSI, consulte o <block ref="03b4e8c5a2a4120cb0ea20ad53010d79" category="inline-link-macro-rx"></block> incluído com a coleção SANtricity. Observação ao implantar o BeeGFS, o pool de storage, a configuração de volume e outros aspectos do provisionamento de storage serão configurados em outro lugar e não deverão ser definidos nesse arquivo.</block>
  <block id="ca752ddde33be986f431e89edb589ac1" category="paragraph">Clique <block ref="4b43b7669fad4b5b712c0fa73fdf7e2c" category="inline-link-macro-rx"></block> para ver um exemplo de um arquivo de inventário completo que representa um nó de bloco único.</block>
  <block id="bb3b75abe4dc6581c40f5061474bb17f" category="section-title">Usando InfiniBand HDR (200GBK) ou RoCE de 200GB GB com nós de bloco NetApp EF600:</block>
  <block id="a743f5810f84b94eef8da441707ef9cb" category="paragraph">Para usar o InfiniBand HDR (200GB) com o EF600, um segundo IP "virtual" deve ser configurado para cada porta física. Abaixo está um exemplo da maneira correta de configurar um EF600 equipado com a porta dupla InfiniBand HDR HIC:</block>
  <block id="03a96e493f11c9bdee76520257a1462d" category="summary">Especifique a configuração para nós de arquivo individuais usando variáveis de host (host_vars).</block>
  <block id="021fa309ed559d86433974a82c934acb" category="doc">Configurar nós de arquivo individuais</block>
  <block id="882d9f125986842da2dd0a55dab49692" category="paragraph">Esta seção aborda o preenchimento de um<block ref="6ec1b7d2e07359817e585e3cab8e078f" prefix=" " category="inline-code"></block> arquivo para cada nó de arquivo no cluster. Esses arquivos só devem conter configuração exclusiva de um nó de arquivo específico. Isso geralmente inclui:</block>
  <block id="3a67b6422642abadfa758fc6684f8438" category="list-text">Definindo o IP ou o nome do host que o Ansible deve usar para se conetar ao nó.</block>
  <block id="fc0fd95b8cee27585e1c24e4d4a97663" category="list-text">Configuração de interfaces adicionais e IPs de cluster usados para serviços de cluster HA (Pacemaker e Corosync) para se comunicar com outros nós de arquivo. Por padrão, esses serviços usam a mesma rede que a interface de gerenciamento, mas interfaces adicionais devem estar disponíveis para redundância. A prática comum é definir IPs adicionais na rede de armazenamento, evitando a necessidade de um cluster adicional ou rede de gerenciamento.</block>
  <block id="a7d969bead9b9df7cbb19855a88e29f0" category="list-text">O desempenho de qualquer rede usada para comunicação em cluster não é crítico para o desempenho do sistema de arquivos. Com a configuração padrão do cluster, geralmente, pelo menos uma rede de 1GB GB/s fornecerá desempenho suficiente para operações do cluster, como a sincronização dos estados dos nós e a coordenação das alterações do estado dos recursos do cluster. Redes lentas/ocupadas podem fazer com que as alterações de estado de recursos demorem mais tempo do que o normal, e em casos extremos podem resultar em nós sendo despejados do cluster se não puderem enviar batimentos cardíacos em um período de tempo razoável.</block>
  <block id="a557d06b3a2f8ed98f967366125754a4" category="list-text">Configuração de interfaces usadas para conexão a nós de bloco pelo protocolo desejado (por exemplo: ISCSI/iSER, NVMe/IB, NVMe/RoCE, FCP, etc.)</block>
  <block id="54e21e619ebcd2038cbf6ad99bac975f" category="paragraph">Fazendo referência ao esquema de endereçamento IP definido na <block ref="d83d5464c6c0dbe0203869281fc21d2b" category="inline-link-macro-rx"></block>seção, para cada nó de arquivo no cluster, crie um arquivo<block ref="29c5616b1b8c32726b3152860a451439" prefix=" " category="inline-code"></block> e o preencha da seguinte forma:</block>
  <block id="625cd1f9698fddb4256f18db4fbe2c9f" category="list-text">Na parte superior, especifique o IP ou o nome de host que o Ansible deve usar para SSH para o nó e gerenciá-lo:</block>
  <block id="2c411df90af25473ca34f96c5d61fdbd" category="list-text">Configure IPs adicionais que podem ser usados para tráfego de cluster:</block>
  <block id="caec0146669daf8b955fbc692dce520b" category="list-text">Indique quais IPs devem ser usados para tráfego de cluster, com IPs preferenciais listados acima:</block>
  <block id="8ab316490a957aa5fb5fe572defa9604" category="admonition">Os IPS configurados na etapa dois não serão usados como IPs de cluster, a menos que sejam incluídos na<block ref="736da50e459ba4f3c37629db79164765" prefix=" " category="inline-code"></block> lista. Isso permite configurar IPs/interfaces adicionais usando o Ansible que podem ser usados para outros fins, se desejado.</block>
  <block id="fe608507c9e692b58aed73b8f11125e4" category="list-text">Se o nó de arquivo precisar se comunicar com nós de bloco por um protocolo baseado em IP, os IPs precisarão ser configurados na interface apropriada e quaisquer pacotes necessários para esse protocolo instalado/configurado.</block>
  <block id="e4e1c13bb0b14f6cb7608cbecea948ef" category="inline-link-macro">ISCSI</block>
  <block id="e38ebb7478bbd7c30fcefbdd68c36a12" category="list-text">Se estiver a utilizar <block ref="c46eb98747333d3b3d4803c99165252d" category="inline-link-macro-rx"></block>:</block>
  <block id="04363472361fdfa664dfcfdfa289d7f8" category="inline-link-macro">Iser</block>
  <block id="25d076d8b955ae9a10c335a6a41c5dac" category="list-text">Se estiver a utilizar <block ref="fa0a3baed35abd76cdb7d05d37537402" category="inline-link-macro-rx"></block>:</block>
  <block id="10c103240eb7689c62b54e419902d174" category="inline-link-macro">NVMe/IB</block>
  <block id="17e6fab71004356520b6a05746233689" category="list-text">Se estiver a utilizar <block ref="cb33aa2303f4543f0ddc6cc084dc11e2" category="inline-link-macro-rx"></block>:</block>
  <block id="bb0b9e255a3bf215a4f994ef912a5fd7" category="inline-link-macro">NVMe/RoCE</block>
  <block id="7b049824318ebce7d5761f9928468034" category="list-text">Se estiver a utilizar <block ref="dcd6a35349a26dd7f2ff0413151122c4" category="inline-link-macro-rx"></block>:</block>
  <block id="7de7f0266a638e2b92287e19c3daa0c0" category="list-text">Outros protocolos:</block>
  <block id="26bcb9f1cb6f391f4b2c18e676bb458d" category="inline-link-macro">NVMe/FC</block>
  <block id="22c518d1512a40bae5f92e178ec69be7" category="list-text">Se estiver usando <block ref="20d003b59b6b0f29fbb82550734ddf9c" category="inline-link-macro-rx"></block>o , a configuração de interfaces individuais não é necessária. A implantação do cluster do BeeGFS detetará automaticamente o protocolo e instalará/configurará os requisitos conforme necessário. Se você estiver usando uma malha para conectar nós de arquivo e bloco, verifique se os switches estão adequadamente zoneados seguindo as práticas recomendadas do fornecedor de switch e do NetApp.</block>
  <block id="cfaa375bf6c7f9fcc1bc04d4f30c9154" category="inline-link-macro">NetApp</block>
  <block id="59153461462a6c82d6207480cde38687" category="list-text">O uso de FCP ou SAS não requer a instalação ou configuração de software adicional. Se estiver usando FCP, verifique se os switches estão adequadamente zoneados seguindo <block ref="6839ca80f3cddcad48af8ac7c3fe1eba" category="inline-link-macro-rx"></block> e as práticas recomendadas do fornecedor de switch.</block>
  <block id="31887cc493f03e51b901bf0def837d66" category="list-text">O uso do SRP IB não é recomendado neste momento. Use o NVMe/IB ou iSER dependendo do suporte dos nós de bloco do e-Series.</block>
  <block id="02613a7c8b7a72805b5196cbf7ed0def" category="paragraph">Clique <block ref="6ff86e054594e10fe2118d48eb3fbd14" category="inline-link-macro-rx"></block> para ver um exemplo de um arquivo de inventário completo que representa um único nó de arquivo.</block>
  <block id="310ccb00662c7e9dcc32789c0d9b1b7a" category="section-title">Avançado: Alternando os adaptadores VPI do NVIDIA ConnectX entre o modo Ethernet e InfiniBand</block>
  <block id="b1c24e06350be92498850e67cc8d9f5b" category="inline-link-macro">Ferramentas NVIDIA Firmare (MFT)</block>
  <block id="042d56fca47b68c93d438d4b1275b212" category="paragraph">Os adaptadores NVIDIA ConnectX-Virtual Protocol Interconnect&amp;reg; (VPI) suportam InfiniBand e Ethernet como a camada de transporte. A troca entre modos não é negociada automaticamente e deve ser configurada usando a<block ref="366fe119442ebda85ac564541700d0b5" prefix=" " category="inline-code"></block> ferramenta incluída no<block ref="a55706c70f646ff289a7f6fb8ddc1353" prefix=" " category="inline-code"></block>, um pacote de código aberto que faz parte <block ref="feedb9cf3a554ef170c48364196566a1" category="inline-link-macro-rx"></block>do . Alterar o modo dos adaptadores só precisa ser feito uma vez. Isso pode ser feito manualmente ou incluído no inventário do Ansible como parte de qualquer interface configurada usando a<block ref="d6ca1855b29b160948694322764a86cb" prefix=" " category="inline-code"></block> seção do inventário, para que ele seja verificado/aplicado automaticamente.</block>
  <block id="2b4c9bc157bda4a68fe7b673b411f9cd" category="paragraph">Por exemplo, para alterar uma interface atual no modo InfiniBand para Ethernet, para que possa ser usada no RoCE:</block>
  <block id="f352db79870cb8a06a0551761aba6955" category="list-text">Para cada interface que você deseja configurar especifique<block ref="366fe119442ebda85ac564541700d0b5" prefix=" " category="inline-code"></block> como um mapeamento (ou dicionário) que especifica<block ref="ced82128b540acaf7a5a55ad007dc9fc" prefix=" " category="inline-code"></block> onde<block ref="ecb5fc74e9cd1f249d43a2bdbf2f239d" prefix=" " category="inline-code"></block> é determinado pelo número de porta do HCA para a interface. O<block ref="ecb5fc74e9cd1f249d43a2bdbf2f239d" prefix=" " category="inline-code"></block> valor pode ser determinado executando<block ref="2ea620f2a9b9bed90c46047fef7e151b" prefix=" " category="inline-code"></block> e adicionando 1 ao último número do nome do slot PCI e convertendo para decimal.</block>
  <block id="070b28e93cab063481c989d1404f9835" category="list-text">Por exemplo, fornecido<block ref="92c00058a177a7a840386578304e1345" prefix=" " category="inline-code"></block> (2 e 1 -&gt; porta HCA 3) -&gt;<block ref="f5e96e67a1ff914902859c7140e258c6" prefix=" " category="inline-code"></block>:</block>
  <block id="5656da44562ac70934e97182890aa356" category="inline-link-macro">Documentação da coleção de hosts do NetApp e-Series</block>
  <block id="62a3f60b673661ad66352505cb4f5f47" category="paragraph">Para obter mais detalhes, consulte a para obter informações <block ref="9ec6c7f8da9119d3e119ae207cfbe732" category="inline-link-macro-rx"></block>sobre o tipo/protocolo de interface que está a utilizar.</block>
  <block id="e20d89701cb46cf38953e6dc25a2dc3d" category="summary">Especifique quais nós de arquivo podem executar cada serviço BeeGFS usando o arquivo inventory.yml.</block>
  <block id="02e4c76e0e6e5414c70765451a79b37c" category="doc">Mapear os serviços BeeGFS para nós de arquivo</block>
  <block id="3e99717578ba1478873bc5c3269e4086" category="paragraph">Especifique quais nós de arquivo podem executar cada serviço BeeGFS usando o<block ref="d28e452e49fc926f32af1d87afcff3ce" prefix=" " category="inline-code"></block> arquivo.</block>
  <block id="24c07a5a77746e85d21882c88bdd5b03" category="paragraph">Esta seção descreve como criar o<block ref="d28e452e49fc926f32af1d87afcff3ce" prefix=" " category="inline-code"></block> arquivo. Isso inclui listar todos os nós de bloco e especificar quais nós de arquivo podem executar cada serviço BeeGFS.</block>
  <block id="5ee7bf1a42518812c2b87b463bf96a31" category="paragraph">Crie o arquivo<block ref="d28e452e49fc926f32af1d87afcff3ce" prefix=" " category="inline-code"></block> e preencha-o da seguinte forma:</block>
  <block id="7aec62cda467a76d024911e74e1fec38" category="list-text">Na parte superior do arquivo, crie a estrutura de inventário padrão do Ansible:</block>
  <block id="5923f18af043b9957bf5541e595cc0f5" category="list-text">Crie um grupo que contenha todos os nós de bloco participantes deste cluster HA:</block>
  <block id="b084d86d2b539345bcda62aaa5bceb0f" category="list-text">Crie um grupo que contenha todos os serviços BeeGFS no cluster e os nós de arquivo que os executarão:</block>
  <block id="eec391bff48a7ed3bbf30e3280fbe9e3" category="list-text">Para cada serviço BeeGFS no cluster, defina o(s) nó(s) de arquivo preferencial e secundário(s) que deve(m) executar esse serviço:</block>
  <block id="e26a68a8ce5809998083f351bf56677e" category="paragraph">Clique <block ref="00544a89e642f3f5a354362c58d52f2e" category="inline-link-macro-rx"></block> para ver um exemplo de um arquivo de inventário completo.</block>
  <block id="234c05131256028f5ab7ea9b87261ff3" category="summary">O inventário do Ansible é um conjunto de arquivos de configuração que definem o cluster de HA do BeeGFS desejado.</block>
  <block id="7a1eabc3deb7fd02ceb1e16eafc41073" category="inline-link-macro">inventário</block>
  <block id="283c77f47e33325beac16dfcff1fbdc4" category="inline-link-macro">subdiretórios/ficheiros</block>
  <block id="3a6e55a49a2cdf7c86076b810d565fc2" category="paragraph">Recomenda-se seguir as práticas padrão do Ansible para organizar o <block ref="6c37acba8ff27fe32f3259d928e2df83" category="inline-link-macro-rx"></block>, incluindo o uso do , <block ref="0b746a370389b97701184b02d91b44b0" category="inline-link-macro-rx"></block>em vez de armazenar todo o inventário em um arquivo.</block>
  <block id="21c8e198e85188d23c3e8ec1332bc84c" category="paragraph">O inventário do Ansible para um único cluster BeeGFS HA está organizado da seguinte forma:</block>
  <block id="3c51eceddcbfbb08a09bb39a9f19e117" category="paragraph"><block ref="3c51eceddcbfbb08a09bb39a9f19e117" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8c57469570cfaa1ea4910df225230163" category="admonition">Como um único sistema de arquivos BeeGFS pode abranger vários clusters de HA, é possível que grandes instalações tenham vários inventários do Ansible. Geralmente, não é recomendável definir vários clusters de HA como um único inventário do Ansible para evitar problemas.</block>
  <block id="1b1ad4049313d49cd09961eea7b62a6f" category="list-text">No nó de controle do Ansible, crie um diretório vazio que conterá o inventário do Ansible para o cluster BeeGFS que você deseja implantar.</block>
  <block id="697c53131c77d1cf7ff864d4f02aca2d" category="list-text">Se o seu sistema de arquivos eventualmente contiver vários clusters de HA, é recomendável criar primeiro um diretório para o sistema de arquivos e, em seguida, subdiretórios para o inventário que representa cada cluster de HA. Por exemplo:</block>
  <block id="aa4b0754e84122851b5c983186feaa49" category="list-text">No diretório que contém o inventário do cluster HA que deseja implantar, crie dois diretórios<block ref="96fa973cda8809ad84f646e3d8fbbc1c" prefix=" " category="inline-code"></block> e<block ref="3342582e194d63e4c91b56623752c9c6" prefix=" " category="inline-code"></block> dois arquivos<block ref="d28e452e49fc926f32af1d87afcff3ce" prefix=" " category="inline-code"></block> e<block ref="2f78c4e27feaf25ffb33d97e8ff7e7a6" prefix=" " category="inline-code"></block>.</block>
  <block id="20034aab6a0bc59dc9804ff9d5960982" category="paragraph">As seções a seguir descrevem o conteúdo de cada um desses arquivos.</block>
  <block id="cc211dfb7bfb2c913740671716097933" category="summary">A solução BeeGFS on NetApp combina o sistema de arquivos paralelos do BeeGFS com os sistemas de storage do NetApp e-Series para uma infraestrutura confiável, dimensionável e econômica que acompanha o ritmo dos workloads exigentes.</block>
  <block id="49274a22f777d8ee156d9a597e66731d" category="doc">Visão geral e requisitos</block>
  <block id="4fde5e2673b7e14764688237d98539a4" category="paragraph">Usar os sistemas de storage do NetApp e/EF-Series como nós de bloco do BeeGFS e x86 servidores como nós de arquivo BeeGFS ao implantar clusters de alta disponibilidade do BeeGFS usando o Ansible.</block>
  <block id="8ea6cc14c3361efc3a01a352f7d8b097" category="admonition">As definições de terminologia usadas nesta seção podem ser encontradas na <block ref="aeb2367c8b6e8485692304c0f57562a5" category="inline-link-macro-rx"></block>página.</block>
  <block id="0b79795d3efc95b9976c7c5b933afce2" category="section-title">Introdução</block>
  <block id="58d7101385af8eaef1dc397806989cbb" category="inline-link-macro">Arquiteturas verificadas da NetApp</block>
  <block id="7a5c5ebabde54389985d3b9fadd7b425" category="paragraph"><block ref="4d27806b9f70cbf03b3483248ec7d7bc" category="inline-link-macro-rx"></block>Embora forneça configurações de referência predefinidas e orientações para dimensionamento, alguns clientes e parceiros podem preferir projetar arquiteturas personalizadas mais adequadas a requisitos específicos ou preferências de hardware. Um dos principais benefícios da escolha do BeeGFS no NetApp é a capacidade de implantar clusters de HA de disco compartilhado BeeGFS com o Ansible. Isso simplifica o gerenciamento do cluster e aumenta a confiabilidade com componentes de HA de autoria da NetApp. A implantação de arquiteturas BeeGFS personalizadas no NetApp ainda é feita usando o Ansible. Isso mantém uma abordagem semelhante a um dispositivo em uma variedade flexível de hardware.</block>
  <block id="ab2a4abcb79fad270532717ca3427f92" category="paragraph">Esta seção descreve as etapas gerais necessárias para implantar os sistemas de arquivos BeeGFS no hardware do NetApp e o uso do Ansible para configurar os sistemas de arquivos BeeGFS. Para obter detalhes sobre as melhores práticas em torno do design dos sistemas de arquivos BeeGFS e exemplos otimizados, consulte <block ref="4d27806b9f70cbf03b3483248ec7d7bc" category="inline-link-macro-rx"></block>a seção.</block>
  <block id="6d2bf94f38d1fdf840fe9b231866899c" category="section-title">Visão geral da implantação</block>
  <block id="00298d02a62e3ad710061bdb858bc72b" category="paragraph">Geralmente, a implantação de um sistema de arquivos BeeGFS envolve as seguintes etapas:</block>
  <block id="a3f59792a4244ec442fe3d6689ce5a5d" category="list-text">Configuração inicial:</block>
  <block id="bed2a4653b2c422bf2632c104da5c873" category="list-text">Instale/cabo de hardware.</block>
  <block id="a2d48c839c25c269a71b232a366cdfbc" category="list-text">Configurar nós de arquivo e bloco.</block>
  <block id="e8ec50ce42367b5c2125ba84ee0b2b07" category="list-text">Configure um nó de controle do Ansible.</block>
  <block id="1166a5354ac02035abc5f968f7ed4570" category="list-text">Defina o sistema de arquivos BeeGFS como um inventário do Ansible.</block>
  <block id="45a41d17b919852e176b0bef9ba18dde" category="list-text">Execute o Ansible em nós de arquivo e bloco para implantar o BeeGFS.</block>
  <block id="b29828241f384dfaa560eb24d45c7035" category="list-text">Opcionalmente, para configurar clientes e montar BeeGFS.</block>
  <block id="3b5256e7140e65040f9635a6b8b884ee" category="paragraph">As seções subsequentes cobrirão esses passos com mais detalhes.</block>
  <block id="216c2fbf006b3f1ca9acdd60d04a9b4b" category="paragraph">O Ansible gerencia todas as tarefas de configuração e provisionamento de software, incluindo:</block>
  <block id="fd699aca3f31bc5416fca3a153cc4779" category="list-text">Criando/mapeando volumes em nós de bloco.</block>
  <block id="7565e19b34a4d2460620720a599da376" category="list-text">Formatação/ajuste de volumes em nós de arquivo.</block>
  <block id="8744d71fb56c3e75f875de0a416ea912" category="list-text">Instalação/configuração de software em nós de arquivo.</block>
  <block id="dcc4901f1f1938989ed2264f42fd1104" category="list-text">Estabelecimento do cluster de HA e configuração de recursos do BeeGFS e serviços de sistema de arquivos.</block>
  <block id="5a2ebfb8baa378cfcfcba58bbb1380c2" category="section-title">Requisitos</block>
  <block id="077a8397a5f4ba0711faf87b91f8906c" category="paragraph">O suporte ao BeeGFS no Ansible é lançado <block ref="e5bec9f043c86b9afcbef28a688a4cdd" category="inline-link-macro-rx"></block>como uma coleção de funções e módulos que automatizam a implantação e o gerenciamento completos dos clusters de HA do BeeGFS.</block>
  <block id="5207de659c47ed66a8f04540f2cf7d28" category="paragraph">O BeeGFS em si é versionado seguindo um esquema de controle de versão do &lt;major&gt; &lt;major&gt;.&lt;minor&gt; &lt;minor&gt;.&lt;patch&gt; e a coleção mantém funções para cada versão suportada do BeeGFS, por exemplo, BeeGFS 7,2 ou BeeGFS 7,3. À medida que as atualizações da coleção são lançadas, a versão de patch em cada função será atualizada para apontar a versão BeeGFS mais recente disponível para essa ramificação de lançamento (exemplo: 7,2.8). Cada versão da coleção também é testada e suportada com distribuições e versões específicas do Linux, atualmente Red Hat para nós de arquivos, RedHat e Ubuntu para clientes. A execução de outras distribuições não é suportada e a execução de outras versões (especialmente outras versões principais) não é recomendada.</block>
  <block id="ff58765d6c48f433685b2f9354c057ed" category="section-title">Nó de controle do Ansible</block>
  <block id="267dc210028d3a563bde0eb07ca563a0" category="paragraph">Esse nó conterá o inventário e os playbooks usados para gerenciar o BeeGFS. Requer:</block>
  <block id="fa364b2fe46e5e06529d637ca126add1" category="list-text">Ansible-core 6.x (Ansible-core 2,13)</block>
  <block id="3ac4555ed79bcb16976991998d5a957c" category="list-text">Python 3,6 (ou posterior)</block>
  <block id="44ebd117631269d8cc52eda82b890ecc" category="list-text">Pacotes Python (PIP): Ipaddr e netaddr</block>
  <block id="8486bce50d4152772da3c4531a015ab8" category="paragraph">Também é recomendável configurar SSH sem senha do nó de controle para todos os nós de arquivo BeeGFS e clientes.</block>
  <block id="5bca534f5a45c18ffc0306e63b306c62" category="section-title">Nós de arquivos BeeGFS</block>
  <block id="de752721186f0ef334b71ac4b3fe9cb5" category="paragraph">Os nós de arquivo devem executar o RedHat 9,3 e ter acesso ao repositório HA que contém os pacotes necessários (pacemaker, corosync, fence-agents-all, resource-maents). Por exemplo, o seguinte comando pode ser executado para ativar o repositório apropriado no RedHat 9:</block>
  <block id="676b08aacbe937f16d558f23d90b29da" category="section-title">Nós de cliente BeeGFS</block>
  <block id="dc203cff346fc33ab19584264833d533" category="paragraph">Uma função Ansible do cliente BeeGFS está disponível para instalar o pacote cliente BeeGFS e gerenciar a(s) montagem(s) do BeeGFS. Esta função foi testada com RedHat 8,4 e Ubuntu 22,04.</block>
  <block id="2e0da5c1c3cbd1cda1312f57209c96e4" category="inline-link-macro">BeeGFS suporta distribuição Linux e kernel</block>
  <block id="b44b294130612c32e5f179fb81f347ec" category="paragraph">Se você não estiver usando o Ansible para configurar o cliente BeeGFS e montar o BeeGFS, é possível usar qualquer um<block ref="ed8f85054917a214583881f0e58e2825" category="inline-link-macro-rx"></block>.</block>
  <block id="cd3a8919c565c37be6e50322a583eac4" category="summary">Planeje a implantação do sistema de arquivos antes de desenvolver o inventário do Ansible.</block>
  <block id="6ec9184bd478b3b836d1c92fa51f1baa" category="paragraph">Antes de implantar o sistema de arquivos, você deve definir quais endereços IP, portas e outras configurações serão exigidas por todos os nós de arquivo, nós de bloco e serviços BeeGFS executados no cluster. Embora a configuração exata varie com base na arquitetura do cluster, esta seção define as práticas recomendadas e as etapas a seguir que geralmente são aplicáveis.</block>
  <block id="229ad1ff2fa862e1fa317520fe78ad42" category="list-text">Se você estiver usando um protocolo de storage baseado em IP (como iSER, iSCSI, NVMe/IB ou NVMe/RoCE) para conectar nós de arquivo a nós de bloco, preencha a Planilha a seguir para cada bloco básico. Cada conexão direta em um único bloco de construção deve ter uma sub-rede única, e não deve haver sobreposição com sub-redes usadas para conetividade cliente-servidor.</block>
  <block id="b55e37e80a68661366be8c4377b13489" category="cell">Nó de arquivo</block>
  <block id="90c8d508b315842cddaf605e8e068d6f" category="cell">Porta de IB</block>
  <block id="75ba8d70e3692ba200f0e0df37b4d2ae" category="cell">Endereço IP</block>
  <block id="d7f9ab96aecba4fb98ecf8831eb0a462" category="cell">Nó de bloco</block>
  <block id="b9549a36d11b47e2d2f9389f6363ff8e" category="cell">IP físico</block>
  <block id="0611f793ccd40e910f3d7f82c1bb6d66" category="cell">IP virtual (apenas para EF600K com HDR IB)</block>
  <block id="6d68d27a364d17c3c6b36281d161a34e" category="cell">&lt;HOSTNAME&gt;</block>
  <block id="2feb1f8d58fa960c8d2635cb910ad7ec" category="cell">&lt;PORT&gt;</block>
  <block id="a87d961719c43a8065ad6f09b292f547" category="cell">&lt;IP/SUBNET&gt;</block>
  <block id="5d52f332806d779c548497e97b6050ed" category="admonition">Se os nós de arquivo e bloco em cada bloco de construção estiverem diretamente conetados, você pode frequentemente reutilizar os mesmos IPs/esquema para vários blocos de construção.</block>
  <block id="0eca8abaad32a83698b54d0fcea93ad3" category="list-text">Independentemente de você estar usando InfiniBand ou RDMA em Converged Ethernet (RoCE) para a rede de storage, preencha a seguinte Planilha para determinar os intervalos de IP que serão usados para serviços de cluster de HA, serviços de arquivos BeeGFS e clientes para se comunicar:</block>
  <block id="261addf78c7b2c961032b3dd08ba0b1f" category="cell">Finalidade</block>
  <block id="8433249cf732856c8ef7700f591da923" category="cell">Porta InfiniBand</block>
  <block id="5c43713485260d7759e7710e65d5b181" category="cell">Endereço IP ou intervalo</block>
  <block id="0c2bd0118b2766abe77c40b1bd393b44" category="cell">IP(s) de cluster do BeeGFS</block>
  <block id="c4aa072ba75aa28cd14308257fee1a08" category="cell">&lt;INTERFACE(s)&gt;</block>
  <block id="65b5aefed3041b5dccc318ffe87431b7" category="cell">&lt;RANGE&gt;</block>
  <block id="ae709a18a45df821c97f171d87abda05" category="cell">Gestão BeeGFS</block>
  <block id="1ec0a19ea7a783b022b53265dd90c383" category="cell">&lt;IP(s)&gt;</block>
  <block id="c7725fe17ccf0fe6dfa72467bca22d07" category="cell">Metadados BeeGFS</block>
  <block id="d01488abddf6343d229f4a687a740a9d" category="cell">Storage BeeGFS</block>
  <block id="7b0215ed75674e2bc6f9d23b5db3a59a" category="cell">Clientes BeeGFS</block>
  <block id="0353e2599d6ca03a78f42855abe0a6f4" category="list-text">Se você estiver usando uma única sub-rede IP, apenas uma Planilha será necessária, caso contrário, também preencha uma Planilha para a segunda sub-rede.</block>
  <block id="c19e3d6f1cb2b9ed96d0553ef0363080" category="list-text">Com base no exposto, para cada componente básico no cluster, preencha a seguinte Planilha que define quais serviços BeeGFS ele será executado. Para cada serviço, especifique o(s) nó(s) de arquivo preferencial/secundário(s), a porta de rede, IP(s) flutuante(s), a atribuição de zona NUMA (se necessário) e que nó(s) de bloco serão usados para seus destinos. Consulte as seguintes diretrizes ao preencher a Planilha:</block>
  <block id="501d4d9b0f3910c0d30a4a828247f2b0" category="list-text">Especifique os serviços BeeGFS como<block ref="5670713387ceeca6a99ea4c5d6381de9" prefix=" " category="inline-code"></block> ,<block ref="adc521b987f8d17684929a7814fb39a6" prefix=" " category="inline-code"></block><block ref="13e9e938499f52dc5dd76a5f625aef19" prefix=" " category="inline-code"></block> ou onde o ID representa um número exclusivo em todos os serviços BeeGFS desse tipo neste sistema de arquivos. Esta convenção simplificará a referência a esta Planilha em seções subsequentes ao criar arquivos para configurar cada serviço.</block>
  <block id="d5164729d98e85db7b7cb0282c74163d" category="list-text">As portas para serviços BeeGFS precisam ser exclusivas em um componente básico específico. Certifique-se de que os serviços com o mesmo número de porta nunca possam ser executados no mesmo nó de arquivo para evitar conflitos de porta.</block>
  <block id="8a18a5a52ba3b55c805c94f8ac3889c9" category="list-text">Se necessário, os serviços podem usar volumes de mais de um nó de bloco e/ou pool de storage (e nem todos os volumes precisam pertencer à mesma controladora). Vários serviços também podem compartilhar o mesmo nó de bloco e/ou configuração de pool de storage (volumes individuais serão definidos em uma seção posterior).</block>
  <block id="80a7df0cf1674016cc4cc2588c911429" category="cell">Serviço BeeGFS (nome do arquivo)</block>
  <block id="5515295c9721b17faa0365ab7a888791" category="cell">Nós de arquivo</block>
  <block id="60aaf44d4b562252c04db7f98497e9aa" category="cell">Porta</block>
  <block id="b1cddc6c78e92a26b8976dc97327d412" category="cell">IPs flutuantes</block>
  <block id="72159601fc6c3d952cc9825d610ddd68" category="cell">Zona NUMA</block>
  <block id="40cf615dcacf5ec5faf6a3cdf1ff5a6e" category="cell">Pool de storage</block>
  <block id="cdd25d91a2d0aca59a80f91cfe9af9de" category="cell">Controlador proprietário</block>
  <block id="7428caa4314139d517357edc7bd85e13" category="cell">&lt;SERVICE TYPE&gt;_&lt;ID&gt;.yml</block>
  <block id="05dbd6a9ac1e738536c568b9c76b6d9f" category="cell">NÓ(S) DE ARQUIVO SECUNDÁRIO(S)&gt;</block>
  <block id="ce434f7769160d97da3ed0d746a4d983" category="cell">&lt;INTERFACE&gt;:&lt;IP/SUBNET&gt; &lt;INTERFACE&gt;:&lt;IP/SUBNET&gt;</block>
  <block id="0f9b262f92ad6ba4a547abbe4c98c80b" category="cell">&lt;NUMA NODE/ZONE&gt;</block>
  <block id="9746b3183301bae601d6d3e7479f01f9" category="cell">&lt;BLOCK NODE&gt;</block>
  <block id="b95d182f851d32de39590b07917d6dc2" category="cell">POOL DE ARMAZENAMENTO/GRUPO DE VOLUME&gt;</block>
  <block id="fe1341a187350b5203bdf2c08baa2ac8" category="cell">A OU B&gt;</block>
  <block id="78ff65afbf92a15cd30dea91aefc1e9b" category="inline-link-macro">práticas recomendadas</block>
  <block id="b7121c47f4a8776d685a934610733179" category="inline-link-macro">Defina os componentes básicos do BeeGFS</block>
  <block id="30de48a7127295863f5f215fde6c08ca" category="paragraph">Para obter mais detalhes sobre convenções padrão, práticas recomendadas e planilhas de exemplo preenchidas, consulte <block ref="28bbc43b20c819953a71af93d1c4e109" category="inline-link-macro-rx"></block>as seções e <block ref="4d6b3e482c415f3bd4b50893909bd85e" category="inline-link-macro-rx"></block>do BeeGFS na arquitetura verificada do NetApp.</block>
  <block id="90791b7e8bfac5f0631992c1a7269f5e" category="summary">Configure um nó de controle do Ansible para implantar e gerenciar o sistema de arquivos.</block>
  <block id="9cdd817721bc924d0da9d43995b6cf7d" category="doc">Configurar o nó de controle do Ansible</block>
  <block id="31996051b4f5b99834fd90885ae099c1" category="paragraph">Um nó de controle do Ansible é uma máquina Linux física ou virtual usada para gerenciar o cluster. Deve cumprir os seguintes requisitos:</block>
  <block id="b4851e92b19af0c5c82447fc0937709d" category="inline-link-macro">requisitos</block>
  <block id="09b6dc0fcffa0dde65b5a3c6c13023a3" category="list-text">Conheça a <block ref="a141ba9ea027408279c2684d8c781c5d" category="inline-link-macro-rx"></block>função de HA do BeeGFS, incluindo as versões instaladas do Ansible, Python e quaisquer pacotes Python adicionais.</block>
  <block id="13f2a3097f055e043d74b20940df2658" category="inline-link-macro">Requisitos de nó de controle do Ansible</block>
  <block id="5f4740da5b8ab13112ebf332f879cc6e" category="list-text">Conheça o oficial<block ref="37e11d19f014e84f10fff4770a09b235" category="inline-link-macro-rx"></block>, incluindo versões de sistema operacional.</block>
  <block id="2bce5080fcc3d6b8a54a49745dd28d52" category="list-text">Tenha acesso SSH e HTTPS a todos os nós de arquivos e blocos.</block>
  <block id="7007891572e5a419add36531fb5f1be8" category="paragraph">Etapas detalhadas da instalação podem ser encontradas <block ref="29286ffa550e08bdb3d9fa0a0be38f68" category="inline-link-macro-rx"></block>.</block>
  <block id="0d4f2647b7895adb046a3392c35f6828" category="summary">As etapas necessárias para instalar e o hardware do cabo usado para executar o BeeGFS no NetApp.</block>
  <block id="7cb1df0e9acb4e346f49d40865ebd99f" category="doc">Instalação e hardware do cabo</block>
  <block id="d0dde32750edec525fffdeacdfe54a80" category="section-title">Planeie a instalação</block>
  <block id="694daa4aca75c61a285846a5ec0b4b0c" category="paragraph">Cada sistema de arquivos BeeGFS consistirá em alguns nós de arquivo que executam serviços BeeGFS usando storage de back-end fornecido por alguns nós de bloco. Os nós de arquivo são configurados em um ou mais clusters de alta disponibilidade para fornecer tolerância de falhas para serviços BeeGFS. Cada nó de bloco já é um par de HA ativo/ativo. O número mínimo de nós de arquivos com suporte em cada cluster de HA é de três e o número máximo de nós de arquivos com suporte em cada cluster é de dez. Os sistemas de arquivos BeeGFS podem ser dimensionados além de dez nós, implantando vários clusters de HA independentes que trabalham juntos para fornecer um namespace único do sistema de arquivos.</block>
  <block id="bb4d2a6e482d18af607ee0f07c23d049" category="paragraph">Normalmente, cada cluster de HA é implantado como uma série de "componentes básicos", onde alguns nós de arquivos (x86 servidores) são diretamente conectados a algum número de nós de bloco (normalmente sistemas de storage e-Series). Essa configuração cria um cluster assimétrico, no qual os serviços do BeeGFS só podem ser executados em certos nós de arquivo que têm acesso ao storage de bloco de back-end usado nos destinos do BeeGFS. O equilíbrio de nós de arquivo para bloco em cada componente básico e o protocolo de storage em uso para conexões diretas dependem dos requisitos de uma instalação específica.</block>
  <block id="f1fafc095d6233cf2f9c8d299f6427bb" category="paragraph">Uma arquitetura de cluster de HA alternativa usa uma malha de storage (também conhecida como rede de área de storage ou SAN) entre os nós de arquivo e bloco para estabelecer um cluster simétrico. Isso permite que os serviços BeeGFS sejam executados em qualquer nó de arquivo em um cluster de HA específico. Como os clusters simétricos geralmente não são tão econômicos devido ao hardware SAN extra, esta documentação presume o uso de um cluster assimétrico implantado como uma série de um ou mais blocos de construção.</block>
  <block id="edda5f6836a1cf72ee14894e512b7707" category="admonition">Certifique-se de que a arquitetura do sistema de arquivos desejada para uma determinada implantação do BeeGFS seja bem compreendida antes de prosseguir com a instalação.</block>
  <block id="767202c8efedcb9c8edf20f9fce9818d" category="section-title">Hardware de rack</block>
  <block id="14511f2f5564650d129ca7cabc333278" category="inline-link-macro">bloco</block>
  <block id="d5e81e99079cfbb27d893365b01c6733" category="paragraph">Ao Planejar a instalação, é importante que todos os equipamentos em cada bloco de construção sejam montados em rack adjacentes. A prática recomendada é que os nós de arquivo sejam colocados imediatamente acima dos nós de bloco em cada componente básico. Siga a documentação do(s) modelo(s) de arquivo e <block ref="3876eb55ee0ffaac1627ebbb7ea8fad8" category="inline-link-macro-rx"></block> nós que você está usando ao instalar trilhos e hardware no rack.</block>
  <block id="39979c4d8cb83fc0443baa4ff7f48f07" category="paragraph">Exemplo de um único componente básico:</block>
  <block id="2acc893838b1eb90d1c84b809a236835" category="inline-image-macro">Exemplo de componente básico</block>
  <block id="0cf0e609964c9930dfcd66ad6ffe8361" category="paragraph"><block ref="0cf0e609964c9930dfcd66ad6ffe8361" category="inline-image-macro-rx" type="image"></block></block>
  <block id="98ac29120ce31a8b9f17cc6bcad239b1" category="paragraph">Exemplo de uma instalação grande do BeeGFS onde há vários componentes básicos em cada cluster de HA e vários clusters de HA no sistema de arquivos:</block>
  <block id="ea853e91a86a86cbc9cea1e039d6ec17" category="inline-image-macro">Exemplo de implantação do BeeGFS</block>
  <block id="92bf56a169d86e418f4a78aaaf5a3153" category="paragraph"><block ref="92bf56a169d86e418f4a78aaaf5a3153" category="inline-image-macro-rx" type="image"></block></block>
  <block id="bdc136e73217b9254f82f3e521e32772" category="section-title">Nós de bloco e arquivo de cabo</block>
  <block id="f6f19d063d8a1cc74be9ed77236d08df" category="inline-link-macro">Baseado na arquitetura BeeGFS de segunda geração na NetApp Verified</block>
  <block id="2701ff78b7eb357effebb637477114b8" category="paragraph">Normalmente, você conetará diretamente as portas HIC dos nós de bloco e-Series às portas designadas do adaptador de canal do host (para protocolos InfiniBand) ou do adaptador de barramento do host (para Fibre Channel e outros protocolos) dos nós de arquivo. A maneira exata de estabelecer essas conexões dependerá da arquitetura desejada do sistema de arquivos, aqui está um <block ref="48bff068417bb27c10f3ddce61de14e9" category="inline-link-macro-rx"></block>exemplo :</block>
  <block id="d280e44616dd9cb363292987ea8c1939" category="inline-image-macro">Exemplo de arquivo BeeGFS para bloquear o cabeamento de nó</block>
  <block id="c2ad0d9a44428ac4772ec872090c3da7" category="paragraph"><block ref="c2ad0d9a44428ac4772ec872090c3da7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="40bc85e53495ab0b176af4ef17ea6072" category="section-title">Nós de arquivo de cabo para a rede do cliente</block>
  <block id="1899ae951504892f3420f88e3162b84d" category="paragraph">Cada nó de arquivo terá algum número de portas InfiniBand ou Ethernet designadas para o tráfego de clientes BeeGFS. Dependendo da arquitetura, cada nó de arquivo terá uma ou mais conexões com uma rede cliente/storage de alto desempenho, potencialmente com vários switches para redundância e maior largura de banda. Aqui está um exemplo de cabeamento de cliente usando switches de rede redundantes, onde as portas destacadas em verde escuro versus verde claro estão conetadas a switches separados:</block>
  <block id="85180c66af01717bf125dc82f4f1ed53" category="inline-image-macro">Exemplo de cabeamento do cliente BeeGFS</block>
  <block id="4864e5d5de47684fb9038e0ef5afff80" category="paragraph"><block ref="4864e5d5de47684fb9038e0ef5afff80" category="inline-image-macro-rx" type="image"></block></block>
  <block id="90a31af51bc017a18f8f032fa49cf901" category="section-title">Ligar a rede de gestão e energia</block>
  <block id="b213f1ea719142ad3112dd64e712e06a" category="paragraph">Estabeleça todas as conexões de rede necessárias para a rede dentro e fora da banda.</block>
  <block id="2f967ed85c3e532e8aee39997f97a27c" category="paragraph">Conete todas as fontes de alimentação garantindo que cada nó de arquivo e bloco tenha conexões com várias unidades de distribuição de energia para redundância (se disponível).</block>
  <block id="9635e0061cd355a35e70799e909727af" category="summary">Etapas manuais necessárias para configurar nós de arquivo e bloco antes de executar o Ansible.</block>
  <block id="f5878e619c266b2ac6254dd1e4d95bfb" category="doc">Configurar nós de arquivo e bloco</block>
  <block id="d3f9f418681aaa08eb617366f4e167e0" category="section-title">Configurar o controlador de gerenciamento de placa base (BMC)</block>
  <block id="d387b972fad59cf81f9a534bd8f6c654" category="paragraph">Um controlador de gerenciamento de placa base (BMC), às vezes chamado de processador de serviço, é o nome genérico para o recurso de gerenciamento fora da banda incorporado em várias plataformas de servidor que podem fornecer acesso remoto, mesmo que o sistema operacional não esteja instalado ou acessível. Normalmente, os fornecedores comercializam essa funcionalidade com sua própria marca. Por exemplo, no Lenovo SR665, o BMC é conhecido como o controlador XClarity (XCC) da Lenovo.</block>
  <block id="9f9fca437c1db2135d8b5e17bdc36ff6" category="paragraph">Siga a documentação do fornecedor do servidor para habilitar as licenças necessárias para acessar essa funcionalidade e garantir que o BMC esteja conetado à rede e configurado adequadamente para acesso remoto.</block>
  <block id="d4519b3f996eace0908217fda1966da8" category="admonition">Se for desejado esgrima baseada em BMC usando o Red Fish, certifique-se de que o Redfish esteja habilitado e que a interface BMC esteja acessível a partir do sistema operacional instalado no nó do arquivo. Pode ser necessária uma configuração especial no comutador de rede se o BMC e o sistema operativo partilharem a mesma interface de rede física.</block>
  <block id="f9fa015b01242f44a7319213f0a01ff2" category="section-title">Sintonize as definições do sistema</block>
  <block id="93f3e5d94e30643aac7f8755a6dcfeb4" category="inline-link-macro">modelos de nó de arquivo verificados</block>
  <block id="ccb84ec92fe82c0d6ab0a55f23e3eb17" category="paragraph">Usando a interface de configuração do sistema (BIOS/UEFI), verifique se as configurações estão definidas para maximizar o desempenho. As configurações exatas e os valores ideais variam de acordo com o modelo do servidor em uso. As orientações são fornecidas para <block ref="5f1c2d149eae40e1322e9fafa3998295" category="inline-link-macro-rx"></block>, caso contrário, consulte a documentação do fornecedor do servidor e as práticas recomendadas com base no seu modelo.</block>
  <block id="b9a7b8c50025e62b9e91f9baf3ba2304" category="section-title">Instale um sistema operativo</block>
  <block id="db2fad664adc100829ebfbffc137527d" category="paragraph">Instale um sistema operacional suportado com base nos requisitos de nó de arquivo <block ref="9e16c2314a033d11f0704d539a894ebf" category="inline-link-macro-rx"></block>listados . Consulte as etapas adicionais abaixo com base na sua distribuição Linux.</block>
  <block id="a82007c47b25723539a00ff94e8b3d27" category="section-title">RedHat</block>
  <block id="0123fb5bcbcd68deb7c43ec913e70705" category="inline-link">Como Registrar e assinar um sistema RHEL</block>
  <block id="29f7e22c9a0b8d15ea802eee7a5e07cf" category="inline-link">Como limitar as atualizações</block>
  <block id="5ab261ccc77c613b4430d72688133ef7" category="paragraph">Use o RedHat Subscription Manager para Registrar e assinar o sistema para permitir a instalação dos pacotes necessários dos repositórios oficiais da Red Hat e limitar as atualizações da versão suportada do Red Hat:<block ref="77a4421cc9f01b777ceaeda595865c3c" prefix=" " category="inline-code"></block>. Para obter instruções, consulte<block ref="2e2e1be81972e19947d90393d5319b6e" category="inline-link-rx"></block> e <block ref="bbd834e2960f33a50fb102fd4d31a6d9" category="inline-link-rx"></block>.</block>
  <block id="9a7877d2d6f43233661b52c31362cb32" category="paragraph">Ative o repositório Red Hat que contém os pacotes necessários para alta disponibilidade:</block>
  <block id="5ea84babe2cd259121a70aff2652769b" category="section-title">Configurar a rede de gestão</block>
  <block id="45f7cb03ff15b64d9405b68be6bdcc97" category="paragraph">Configure todas as interfaces de rede necessárias para permitir o gerenciamento na banda do sistema operacional. As etapas exatas dependerão da distribuição e versão específica do Linux em uso.</block>
  <block id="6c2e3de482271e18e34375218bcbbfcd" category="admonition">Certifique-se de que o SSH esteja ativado e que todas as interfaces de gerenciamento estejam acessíveis a partir do nó de controle do Ansible.</block>
  <block id="ab2b3440ca9e61bb50d98cdd593fea31" category="section-title">Atualize o firmware HCA e HBA</block>
  <block id="bc8be72fdc9d6054f356bb2b7f80fd12" category="inline-link-macro">Matriz de interoperabilidade do NetApp</block>
  <block id="f2cf78e0d1f7ad85dcd842faf7ac4515" category="paragraph">Certifique-se de que todos os HBAs e HCAs estão a executar versões de firmware suportadas listadas no <block ref="8b59326e9a63a3b8d68c843e238b964b" category="inline-link-macro-rx"></block> e, se necessário, atualize. Recomendações adicionais para adaptadores NVIDIA ConnectX podem ser encontradas <block ref="9e16c2314a033d11f0704d539a894ebf" category="inline-link-macro-rx"></block>.</block>
  <block id="48206a73aaea76911a94b52a97986f4a" category="section-title">Nós de bloco</block>
  <block id="76752be68c87426437dc7d4a501b481c" category="inline-link-macro">Comece a trabalhar com o e-Series</block>
  <block id="871d3d62a8d11ed96c7c911ca5961c83" category="paragraph">Siga as etapas para <block ref="4525dc880e156901740411dc7fd56b26" category="inline-link-macro-rx"></block>configurar a porta de gerenciamento em cada controlador de nó de bloco e, opcionalmente, definir o nome do storage array para cada sistema.</block>
  <block id="20c7fe47a0acb373f79e663a36dd1e25" category="admonition">Nenhuma configuração adicional além de garantir que todos os nós de bloco estejam acessíveis a partir do nó de controle do Ansible. A configuração restante do sistema será aplicada/mantida com o Ansible.</block>
  <block id="c8a0fcd1a15bb039926f56fd15ce82e9" category="summary">Termos e conceitos que se aplicam ao BeeGFS na solução NetApp.</block>
  <block id="5d146c3fd3b69782d69f66b386b88a4c" category="doc">Termos e conceitos</block>
  <block id="5710fc980ad3cc07a2d53a30f8e42802" category="paragraph">Os termos e conceitos a seguir se aplicam à solução BeeGFS on NetApp.</block>
  <block id="55f7d3580cdac035324d4348b9dac05b" category="inline-link-macro">Administrar clusters BeeGFS</block>
  <block id="8a537f7e0401508a2313fc508d89890f" category="admonition">Consulte <block ref="4aaa57a471c2a91096648d10c36a27be" category="inline-link-macro-rx"></block>a seção para obter detalhes adicionais sobre termos e conceitos específicos para interagir com clusters de alta disponibilidade (HA) do BeeGFS.</block>
  <block id="cf5f3091e30dee6597885d8c0e0c357f" category="cell">Prazo</block>
  <block id="b5a7adde1af5c87d7fd797b6245c2a39" category="cell">Descrição</block>
  <block id="d41d8cd98f00b204e9800998ecf8427e" category="doc"></block>
  <block id="0a40e3c91a3a55c9a37428c6d194d0e5" category="paragraph">AI</block>
  <block id="10a99475af71a950df10ae4fb41e6b27" category="paragraph">Inteligência artificial.</block>
  <block id="206b11a774f63418bae21625e6f6d2fb" category="paragraph">Inventário do Ansible</block>
  <block id="4278d92c9bdf11d430a86f440cffbb06" category="paragraph">Estrutura de diretório contendo arquivos YAML que são usados para descrever o cluster BeeGFS HA desejado.</block>
  <block id="396262ee936f3d3e26ff0e60bea6cae0" category="paragraph">BMC</block>
  <block id="20e7cb5fddc6ef60deff83e38954fc9c" category="paragraph">Controlador de gerenciamento de placa de base. Às vezes referido como um processador de serviço.</block>
  <block id="399cda935f5cb9e0b94eaf42309257fb" category="paragraph">nós de bloco</block>
  <block id="56977f2bee9d2716e5224e95ceb72839" category="paragraph">Sistemas de storage.</block>
  <block id="fac04ca68a48af91f0290001604a2463" category="paragraph">clientes</block>
  <block id="3e3cee1fd1e1de5762df25400f62794a" category="paragraph">Nós no cluster HPC que executam aplicativos que precisam utilizar o sistema de arquivos. Às vezes também conhecido como nós de computação ou GPU.</block>
  <block id="f5ce9f5cb682a1f863d5a8c51ac28683" category="paragraph">DL</block>
  <block id="3a113e532fcdd400cdf83ef62ac9d9de" category="paragraph">Aprendizagem profunda.</block>
  <block id="c404903bef63acba3e3abe370e09474f" category="paragraph">nós de arquivo</block>
  <block id="2118e5d99e7b7d309a8f82e52f89ab22" category="paragraph">Servidores de arquivos BeeGFS.</block>
  <block id="594c16ca0695f6665d7cf4971707adf6" category="paragraph">HA</block>
  <block id="b5c55115b0714618209ee9459023bad1" category="paragraph">Alta disponibilidade.</block>
  <block id="a25baf723f95fbcbceae8399b638f108" category="paragraph">HIC</block>
  <block id="2d5307a091565cb524b7c0a2c48a1588" category="paragraph">Placa de interface do host.</block>
  <block id="2f569257101cf136a49d983584bfc44f" category="paragraph">HPC</block>
  <block id="9a3968cd0518e869657fa99f060cd8f2" category="paragraph">Computação de alta performance.</block>
  <block id="06a52007ec390481940877b63a4b7c61" category="paragraph">Workloads em estilo HPC</block>
  <block id="221d47451f4f42c2e516a414798b6e1e" category="paragraph">Os workloads no estilo HPC são normalmente caraterizados por vários nós de computação ou GPUs que precisam acessar o mesmo conjunto de dados em paralelo para facilitar um trabalho de computação ou treinamento distribuído. Esses conjuntos de dados costumam ser compostos por arquivos grandes que devem ser distribuídos por vários nós de storage físico para eliminar os gargalos tradicionais de hardware que impediriam o acesso simultâneo a um único arquivo.</block>
  <block id="d01fd9b01e9dde8bd3dc247afbfb7218" category="paragraph">ML</block>
  <block id="65abbc2190f8ea8522de3b7df3397302" category="paragraph">Aprendizado de máquina.</block>
  <block id="85587c49afa2ea2adacd4bbcdb57d064" category="paragraph">PNL</block>
  <block id="1e8218217ed7a37de1bd5f394a253db8" category="paragraph">Processamento de linguagem natural.</block>
  <block id="04808383df00e6501c912f8fae661f73" category="paragraph">NLU</block>
  <block id="f0f701867a5e02fa406b05e22df7ae03" category="paragraph">Compreensão da linguagem natural.</block>
  <block id="af33781ae5dd2f5ffb194a90989038a8" category="paragraph">NVA</block>
  <block id="4119dd754c8118aa6a1bb36f194a2f52" category="paragraph">O programa NetApp Verified Architecture (NVA) fornece configurações de referência e orientações de dimensionamento para workloads e casos de uso específicos. Essas soluções são completamente testadas e foram projetadas para minimizar os riscos de implantação e acelerar o time-to-market.</block>
  <block id="67d6c06d21e47a4c86e1be15e327370e" category="paragraph">rede de armazenamento / rede cliente</block>
  <block id="7829f14ded222e6be0bb1a1d28e8f977" category="paragraph">Rede usada para que os clientes se comuniquem com o sistema de arquivos BeeGFS. Esta é frequentemente a mesma rede usada para a Interface de passagem de mensagens paralela (MPI) e outra comunicação de aplicativos entre nós de cluster HPC.</block>
  <block id="d02afad2b9d23614832a35187b8296bf" category="summary">Este site documenta como implantar e gerenciar BeeGFS no NetApp.</block>
  <block id="745f22cbd412f2eab6c6bf95417e8b09" category="doc">O que está incluído neste site</block>
  <block id="f3ea919081d7ce9021ea4cd631632407" category="paragraph">Este site documenta como implantar e gerenciar BeeGFS no NetApp usando arquiteturas verificadas (NVAs) do NetApp e arquiteturas personalizadas. Os designs da NVA são completamente testados e fornecem aos clientes configurações de referência e orientações de dimensionamento para minimizar o risco de implantação e acelerar o time-to-market. O NetApp também é compatível com arquiteturas BeeGFS personalizadas executadas no hardware da NetApp, oferecendo aos clientes e parceiros flexibilidade no design de sistemas de arquivos para atender a uma ampla gama de requisitos. Ambas as abordagens utilizam o Ansible para implantação, fornecendo uma abordagem semelhante a um dispositivo que gerencia o BeeGFS em qualquer escala em uma variedade flexível de hardware.</block>
  <block id="e9c44bbfd795a5d63d74c6a77afee70d" category="summary">Avisos legais fornecem acesso a declarações de direitos autorais, marcas registradas, patentes e muito mais.</block>
  <block id="30d965eef5ba25c6b9998ae38270b43e" category="doc">Avisos legais</block>
  <block id="6016a2b341113bf496b719905398ecd2" category="section-title">Direitos de autor</block>
  <block id="52009bb7ee17227f566cd26a02caee56" category="inline-link-macro"><block ref="52009bb7ee17227f566cd26a02caee56" category="inline-link-rx"></block></block>
  <block id="a1a9afcf552a769c282769271829889a" category="paragraph"><block ref="a1a9afcf552a769c282769271829889a" category="inline-link-macro-rx"></block></block>
  <block id="126a02652da6de02962cf1b654fd6376" category="section-title">Marcas comerciais</block>
  <block id="c4ce4761e466527d26b3e3d5ed1006fd" category="paragraph">NetApp, o logotipo DA NetApp e as marcas listadas na página de marcas comerciais da NetApp são marcas comerciais da NetApp, Inc. Outros nomes de produtos e empresas podem ser marcas comerciais de seus respetivos proprietários.</block>
  <block id="f99aa604031e5049799e73b5c3748a98" category="inline-link-macro"><block ref="f99aa604031e5049799e73b5c3748a98" category="inline-link-rx"></block></block>
  <block id="5d545fe5152641e2ebe654e336e520e5" category="paragraph"><block ref="5d545fe5152641e2ebe654e336e520e5" category="inline-link-macro-rx"></block></block>
  <block id="be89498d2f8a22ce47c02ba9795fe2af" category="section-title">Patentes</block>
  <block id="d0b19d36be2c5f16e9aef46c8a452d3d" category="paragraph">Uma lista atual de patentes de propriedade da NetApp pode ser encontrada em:</block>
  <block id="88e5eabd3917048b6927c42496b98f86" category="inline-link-macro"><block ref="88e5eabd3917048b6927c42496b98f86" category="inline-link-rx"></block></block>
  <block id="dd38f906b37d412de7d1c1dcf4cbf31c" category="paragraph"><block ref="dd38f906b37d412de7d1c1dcf4cbf31c" category="inline-link-macro-rx"></block></block>
  <block id="56c34c6410dd45c5cec44149ad0ce037" category="section-title">Política de privacidade</block>
  <block id="8acb58cbd50ef1b468a020ee0bd351d3" category="inline-link-macro"><block ref="8acb58cbd50ef1b468a020ee0bd351d3" category="inline-link-rx"></block></block>
  <block id="2352c4e1f4d0024ade0869e00e6243f4" category="paragraph"><block ref="2352c4e1f4d0024ade0869e00e6243f4" category="inline-link-macro-rx"></block></block>
  <block id="c0227cef6f07a8cd2ac72f2945b031aa" category="section-title">Código aberto</block>
  <block id="9b73989307c1975dfa4d5e1581e4afe8" category="paragraph">Os arquivos de aviso fornecem informações sobre direitos autorais de terceiros e licenças usadas no software NetApp.</block>
  <block id="cc1ba14f8dc9bd7ba20e2aa654cde10b" category="inline-link">Aviso para o e-Series/EF-Series SANtricity os</block>
  <block id="2dae7f81af3097152530b0bc519d7eb1" category="paragraph"><block ref="2dae7f81af3097152530b0bc519d7eb1" category="inline-link-rx"></block></block>
  <block id="e69ebf3ec790efafa5cfc7b6502ccfe4" category="summary">A solução BeeGFS on NetApp inclui considerações de design de arquitetura usadas para determinar o equipamento, o cabeamento e as configurações específicos necessários para dar suporte a workloads validados.</block>
  <block id="ebd8431a0b14e9588377860f5d21d80b" category="doc">Visão geral da arquitetura</block>
  <block id="dc3f25ceea15d952c20a612e806039b4" category="section-title">Arquitetura de componentes básicos</block>
  <block id="f968e1fab577166d28baa278b7fbec71" category="paragraph">O sistema de arquivos BeeGFS pode ser implantado e dimensionado de diferentes maneiras, dependendo dos requisitos de storage. Por exemplo, os casos de uso que apresentam principalmente vários arquivos pequenos se beneficiarão do desempenho e capacidade extra dos metadados, enquanto os casos de uso com menos arquivos grandes podem favorecer mais capacidade de armazenamento e desempenho para o conteúdo real dos arquivos. Essas várias considerações afetam diferentes dimensões da implantação do sistema de arquivos paralelo, o que aumenta a complexidade ao projetar e implantar o sistema de arquivos.</block>
  <block id="a0f56902d72268743383af795844da43" category="paragraph">Para lidar com esses desafios, a NetApp projetou uma arquitetura padrão de componentes básicos usada para dimensionar cada uma dessas dimensões. Normalmente, os componentes básicos do BeeGFS são implantados em um de três perfis de configuração:</block>
  <block id="cbebd598c304febe3d9ce528a39f79ca" category="list-text">Um componente básico único, incluindo gerenciamento, metadados e serviços de storage do BeeGFS</block>
  <block id="f606793c59d48b54b2b3a18a70dd823d" category="list-text">Metadados do BeeGFS, além de componente básico de storage</block>
  <block id="5d36a489380874ed227d193957d972de" category="list-text">Um componente básico de storage do BeeGFS</block>
  <block id="3679eaa30562d3f5040cb64c625a3455" category="paragraph">A única alteração de hardware entre essas três opções é o uso de unidades menores para metadados do BeeGFS. Caso contrário, todas as alterações de configuração são aplicadas através do software. E, com o Ansible como mecanismo de implantação, a configuração do perfil desejado para um componente básico específico simplifica as tarefas de configuração.</block>
  <block id="0623572375a27997b16aa8f259513278" category="paragraph">Para obter mais detalhes, <block ref="27bdb301347b8d7fa8a057384825ba6a" category="inline-xref-macro-rx"></block>consulte .</block>
  <block id="e3b101a8b62b6541bfde340117b3f92b" category="section-title">Serviços de sistema de arquivos</block>
  <block id="26e699f65c8724efd549a1445c4b9eb3" category="paragraph">O sistema de arquivos BeeGFS inclui os seguintes serviços principais:</block>
  <block id="a9effde6a4743049a20cd75e19532999" category="list-text">*Serviço de gestão.* Registra e monitora todos os outros serviços.</block>
  <block id="edd29dd37a407bf6bdd3dcefe97db0d5" category="list-text">*Serviço de armazenamento.* Armazena o conteúdo do arquivo de usuário distribuído conhecido como arquivos de bloco de dados.</block>
  <block id="dc134a7a2e4d2cbe6789c47709b38b35" category="list-text">*Serviço de metadados.* Mantém o controle do layout do sistema de arquivos, diretório, atributos de arquivo e assim por diante.</block>
  <block id="bfd4d1f28f912adef70ff502946f2d7a" category="list-text">*Serviço de atendimento ao cliente.* Monta o sistema de arquivos para acessar os dados armazenados.</block>
  <block id="94ab5c559c66cc4fc4b2e1c1ed4b00a3" category="paragraph">A figura a seguir mostra os componentes e as relações da solução BeeGFS usadas com os sistemas NetApp e-Series.</block>
  <block id="ea56ba40e3c5a9cd92e8f51ccb6c3ae4" category="inline-image-macro">Componentes BeeGFS</block>
  <block id="6097578a9c3bfa602c1e755a66ade1ab" category="paragraph"><block ref="6097578a9c3bfa602c1e755a66ade1ab" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9ac96964e53d6a8061e16551c85e7b05" category="paragraph">Como um sistema de arquivos paralelo, o BeeGFS distribui seus arquivos em vários nós de servidor para maximizar a performance de leitura/gravação e a escalabilidade. Os nós de servidor trabalham juntos para fornecer um único sistema de arquivos que pode ser simultaneamente montado e acessado por outros nós de servidor, comumente conhecidos como _clients_. Esses clientes podem ver e consumir o sistema de arquivos distribuídos da mesma forma que um sistema de arquivos local, como NTFS, XFS ou ext4.</block>
  <block id="2cd4f3c05097f81722656ab8de9b6a25" category="paragraph">Os quatro principais serviços são executados em uma ampla variedade de distribuições Linux suportadas e se comunicam por qualquer rede compatível com TCP/IP ou RDMA, incluindo InfiniBand (IB), Omni-Path (OPA) e RDMA sobre Ethernet convergente (RoCE). Os serviços de servidor BeeGFS (gerenciamento, storage e metadados) são daemons de espaço do usuário, enquanto o cliente é um módulo de kernel nativo (sem patchless). Todos os componentes podem ser instalados ou atualizados sem reinicialização, e você pode executar qualquer combinação de serviços no mesmo nó.</block>
  <block id="cf03dce6d27c37ae2bf803a5ad8ddb93" category="section-title">Arquitetura HA</block>
  <block id="5c306284db745339f153886fd666ba5f" category="paragraph">O BeeGFS no NetApp expande a funcionalidade da edição empresarial BeeGFS ao criar uma solução totalmente integrada com o hardware da NetApp que habilita uma arquitetura de alta disponibilidade (HA) de disco compartilhado.</block>
  <block id="5481b5a39e7ecc68d8956711964cffcb" category="admonition">Embora a edição da comunidade BeeGFS possa ser usada gratuitamente, a edição empresarial exige a compra de um contrato de assinatura de suporte profissional de um parceiro como a NetApp. A edição corporativa permite o uso de vários recursos adicionais, incluindo resiliência, imposição de cotas e pools de armazenamento.</block>
  <block id="d1d1e6e3c28393c984fbb987be60324d" category="paragraph">A figura a seguir compara as arquiteturas de HA de disco compartilhado e de disco compartilhado.</block>
  <block id="09642005b99405e19fa67b3689b21ee7" category="inline-image-macro">Comparação de arquitetura DE HA</block>
  <block id="ea01fc482ace12597c68d8d51d799253" category="paragraph"><block ref="ea01fc482ace12597c68d8d51d799253" category="inline-image-macro-rx" type="image"></block></block>
  <block id="52feb691d73302501483cced28704021" category="inline-link">Anúncio de alta disponibilidade para o BeeGFS com suporte da NetApp</block>
  <block id="0bd36571bea371893d99d201b7835845" category="paragraph">Para obter mais informações,<block ref="eb50143d83b72cd897fd47297781957c" category="inline-link-rx"></block>consulte .</block>
  <block id="006d93ef4f9eec646f24191298096ff5" category="section-title">Nós verificados</block>
  <block id="fbe2ee36e5e515b0ea11d513d4edd60d" category="paragraph">A solução BeeGFS on NetApp verificou os nós listados abaixo.</block>
  <block id="6c3a6944a808a7c0bbb6788dbec54a9f" category="cell">Nó</block>
  <block id="3c02a379965ab0dfcd77b1c484450433" category="cell">Hardware</block>
  <block id="e1e4c8c9ccd9fc39c391da4bcd093fb2" category="cell">Bloco</block>
  <block id="11eae0b95e61cd22a675ac3a648e9f79" category="cell">Sistema de storage NetApp EF600</block>
  <block id="318d8d02c042e4aa8cd7ae129f0a339b" category="cell">Um storage array totalmente NVMe 2U de alta performance desenvolvido para workloads exigentes.</block>
  <block id="0b27918290ff5323bea1e3b78a9cf04e" category="cell">Ficheiro</block>
  <block id="8c9b1d5381233aa78ea770058e6742e6" category="cell">Servidor Lenovo ThinkSystem SR665 V3</block>
  <block id="18bc6212071e7cb1cca90788a40a9301" category="inline-link">Website da Lenovo</block>
  <block id="2a3586b2a3c3de10623ad3288a90f6dd" category="cell">Um servidor 2U de dois soquetes com PCIe 5,0, dois processadores AMD EPYC 9124. Para obter mais informações sobre o Lenovo SR665 V3,<block ref="7f25034611c942664d16f6d0ddb47fad" category="inline-link-rx"></block> consulte .</block>
  <block id="ae1c04d15a9494b2729aa9280c0120fa" category="cell">Servidor Lenovo ThinkSystem SR665</block>
  <block id="d1c6fb9a2f602020b776764cc928e4c4" category="cell">Um servidor 2U de dois soquetes com PCIe 4,0, dois processadores AMD EPYC 7003. Para obter mais informações sobre o Lenovo SR665,<block ref="65dfa08d35b276d60d397ded9080ccd5" category="inline-link-rx"></block> consulte .</block>
  <block id="4b2aed7f56892904807d2a0dba262f91" category="section-title">Design de hardware verificado</block>
  <block id="62ecfeab471e0776b331e56e58d79d41" category="paragraph">Os componentes básicos da solução (mostrados na figura a seguir) usam os servidores de nós de arquivo verificados para a camada de arquivo BeeGFS e dois sistemas de storage EF600 como a camada de bloco.</block>
  <block id="fdd0fa6524b4c92bc95af5176461013e" category="inline-image-macro">Componente básico</block>
  <block id="2282ea06676d9a4cf9ddadaa654d14b1" category="paragraph"><block ref="2282ea06676d9a4cf9ddadaa654d14b1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f220d8966f97bec043102cd415b93605" category="paragraph">A solução BeeGFS on NetApp é executada em todos os componentes básicos da implantação. O primeiro componente básico implantado deve executar os serviços de gerenciamento, metadados e storage do BeeGFS (conhecido como componente básico). Todos os componentes básicos subsequentes podem ser configurados por meio de software para estender metadados e serviços de storage ou para fornecer exclusivamente serviços de storage. Essa abordagem modular permite dimensionar o sistema de arquivos de acordo com as necessidades de um workload e, ao mesmo tempo, usar as mesmas plataformas de hardware subjacentes e o design de componentes básicos.</block>
  <block id="2cad05d70c2bc093824c9105ad50dc45" category="paragraph">Até cinco componentes básicos podem ser implantados para formar um cluster Linux HA autônomo. Isso otimiza o gerenciamento de recursos com a Pacemaker e mantém sincronização eficiente com o Corosync. Um ou mais clusters autônomos do BeeGFS HA são combinados para criar um sistema de arquivos BeeGFS acessível aos clientes como um namespace de storage único. No lado do hardware, um único rack de 42U U pode acomodar até cinco componentes básicos, juntamente com dois switches InfiniBand de 1U GB para a rede de dados/storage. Veja o gráfico abaixo para uma representação visual.</block>
  <block id="a4186acf84c4a49d9d83b2b83544a1c8" category="admonition">É necessário um mínimo de dois componentes básicos para estabelecer quorum no cluster de failover. Um cluster de dois nós tem limitações que podem impedir que ocorra um failover bem-sucedido. Você pode configurar um cluster de dois nós incorporando um terceiro dispositivo como um tiebreaker. No entanto, esta documentação não descreve esse design.</block>
  <block id="5523e74e8cf94c323e9b7dc4c2bb722b" category="inline-image-macro">Dimensionamento do cluster BeeGFS HA</block>
  <block id="d52adc3743c104eeb589c42277ff0c59" category="paragraph"><block ref="d52adc3743c104eeb589c42277ff0c59" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d51d5ee15f404c2f4f7863bebcde1fac" category="section-title">Ansible</block>
  <block id="6ec27f578410cadd1a5e4b274d75cdb2" category="inline-link">NetApp's e-Series GitHub</block>
  <block id="d643841fe27d769d39ef1865b69cb48b" category="paragraph">O BeeGFS no NetApp é fornecido e implantado usando a automação do Ansible, hospedada no GitHub e no Ansible Galaxy (a coleção BeeGFS está disponível na<block ref="6e6b4aec10f34b8873e2101fed073d9a" category="inline-link-rx"></block> e<block ref="6e9ef2e0fff4844f9560394ab05a51e9" category="inline-link-rx"></block>). Embora o Ansible seja testado principalmente com o hardware usado para montar os componentes básicos do BeeGFS, é possível configurá-lo para ser executado em praticamente qualquer servidor baseado em x86 usando uma distribuição Linux compatível.</block>
  <block id="dcd417571f5073f074067e7d0d445a2e" category="inline-link">Implantando o BeeGFS com o storage e-Series</block>
  <block id="cb8de1e2639bc0378b3714cf6ba35837" category="paragraph">Para obter mais informações,<block ref="8af04fa161ecb5f3ec4feab8d52e96c8" category="inline-link-rx"></block>consulte .</block>
  <block id="d1da0cd6852302b521f35aeee065f5ea" category="summary">Siga as diretrizes de práticas recomendadas ao implantar a solução BeeGFS no NetApp.</block>
  <block id="38b622e4d5c9d918330c81663f61a4e3" category="doc">Reveja as práticas recomendadas</block>
  <block id="d780de93793370946b2449b88a29b5ea" category="section-title">Convenções padrão</block>
  <block id="2903652ee31835883feeb469228b4406" category="inline-link-macro">Crie o inventário do Ansible</block>
  <block id="3a9aabbbb8c331319a41788bf5d1786a" category="paragraph">Ao montar e criar fisicamente o arquivo de inventário do Ansible, siga estas convenções padrão (para obter mais informações, <block ref="dbbcb9482f49ee969cddb7f10864cbd0" category="inline-link-macro-rx"></block>consulte ).</block>
  <block id="b4d19c971bd6ad93985147c0ce9477c8" category="list-text">Os nomes de host de nó de arquivo são numerados sequencialmente (H01-HN) com números menores na parte superior do rack e números mais altos na parte inferior.</block>
  <block id="7531d1760bee1e64b20f1f8975ccfc87" category="paragraph">Por exemplo, a convenção de nomenclatura<block ref="6171c77957e7dd932771522d0f5313aa" prefix=" " category="inline-code"></block> é semelhante a:<block ref="201b23a54c1ff68053f15f81feb28cbb" prefix=" " category="inline-code"></block>.</block>
  <block id="7bf4bcec78c083e165c31432234ebef8" category="list-text">Cada nó de bloco é composto por duas controladoras de storage, cada uma com seu próprio nome de host.</block>
  <block id="1d6d5c920cb7d130fd45d8ced35ebec2" category="paragraph">O nome de um storage array é usado para referir-se a todo o sistema de storage de bloco como parte de um inventário do Ansible. Os nomes dos storage arrays devem ser numerados sequencialmente (A01 - an), e os nomes dos hosts para controladores individuais são derivados dessa convenção de nomenclatura.</block>
  <block id="db94a118f0347e2dbe0ef8f3c0674d1f" category="paragraph">Por exemplo, um nó de bloco chamado<block ref="ca9fd584227ff345bca2ef90d5c56e63" prefix=" " category="inline-code"></block> normalmente pode ter nomes de host configurados para cada controlador, como<block ref="86ee3de8557579a76634023aa5ccc100" prefix=" " category="inline-code"></block> e<block ref="32665fb108839c23a5db4a463e74176e" prefix=" " category="inline-code"></block>, mas ser referido em um inventário do Ansible como<block ref="3d1a3866e5aadfdac8b0e07e6740b0fe" prefix=" " category="inline-code"></block>.</block>
  <block id="a902add826ee667d7f067acb8b49432f" category="list-text">Nós de arquivo e bloco dentro do mesmo bloco de construção compartilham o mesmo esquema de numeração e são adjacentes um ao outro no rack com ambos os nós de arquivo na parte superior e ambos os nós de bloco diretamente abaixo deles.</block>
  <block id="2761f73c104511b8aaeef2eb6c84f3d3" category="paragraph">Por exemplo, no primeiro componente básico, os nós de arquivo H01 e H02 são conetados diretamente aos nós de bloco A01 e A02. De cima para baixo, os nomes de host são H01, H02, A01 e A02.</block>
  <block id="33324ee77729f51ada2c5446c9c21488" category="list-text">Os blocos de construção são instalados em ordem sequencial com base nos nomes de host, de modo que os nomes de host de número inferior estejam na parte superior do rack e os nomes de host de número superior estejam na parte inferior.</block>
  <block id="afdf73d1fa37280d63c602fa6be27740" category="paragraph">O objetivo é minimizar o comprimento do cabo que corre até a parte superior dos switches de rack e definir uma prática de implantação padrão para simplificar a solução de problemas. Para datacenters onde isso não é permitido devido a preocupações em torno da estabilidade do rack, o inverso é certamente permitido, preenchendo o rack de baixo para cima.</block>
  <block id="b4c0fb3649e4f85d78611d90d2d2d308" category="section-title">Configuração de rede de storage InfiniBand</block>
  <block id="815b2630d684df2f4894bd753d3a1fcb" category="paragraph">Metade das portas InfiniBand em cada nó de arquivo é usada para se conectar diretamente aos nós de bloco. A outra metade está conetada aos switches InfiniBand e é usada para a conetividade cliente-servidor BeeGFS. Ao determinar o tamanho das sub-redes IPoIB usadas para clientes e servidores BeeGFS, você deve considerar o crescimento esperado do cluster de computação/GPU e do sistema de arquivos BeeGFS. Se você tiver que se desviar dos intervalos de IP recomendados, lembre-se de que cada conexão direta em um único bloco de construção tem uma sub-rede exclusiva e não há sobreposição com sub-redes usadas para conetividade cliente-servidor.</block>
  <block id="a4f2d907e6fd183bbbc4d275c08b7a9a" category="section-title">Ligações diretas</block>
  <block id="07a0544547e3cceec6f669bd25c6a605" category="paragraph">Os nós de arquivo e bloco em cada bloco de construção sempre usam os IPs na tabela a seguir para suas conexões diretas.</block>
  <block id="d9938c4beed355ac7387d03d8f191c9e" category="admonition">Este esquema de endereçamento segue a seguinte regra: O terceiro octeto é sempre ímpar ou par, o que depende se o nó do arquivo é ímpar ou par.</block>
  <block id="0d01a155a448abaa8ab4b0bdd3ea5e54" category="cell">IP virtual</block>
  <block id="e9813c434db44aa063e37598de3ed515" category="cell">Bola de Futsal (H1)</block>
  <block id="9d928738606162dca1d244ffcbdf0036" category="cell">i1a</block>
  <block id="8f337c973339dd7093883bd28ddb6588" category="cell">192.168.1.10</block>
  <block id="495cb471115cc2dbd5c60736f989aa8c" category="cell">Bola de Futsal (C1)</block>
  <block id="e36314e624d2b2ca257e1f1ecb381f93" category="cell">2a</block>
  <block id="d984a05fa268b7cc6ac052a38960aeb2" category="cell">192.168.1.100</block>
  <block id="80f8cac1e092ca14301921951cf77f91" category="cell">192.168.1.101</block>
  <block id="c7a617044afee64ec7d511879e8b194c" category="cell">i2a</block>
  <block id="d731a116ccfe40ce4a5adb1bf565d785" category="cell">192.168.3.10</block>
  <block id="a9aeb028763672267b98adb1e61f06ca" category="cell">192.168.3.100</block>
  <block id="868e778e153cfafee02c89678e31e3e4" category="cell">192.168.3.101</block>
  <block id="b723decd732b31d828ae939f8f8c81fb" category="cell">i3a</block>
  <block id="28013a9391888f81944ead3ec1401cb0" category="cell">192.168.5.10</block>
  <block id="cfb1a9d899157fd3919c08dceff7fe61" category="cell">Kit de meia (C2)</block>
  <block id="8945c747c6a4da714083579891b2495a" category="cell">192.168.5.100</block>
  <block id="538f8a364ff4308c16dbf7a80a554b5f" category="cell">192.168.5.101</block>
  <block id="d4d9efce9a26c8551723c677f65e1284" category="cell">i4a</block>
  <block id="7e7269d72492d715bbd00efdcdec7e0a" category="cell">192.168.7.10</block>
  <block id="1fbf861a0f4d9494682cfff33756b7aa" category="cell">192.168.7.100</block>
  <block id="7a1a4e2ee2757f302d47c7e3cdc8fcc3" category="cell">192.168.7.101</block>
  <block id="1442135832b351ed9b2f3b91f2393ec7" category="cell">Kit de meia (H2)</block>
  <block id="0522334c503ae8e87d77104f7b27ba17" category="cell">192.168.2.10</block>
  <block id="f8bc2fbe2c937ea5b5e8839cbea69491" category="cell">2b</block>
  <block id="28de33b5199547c2f026595b7175a940" category="cell">192.168.2.100</block>
  <block id="d006845bf7fd39e054131ca6f76c2c47" category="cell">192.168.2.101</block>
  <block id="3a1cc00317003b20386d92ca13328e3d" category="cell">192.168.4.10</block>
  <block id="ccce62893693ca1e63992fa77159dce3" category="cell">192.168.4.100</block>
  <block id="eab39d2ba2b7a903ccf8cef112e1d506" category="cell">192.168.4.101</block>
  <block id="02def76181eddeab3ec0492be002417d" category="cell">192.168.6.10</block>
  <block id="d4b42e0f0d80e9c910e062f49b48b5f5" category="cell">192.168.6.100</block>
  <block id="f23edf799227dfd20d80544836aad8e9" category="cell">192.168.6.101</block>
  <block id="5e0ca78bea1b6ed4af93b1b1c5d7c573" category="cell">192.168.8.10</block>
  <block id="3581177979a7b934a2accd3f5f999444" category="cell">192.168.8.100</block>
  <block id="49213c8f0e8758438d7a69e2789a8b7d" category="cell">192.168.8.101</block>
  <block id="a0e2a91b693d9eb92fb3153f61dfe4fa" category="section-title">Esquemas de endereçamento IPoIB cliente-servidor BeeGFS</block>
  <block id="5e98efce8292b94590f3ca502c1d8697" category="paragraph">Cada nó de arquivo executa vários serviços de servidor do BeeGFS (gerenciamento, metadados ou storage). Para permitir que cada serviço faça failover independentemente para o outro nó de arquivo, cada um é configurado com endereços IP exclusivos que podem flutuar entre ambos os nós (às vezes chamado de interface lógica ou LIF).</block>
  <block id="4db8c0036deb36a38e4df4660af9ed06" category="paragraph">Embora não seja obrigatório, essa implantação presume que os seguintes intervalos de sub-rede IPoIB estão em uso para essas conexões e define um esquema de endereçamento padrão que aplica as seguintes regras:</block>
  <block id="8d41eefa8441a4ca177fe0f2676a9512" category="list-text">O segundo octeto é sempre ímpar ou par, com base se a porta InfiniBand do nó de arquivo é ímpar ou par.</block>
  <block id="6482f8ef9c5ff1d8a971601fcad837d6" category="list-text">Os IPs de cluster do BeeGFS são sempre<block ref="4e125a0674be9f13c20781458a4b0f90" prefix=" " category="inline-code"></block> ou<block ref="282f5359a5438e5159fd6bcdbe731731" prefix=" " category="inline-code"></block>.</block>
  <block id="3aed58e1cc4af0e5cda8b7e10e2fd863" category="admonition">Além da interface usada para o gerenciamento de SO na banda, interfaces adicionais podem ser usadas pelo Corosync para batimento cardíaco de cluster e sincronização. Isso garante que a perda de uma única interface não derrube todo o cluster.</block>
  <block id="d95a2f19c705379e32f8030de274d07e" category="list-text">O serviço BeeGFS Management está sempre em<block ref="770ab4aed0623ab2da7c6d93d36e1626" prefix=" " category="inline-code"></block> ou<block ref="89232954d2214028ecaa11033c8e7a25" prefix=" " category="inline-code"></block>.</block>
  <block id="29cd1587ba2833db9af29eac16f0d72b" category="list-text">Os serviços de metadados BeeGFS estão sempre em<block ref="8e899642f9ef8d71ee877d1780467578" prefix=" " category="inline-code"></block> ou<block ref="57a55b99bfac8ec35796e4ae40f5540c" prefix=" " category="inline-code"></block>.</block>
  <block id="7f5258ce731ddb14570317599b9962d9" category="list-text">Os serviços do BeeGFS Storage estão sempre na<block ref="7bda92dd6fa15b04835e990fcef5c6f7" prefix=" " category="inline-code"></block> ou<block ref="0dc2ee6e17afcd7bafe09a4e99667f35" prefix=" " category="inline-code"></block>.</block>
  <block id="be092b10130fe0c97dd9358f0c131935" category="list-text">Os endereços no<block ref="202a0146090f5e2d4eabc0b9ffeab50c" prefix=" " category="inline-code"></block> intervalo até<block ref="d0757c31b357693695458d7f69f1db7d" prefix=" " category="inline-code"></block> são reservados para os clientes.</block>
  <block id="888c436af0d0f519ac3018d0df7868cd" category="section-title">Esquema de endereçamento de sub-rede única IPoIB</block>
  <block id="c9923a234c7bd25e331582479a38a503" category="inline-link-macro">arquitetura de software</block>
  <block id="9159781ab55be88f1f26fb2b8e4e7420" category="paragraph">Este guia de implantação utilizará um único esquema de sub-rede, dadas as vantagens listadas <block ref="2504f4d58c8f68628557b72cf70af5b4" category="inline-link-macro-rx"></block>no .</block>
  <block id="8474461676c84fa210da74bbd55e916d" category="paragraph-title">Sub-rede: 100.127.0.0/16</block>
  <block id="e7e7c18d006d81c97d299954457c88f1" category="paragraph">A tabela a seguir fornece o intervalo para uma única sub-rede: 100.127.0.0/16.</block>
  <block id="32e90ecbd165097494e967a23490ee41" category="cell">IP do cluster do BeeGFS</block>
  <block id="039d7982c08566a6ae03eaa24cb6c670" category="cell">i1b ou i4b</block>
  <block id="fcb936b16dcf3c23dec73fa21c9c16f1" category="cell">100.127.100.1 - 100.127.100.255</block>
  <block id="16bfa5161249dae15f8c441a34126387" category="cell">i1b</block>
  <block id="ca46d9d01d96136b3bd1dea0bce8b99f" category="cell">100.127.101.0</block>
  <block id="50641838fba9970d18ab721f2d775331" category="cell">i2b</block>
  <block id="56fd2b46f686fb44565e25ca28a93fc0" category="cell">100.127.102.0</block>
  <block id="2aaea2be17c5c489bc5ec00da30f01e0" category="cell">i1b ou i3b</block>
  <block id="5474dd17966e980dee3133c4fdddcf29" category="cell">100.127.101.1 - 100.127.101.255</block>
  <block id="6bbae520cb1416f9508d58010c4df4a0" category="cell">i2b ou i4b</block>
  <block id="437dac4e62a043183f68652e142fc4a3" category="cell">100.127.102.1 - 100.127.102.255</block>
  <block id="43c64dcbdc9c36edb0a78b932e87b96c" category="cell">100.127.103.1 - 100.127.103.255</block>
  <block id="031082c8b0090f55cf416fb5aa46e723" category="cell">100.127.104.1 - 100.127.104.255</block>
  <block id="12ad67de237d3ee3ee2ca3ed39a93826" category="cell">(varia de acordo com o cliente)</block>
  <block id="88bd43ac89ad7875c3db7323b9879d13" category="cell">100.127.1.1 - 100.127.99.255</block>
  <block id="2cc4767a51c5d45fecfa3be2bb68037c" category="section-title">Esquema de endereçamento de sub-rede IPoIB dois</block>
  <block id="e1c71427409ff54c1742cb28f621dcd5" category="paragraph">Um esquema de endereçamento de duas sub-redes não é mais recomendado, mas ainda pode ser implementado. Consulte as tabelas abaixo para obter um esquema recomendado de duas sub-redes.</block>
  <block id="aa00436c66c8456a1c9ef0a12178a4ab" category="paragraph-title">Sub-rede A: 100.127.0.0/16</block>
  <block id="3ac8c958d4c77187295fd53646229e9e" category="paragraph">A tabela a seguir fornece o intervalo para a sub-rede A: 100.127.0.0/16.</block>
  <block id="079e5887eeb92f6f17c9fa25fd464e2a" category="paragraph-title">Sub-rede B: 100.128.0.0/16</block>
  <block id="00ee8ecc0f95892eb58786ee6e94e4e7" category="paragraph">A tabela a seguir fornece o intervalo para a sub-rede B: 100.128.0.0/16.</block>
  <block id="42e7db8b69b0d0451fe5e7e94d271956" category="cell">i4b</block>
  <block id="672e53647fb3fbb550b46ac1eaaad363" category="cell">100.128.100.1 - 100.128.100.255</block>
  <block id="6240652cf0cb3a0056e31569edba6f3e" category="cell">100.128.102.0</block>
  <block id="3ac8689fd677355ec3c1098b78d717dd" category="cell">100.128.102.1 - 100.128.102.255</block>
  <block id="61b0ff8b431abb2cad4481cab938c338" category="cell">100.128.104.1 - 100.128.104.255</block>
  <block id="83dc7e1fb9aa3660d2fc0ccb6e72bd1a" category="cell">100.128.1.1 - 100.128.99.255</block>
  <block id="cd42d4848d52f3ad668601f29b839282" category="admonition">Nem todos os IPs nos intervalos acima são usados nesta arquitetura verificada do NetApp. Eles demonstram como os endereços IP podem ser pré-alocados para permitir uma fácil expansão do sistema de arquivos usando um esquema de endereçamento IP consistente. Nesse esquema, os nós de arquivo BeeGFS e as IDs de serviço correspondem ao quarto octeto de um intervalo bem conhecido de IPs. O sistema de arquivos certamente pode ser dimensionado além de 255 nós ou serviços, se necessário.</block>
  <block id="5b361b4897c4847c08b3d13bf3b66b8d" category="summary">Instale e configure o cliente BeeGFS em todos os hosts que precisam de acesso ao sistema de arquivos BeeGFS, como nós de computação ou GPU. Para essa tarefa, use o Ansible e a coleção BeeGFS.</block>
  <block id="096a6674c1f4ef681d88a6eb229299b7" category="doc">Configurar clientes BeeGFS</block>
  <block id="c855016387ccd14e80b0628a2da5609b" category="paragraph">Você precisa instalar e configurar o cliente BeeGFS em todos os hosts que precisam ter acesso ao sistema de arquivos BeeGFS, como nós de computação ou GPU. Para essa tarefa, use o Ansible e a coleção BeeGFS.</block>
  <block id="c9793ac6c6a163b585094181979efe25" category="paragraph"><block ref="e7e2ad4e663e4c4c31c38a9fc078873a" prefix="" category="inline-code"></block></block>
  <block id="05c8acf59a637c421ef21a4a37d674de" category="list-text">Em<block ref="4d729f58293c8a48f1f8d918cdd1d28f" prefix=" " category="inline-code"></block>, crie um arquivo para cada cliente BeeGFS nomeado<block ref="a0253f5b8f5dd7be8b02cda13da40729" prefix=" " category="inline-code"></block> com o seguinte conteúdo, preenchendo o texto do espaço reservado com as informações corretas para o seu ambiente:</block>
  <block id="29ebd98b5bc8daaac03bfdeefabf090e" category="admonition">Se estiver implantando com um esquema de endereçamento de duas sub-redes, duas interfaces InfiniBand devem ser configuradas em cada cliente, uma em cada uma das duas sub-redes IPoIB de storage. Se estiver usando as sub-redes de exemplo e os intervalos recomendados para cada serviço BeeGFS listado aqui, os clientes devem ter uma interface configurada no intervalo de<block ref="0c41ff65aa6ae425a8c58863fcb3cef5" prefix=" " category="inline-code"></block> a<block ref="b4e6b2ab9469bd0c90a8b83c8ebc175f" prefix=" " category="inline-code"></block> e a outra em<block ref="ee8ceb74abe0adf268a6f4a36c7735d9" prefix=" " category="inline-code"></block> para<block ref="4a52c6bf091e6a4cd2fd08fa070352e3" prefix=" " category="inline-code"></block>.</block>
  <block id="ca6b4577e851d5587e19a3d017db68b1" category="list-text">Crie um novo<block ref="c28f9364916e661fea858844d2b96b81" prefix=" " category="inline-code"></block> arquivo e preencha os seguintes parâmetros na parte superior:</block>
  <block id="d424a4948912165baf5c9641ad4de044" category="admonition">Não armazene senhas em texto simples. Em vez disso, use o Ansible Vault (consulte a documentação do Ansible para<block ref="69d38d4b5deda302461f6461c5317006" category="inline-link-rx"></block>) ou use a<block ref="13d87b4892426ec19bdc58a4643d3104" prefix=" " category="inline-code"></block> opção ao executar o manual de estratégia.</block>
  <block id="8f27eda73b5d4e7594b05bed1b90a053" category="list-text">No<block ref="c28f9364916e661fea858844d2b96b81" prefix=" " category="inline-code"></block> arquivo, liste todos os hosts que devem ser configurados como clientes BeeGFS no<block ref="fc2e11772a55c48ed2b4ec7bc5d94664" prefix=" " category="inline-code"></block> grupo e especifique qualquer configuração adicional necessária para criar o módulo do kernel do cliente BeeGFS.</block>
  <block id="6dc47c91cdf35bbb7cac1fd9e1ff29d7" category="admonition">Ao usar os drivers NVIDIA OFED, certifique-se de que<block ref="f24d21b8b47b3902162911c8595514e9" prefix=" " category="inline-code"></block> aponta para o "caminho de inclusão de cabeçalho" correto para a instalação do Linux. Para obter mais informações, consulte a documentação do BeeGFS para<block ref="ad551773fffeead9219b565416da2397" category="inline-link-rx"></block>.</block>
  <block id="b9d3c4e1c18127cf36ad951b208d45bb" category="list-text">No<block ref="c28f9364916e661fea858844d2b96b81" prefix=" " category="inline-code"></block> arquivo, liste os sistemas de arquivos BeeGFS que você deseja montar na parte inferior de qualquer um definido anteriormente<block ref="b63119da730344b345cdc8f62a4711e9" prefix=" " category="inline-code"></block> .</block>
  <block id="0ebb92016a1cd310802bb6e22bcd491c" category="admonition"><block ref="27fab87a2a74c73ddb3d1d20ce980c77" prefix=" " category="inline-code"></block>O representa as definições que foram testadas. Veja a documentação incluída com<block ref="0a84ad3cea9815959f96e884069338f8" prefix=" " category="inline-code"></block> a função da coleção<block ref="84f7933b4ff9fefcfc60fd5fff4b3b54" prefix=" " category="inline-code"></block> para uma visão geral abrangente de todas as opções. Isso inclui detalhes sobre a montagem de vários sistemas de arquivos BeeGFS ou a montagem do mesmo sistema de arquivos BeeGFS várias vezes.</block>
  <block id="853c95fff114a0396695a5a34c4f78f1" category="list-text">Crie um novo<block ref="34bd6e27c43e6508a64d0a1bf093c7d2" prefix=" " category="inline-code"></block> arquivo e preencha os seguintes parâmetros:</block>
  <block id="8ae73b3fcef5fc8f1a73e62c987915e6" category="admonition">Omitir a importação da<block ref="c37a16fb00a6cc95fe94f5468dfded54" prefix=" " category="inline-code"></block> coleção e<block ref="0247feeacea55a1e5efb40b0947dbbbe" prefix=" " category="inline-code"></block> da função se você já tiver instalado os drivers IB/RDMA necessários e IPs configurados nas interfaces IPoIB apropriadas.</block>
  <block id="598ee1856218e19bf329d8bece215061" category="list-text">Para instalar e construir o cliente e montar o BeeGFS, execute o seguinte comando:</block>
  <block id="999070faf3729384137acf10348ed589" category="list-text">Antes de colocar o sistema de arquivos BeeGFS em produção, nós * fortemente * recomendamos que você faça login em qualquer cliente e execute<block ref="bf1d98441c05c8ee7dba10e241fa8122" prefix=" " category="inline-code"></block> para garantir que todos os nós estejam acessíveis e não haja problemas relatados.</block>
  <block id="a8bb1258f035db2e1b989badd7504202" category="summary">Para definir a configuração de nós de arquivo e bloco, crie um inventário do Ansible que represente o sistema de arquivos BeeGFS que você deseja implantar.</block>
  <block id="811a6b46c73b2ff846d806c69f166392" category="paragraph">Para definir a configuração de nós de arquivo e bloco, crie um inventário do Ansible que represente o sistema de arquivos BeeGFS que você deseja implantar. O inventário inclui hosts, grupos e variáveis descrevendo o sistema de arquivos BeeGFS desejado.</block>
  <block id="f710d81b04cfd57ef65bc4cca28bc3d4" category="section-title">Passo 1: Defina a configuração para todos os blocos de construção</block>
  <block id="08ecdaa3e32e095bd8f7ecec87a6ffe1" category="paragraph">Defina a configuração que se aplica a todos os blocos de construção, independentemente do perfil de configuração que você possa aplicar a eles individualmente.</block>
  <block id="135b308ed83c53f1516b7c754566d1c4" category="list-title">Antes de começar</block>
  <block id="ba9cd5a8827de277f30213c3a9f74d65" category="list-text">Escolha um esquema de endereçamento de sub-rede para sua implantação. Devido aos benefícios listados no <block ref="2504f4d58c8f68628557b72cf70af5b4" category="inline-link-macro-rx"></block>, recomenda-se usar um único esquema de endereçamento de sub-rede.</block>
  <block id="1633329793556e695f8ae53c7f3c8756" category="list-text">No nó de controle do Ansible, identifique um diretório que você deseja usar para armazenar os arquivos de estratégia e inventário do Ansible.</block>
  <block id="2af34d0fd4b17ecc42b7fb40d3a2019d" category="paragraph">Salvo indicação em contrário, todos os arquivos e diretórios criados nesta etapa e as etapas a seguir são criados em relação a este diretório.</block>
  <block id="31f13138a9fb78368dd1c5b8b9cb522e" category="list-text">Crie os seguintes subdiretórios:</block>
  <block id="f502c582ecc3459969f6ae37e60464d1" category="paragraph"><block ref="3342582e194d63e4c91b56623752c9c6" prefix="" category="inline-code"></block></block>
  <block id="f2151fe487fd8f761c16c5d92971a46f" category="paragraph"><block ref="96fa973cda8809ad84f646e3d8fbbc1c" prefix="" category="inline-code"></block></block>
  <block id="5fa06f80972ff05cf8eb18aa9af90bbd" category="paragraph"><block ref="2fc9e51174a78dd5bfc57e8e368590b3" prefix="" category="inline-code"></block></block>
  <block id="49266d47983011d7ceee48c764eaad20" category="section-title">Etapa 2: Defina a configuração para nós individuais de arquivo e bloco</block>
  <block id="bcbd88b78dd9388280471b20c50ef836" category="paragraph">Defina a configuração que se aplica a nós de arquivo individuais e nós de bloco de construção individuais.</block>
  <block id="4ace9bc4fa627e77f6406dd2f64e2028" category="list-text">Em<block ref="4d729f58293c8a48f1f8d918cdd1d28f" prefix=" " category="inline-code"></block>, crie um arquivo para cada nó de arquivo BeeGFS nomeado<block ref="a0253f5b8f5dd7be8b02cda13da40729" prefix=" " category="inline-code"></block> com o seguinte conteúdo, prestando especial atenção às notas sobre o conteúdo a serem preenchidas para IPs de cluster BeeGFS e nomes de host que terminam em números ímpares versus pares.</block>
  <block id="65742ecf20e6c51de487a8a5c4e5d085" category="paragraph">Inicialmente, os nomes da interface do nó de arquivo correspondem ao que está listado aqui (como ib0 ou ibs1f0). Esses nomes personalizados são configurados no <block ref="9c327e4b0e0a41a0187df973a6c1c1f1" category="inline-xref-macro-rx"></block>.</block>
  <block id="c1df6ea154e4f3c22584570de9017604" category="admonition">Se você já implantou o cluster BeeGFS, será necessário interromper o cluster antes de adicionar ou alterar endereços IP configurados estaticamente, incluindo IPs e IPs do cluster usados para NVMe/IB. Isso é necessário para que essas alterações entrem em vigor corretamente e não interrompam as operações do cluster.</block>
  <block id="64f6e7ce4bce20648e5b5817cc7c9d5d" category="list-text">Em<block ref="4d729f58293c8a48f1f8d918cdd1d28f" prefix=" " category="inline-code"></block>, crie um arquivo para cada nó de bloco BeeGFS nomeado<block ref="a0253f5b8f5dd7be8b02cda13da40729" prefix=" " category="inline-code"></block> e o preencha com o seguinte conteúdo.</block>
  <block id="350317d433df31d79bf0ded1b3748715" category="paragraph">Preste atenção especial às notas sobre o conteúdo a ser preenchido para nomes de storage arrays que terminam em números ímpares versus pares.</block>
  <block id="d9aa2babb29bda2ebcdcb05c255e1dd3" category="paragraph">Para cada nó de bloco, crie um arquivo e especifique o<block ref="966b4c423b24fddfa8c3a1a862b8ee19" prefix=" " category="inline-code"></block> para um dos dois controladores (geralmente A).</block>
  <block id="a79b02f70003beee254343e4cae10ad4" category="section-title">Etapa 3: Defina a configuração que deve ser aplicada a todos os nós de arquivo e bloco</block>
  <block id="7a7623c76e8a35ad9b47b72876017ffc" category="paragraph">Você pode definir a configuração comum a um grupo de hosts em em<block ref="96fa973cda8809ad84f646e3d8fbbc1c" prefix=" " category="inline-code"></block> um nome de arquivo que corresponde ao grupo. Isso impede a repetição de uma configuração compartilhada em vários locais.</block>
  <block id="bbe48fb854ea022537208eeeff822f91" category="paragraph-title">Sobre esta tarefa</block>
  <block id="b8250a298e8217ebff19d4f7c62cf654" category="inline-link">Usando variáveis</block>
  <block id="45c67f165a1990ff04bfa4ffd3ad1908" category="paragraph">Os hosts podem estar em mais de um grupo e, em tempo de execução, o Ansible escolhe quais variáveis se aplicam a um host específico com base em suas regras de precedência de variáveis. (Para obter mais informações sobre essas regras, consulte a documentação do Ansible para<block ref="e846c866a706aed07204d4b81c43f562" category="inline-link-rx"></block>.)</block>
  <block id="30670ef79ffcebf619cb84794bb9f467" category="paragraph">As atribuições de host para grupo são definidas no arquivo de inventário real do Ansible, que é criado no final deste procedimento.</block>
  <block id="48c7c41b72e1d678923ce3571aa65b2d" category="paragraph-title">Passo</block>
  <block id="13fe78da26730165534ca728d16729df" category="paragraph">No Ansible, qualquer configuração que você deseja aplicar a todos os hosts pode ser definida em um grupo<block ref="b1c94ca2fbc3e78fc30069c8d0f01680" prefix=" " category="inline-code"></block> chamado . Crie o arquivo<block ref="ee7b44b9b73d4c691251cbf5c8dff5c5" prefix=" " category="inline-code"></block> com o seguinte conteúdo:</block>
  <block id="970c2de774d4cba551050f0b96346cc6" category="section-title">Etapa 4: Defina a configuração que deve ser aplicada a todos os nós de arquivo</block>
  <block id="68decee7f537598fe42c449c7effd748" category="paragraph">A configuração compartilhada para nós de arquivo é definida em um grupo<block ref="2325c19457d6105d5d5f3837fa282ef7" prefix=" " category="inline-code"></block> chamado . As etapas nesta seção compilam a configuração que deve ser incluída no<block ref="4003590e6e5408f8e5272e50f909dfac" prefix=" " category="inline-code"></block> arquivo.</block>
  <block id="01eabbaba4e3200ffffeaf687ced4089" category="list-text">Na parte superior do arquivo, defina os padrões, incluindo a senha a ser usada como<block ref="d338b3f0f405eb5e51c8cc1e5ca66f02" prefix=" " category="inline-code"></block> usuário nos nós de arquivo.</block>
  <block id="3eeae040dcd4e8e08ba89cd729351414" category="list-text">Opcionalmente, configure um nome para o cluster de high-availability (HA) e especifique um utilizador para comunicação intra-cluster.</block>
  <block id="22bf408c8339ca14dab3745bbe56780d" category="paragraph">Se você estiver modificando o esquema de endereçamento IP privado, também deverá atualizar o padrão<block ref="58d2053fd85feeb270797993bb67b146" prefix=" " category="inline-code"></block>. Isso deve corresponder ao que você configurar mais tarde para o grupo de recursos do BeeGFS Management.</block>
  <block id="ba4d50db9221cc812d5f7981d4600c2d" category="paragraph">Especifique um ou mais e-mails que devem receber alertas para eventos de cluster usando<block ref="df1376df23c24a2b7d885d84f6116452" prefix=" " category="inline-code"></block>o .</block>
  <block id="7509dcf152f48abcba19fa72adedb808" category="inline-link">Configure o esgrima em um cluster Red Hat High Availability</block>
  <block id="c9e946c487cb8ab99c1f1b0c16839f91" category="list-text">Configurar um agente de vedação. (Para obter mais detalhes,<block ref="36285c27b4e0cfacce4f264137f7dfc3" category="inline-link-rx"></block> consulte .) A saída a seguir mostra exemplos para a configuração de agentes de vedação comuns. Escolha uma destas opções.</block>
  <block id="b2f365e9dc240069eb174f596f8086dd" category="paragraph">Para esta etapa, esteja ciente de que:</block>
  <block id="83a5cc26327b36012de2442c022e0357" category="list-text">Por padrão, o esgrima está habilitado, mas você precisa configurar um _agente_ de esgrima.</block>
  <block id="502142ce464e9e0c49b233594ce3af26" category="list-text">O<block ref="c8e769afa51da82b12702e693d24b7f2" prefix=" " category="inline-code"></block> especificado no<block ref="240a786d8c1f5b2c35c60c8ebccf7fe2" prefix=" " category="inline-code"></block> ou<block ref="50b0206acfcc765475b542e5725091ed" prefix=" " category="inline-code"></block> deve corresponder ao nome do host no inventário do Ansible.</block>
  <block id="08c76f94c7c5d2fb0509d39d58f7d298" category="list-text">A execução do cluster BeeGFS sem cercas não é suportada, especialmente na produção. Isso é em grande parte para garantir quando os serviços BeeGFS, incluindo quaisquer dependências de recursos, como dispositivos de bloco, fazem failover devido a um problema, não há risco de acesso simultâneo por vários nós que resultam em corrupção do sistema de arquivos ou outro comportamento indesejável ou inesperado. Se o esgrima tiver de ser desativado, consulte as notas gerais no guia de introdução da função BeeGFS HA e defina<block ref="7fe58896711b0c9790b9781e9deeeab8" prefix=" " category="inline-code"></block> como false no<block ref="3cd295e6aaa39e2510aff65b801cc5ab" prefix=" " category="inline-code"></block>.</block>
  <block id="8134b950ce435c1478c36f8d9e28640a" category="list-text">Há vários dispositivos de esgrima no nível do nó disponíveis e a função BeeGFS HA pode configurar qualquer agente de esgrima disponível no repositório de pacotes Red Hat HA. Quando possível, use um agente de vedação que funcione através da fonte de alimentação ininterrupta (UPS) ou da unidade de distribuição de energia em rack (rPDU), porque alguns agentes de vedação, como o controlador de gerenciamento de placa base (BMC) ou outros dispositivos de iluminação integrados no servidor, podem não responder à solicitação de vedação sob certos cenários de falha.</block>
  <block id="6793d5cb3a8bc008d05678615f821ca7" category="list-text">Ative o ajuste de desempenho recomendado no sistema operacional Linux.</block>
  <block id="951cd0f9ef758f90609564a78a7f36a2" category="paragraph">Embora muitos usuários encontrem as configurações padrão para os parâmetros de desempenho geralmente funcionem bem, você pode opcionalmente alterar as configurações padrão para uma determinada carga de trabalho. Como tal, essas recomendações são incluídas na função BeeGFS, mas não são habilitadas por padrão para garantir que os usuários estejam cientes do ajuste aplicado ao sistema de arquivos.</block>
  <block id="2e468d52e0778656623f6a98e831b3c0" category="paragraph">Para ativar o ajuste de desempenho, especifique:</block>
  <block id="5886796779dc029ac41ffca429f9f5d1" category="list-text">(Opcional) você pode ajustar os parâmetros de ajuste de desempenho no sistema operacional Linux conforme necessário.</block>
  <block id="fe7cbbcd6bbbe894cb7364e04d36c7ae" category="inline-link">Site do e-Series BeeGFS GitHub</block>
  <block id="90fd7614ddbcf02d5873d67a7e08983a" category="paragraph">Para obter uma lista abrangente dos parâmetros de ajuste disponíveis que você pode ajustar, consulte a seção padrões de ajuste de desempenho da função de HA BeeGFS em<block ref="88ca1124cd8a9bf4401c9daba82c5025" category="inline-link-rx"></block>. os valores padrão podem ser substituídos para todos os nós do cluster neste arquivo ou<block ref="3342582e194d63e4c91b56623752c9c6" prefix=" " category="inline-code"></block> para um nó individual.</block>
  <block id="75d34bd8c0a1081d52b926e7b1b60689" category="inline-link-macro">requisitos de nó de arquivo</block>
  <block id="3762dd806b1df772618c9caeb19d9d43" category="list-text">Para permitir a conetividade 200GBK/HDR completa entre nós de bloco e arquivo, use o pacote Open Subnet Manager (OpenSM) da NVIDIA Open Fabrics Enterprise Distribution (MLNX_OFED). A versão MLNX_OFED na lista <block ref="1dfb967627cb2f0e7f82d8713fd73b4c" category="inline-link-macro-rx"></block>vem junto com os pacotes OpenSM recomendados. Embora a implantação usando Ansible seja compatível, primeiro você precisa instalar o driver MLNX_OFED em todos os nós de arquivo.</block>
  <block id="372ec1e9d1761b6aa16b9f0b54a4433b" category="list-text">Preencha os seguintes parâmetros em<block ref="4003590e6e5408f8e5272e50f909dfac" prefix=" " category="inline-code"></block> (ajuste pacotes conforme necessário):</block>
  <block id="382cd5df5d20e8ee60bea9f8be1884e3" category="list-text">Configure a<block ref="ab775c875d5f89d991a670444dd32ad2" prefix=" " category="inline-code"></block> regra para garantir o mapeamento consistente de identificadores de porta InfiniBand lógicos para dispositivos PCIe subjacentes.</block>
  <block id="acb63a2b1a344472ec1b72c168bf5a95" category="paragraph">A<block ref="ab775c875d5f89d991a670444dd32ad2" prefix=" " category="inline-code"></block> regra deve ser exclusiva da topologia PCIe de cada plataforma de servidor usada como nó de arquivo BeeGFS.</block>
  <block id="8cec215dcbcd9866be7ad7f12652d9bd" category="paragraph">Use os seguintes valores para nós de arquivo verificados:</block>
  <block id="b535d5891e9112526732586cf8225d93" category="list-text">(Opcional) Atualize o algoritmo de seleção de destino de metadados.</block>
  <block id="e3c1663ae83b766d79e4b2be55767666" category="inline-link">Benchmarking de um sistema BeeGFS</block>
  <block id="8dff66e73ac10da6c457b7092c6f9005" category="admonition">No teste de verificação,<block ref="19230d21d2c58f7f5006b34c484cfa39" prefix=" " category="inline-code"></block> o era normalmente usado para garantir que os arquivos de teste fossem distribuídos uniformemente por todos os destinos de storage do BeeGFS durante o benchmark de desempenho (para obter mais informações sobre benchmarking, consulte o site BeeGFS para<block ref="831dbcfeece1d9e52170bb11173ba315" category="inline-link-rx"></block>). Com o uso do mundo real, isso pode fazer com que alvos com números mais baixos preencham mais rápido do que alvos com números mais altos. Omitir e<block ref="19230d21d2c58f7f5006b34c484cfa39" prefix=" " category="inline-code"></block> apenas usar o valor padrão<block ref="268331366c060107e4f79636e2fbd61c" prefix=" " category="inline-code"></block> foi mostrado para fornecer bom desempenho enquanto ainda utiliza todos os alvos disponíveis.</block>
  <block id="aad0b8e6a3552eebcdcf125f218d1954" category="section-title">Etapa 5: Defina a configuração para o nó de bloco comum</block>
  <block id="f9ed56c11a1443e285b3d786249fe6aa" category="paragraph">A configuração compartilhada para nós de bloco é definida em um grupo<block ref="0b41e1ef1f01592b0f6a7174f0010e75" prefix=" " category="inline-code"></block> chamado . As etapas nesta seção compilam a configuração que deve ser incluída no<block ref="7d0d040b7805a1015c58caea5b5d8c55" prefix=" " category="inline-code"></block> arquivo.</block>
  <block id="7d304d17d15c3332b9d8584fa30f070b" category="list-text">Defina a conexão Ansible como local, forneça a senha do sistema e especifique se os certificados SSL devem ser verificados. (Normalmente, o Ansible usa SSH para se conectar a hosts gerenciados. No entanto, no caso dos sistemas de storage do NetApp e-Series usados como nós de bloco, os módulos usam a API REST para comunicação.) Na parte superior do arquivo, adicione o seguinte:</block>
  <block id="de65efa2c0698ededf4229cafcca2d08" category="inline-link-macro">Requisitos técnicos</block>
  <block id="a18d6a60f542af2e3b0784928e17f417" category="list-text">Para garantir o desempenho ideal, instale as versões listadas para nós de bloco <block ref="786d34f336ab7f462feb4fe8776c8670" category="inline-link-macro-rx"></block>no .</block>
  <block id="8c41baf1ca98e1184f48c4721d44d431" category="inline-link">Site de suporte da NetApp</block>
  <block id="38119f4253b4080e689702afd647df1f" category="paragraph">Transfira os ficheiros correspondentes a partir do<block ref="3f80e15ba326a9eb1fc39b6d8ba81472" category="inline-link-rx"></block>. Você pode atualizá-los manualmente ou incluí-los<block ref="93501a11e921083efbd154e0cdff5f10" prefix=" " category="inline-code"></block> no diretório do nó de controle do Ansible e preencher os seguintes parâmetros<block ref="79d2514d0f856ef18e58ebf8b9716d05" prefix=" " category="inline-code"></block> para atualizar usando o Ansible:</block>
  <block id="c113a52851d26cf252ec05ac9628162e" category="list-text">Transfira e instale o firmware de unidade mais recente disponível para as unidades instaladas nos nós de bloco a partir do<block ref="df4241174f74102a38fc34a378114b68" category="inline-link-rx"></block>. Você pode atualizá-los manualmente ou incluí-los<block ref="93501a11e921083efbd154e0cdff5f10" prefix=" " category="inline-code"></block> no diretório do nó de controle do Ansible e preencher os seguintes parâmetros<block ref="79d2514d0f856ef18e58ebf8b9716d05" prefix=" " category="inline-code"></block> para atualizar usando o Ansible:</block>
  <block id="72423a5fa99fafb4c2dc7b7e7f7d7962" category="admonition">A configuração<block ref="0d324209e6894f6233152c2d23bab1a2" prefix=" " category="inline-code"></block> para<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block> acelerará a atualização, mas não deverá ser feita depois que o BeeGFS for implantado. Isso ocorre porque essa configuração requer a interrupção de todas as I/o para as unidades antes da atualização para evitar erros de aplicativo. Embora a execução de uma atualização de firmware de unidade online antes de configurar volumes ainda seja rápida, recomendamos que você sempre defina esse valor para<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block> evitar problemas mais tarde.</block>
  <block id="2b0551e04ffc3a713c07e9a9611b9897" category="list-text">Para otimizar o desempenho, faça as seguintes alterações na configuração global:</block>
  <block id="6b7cf272a4e3aeaf52c2d0ca991829e5" category="list-text">Para garantir o provisionamento e o comportamento ideais de volume, especifique os seguintes parâmetros:</block>
  <block id="b969df7be52ed192c298428e4fb0e696" category="admonition">O valor especificado para<block ref="37a0965694bd71a118b8d75bee76ea35" prefix=" " category="inline-code"></block> é específico para nós de bloco do NetApp EF600 e controla a ordem pela qual as unidades são atribuídas a novos grupos de volumes. Esse pedido garante que a e/S para cada grupo seja distribuída uniformemente pelos canais de unidade de back-end.</block>
  <block id="2260cb128d87141c6a0a2c06c043def7" category="summary">Depois de definir a estrutura geral de inventário do Ansible, defina a configuração para cada componente básico no sistema de arquivos BeeGFS.</block>
  <block id="c8f38adfaba8270e793616e0556571c7" category="doc">Definir o inventário do Ansible para os componentes básicos do BeeGFS</block>
  <block id="b8bb1668a8a0007267670827d99f76b5" category="paragraph">Essas instruções de implantação demonstram como implantar um sistema de arquivos que consiste em um componente básico, incluindo gerenciamento, metadados e serviços de storage, um segundo componente básico com metadados e serviços de storage e um terceiro componente básico apenas de storage.</block>
  <block id="bc4ca1def58917532e653ebf4c3c5f15" category="paragraph">Essas etapas destinam-se a mostrar toda a gama de perfis de configuração típicos que você pode usar para configurar os componentes básicos do NetApp BeeGFS para atender aos requisitos do sistema de arquivos BeeGFS geral.</block>
  <block id="053cdc4e7aa5884fba5be0b7e80bcb5c" category="admonition">Nesta e nas seções subsequentes, ajuste conforme necessário para criar o inventário que representa o sistema de arquivos BeeGFS que você deseja implantar. Em especial, use nomes de host do Ansible que representam cada bloco ou nó de arquivo e o esquema de endereçamento IP desejado para a rede de storage. Assim, ela pode ser dimensionada para o número de nós de arquivos BeeGFS e clientes.</block>
  <block id="e00187948ca315221e5e284a4312f83f" category="section-title">Etapa 1: Crie o arquivo de inventário do Ansible</block>
  <block id="cbdf4dddad7bf23198edcbf2c8721659" category="list-text">Crie um novo<block ref="d28e452e49fc926f32af1d87afcff3ce" prefix=" " category="inline-code"></block> arquivo e, em seguida, insira os seguintes parâmetros, substituindo os hosts em<block ref="0b41e1ef1f01592b0f6a7174f0010e75" prefix=" " category="inline-code"></block> conforme necessário para representar os nós de bloco em sua implantação. Os nomes devem corresponder ao nome utilizado para<block ref="6ebd598dbc59122afdf4763cac1ed550" prefix=" " category="inline-code"></block>.</block>
  <block id="742c9db30f264a7d33e72383a817b4f5" category="paragraph">Nas seções subsequentes, você criará grupos adicionais do Ansible<block ref="2325c19457d6105d5d5f3837fa282ef7" prefix=" " category="inline-code"></block> que representam os serviços BeeGFS que deseja executar no cluster.</block>
  <block id="066251bf9494493f76299f6f40a80df6" category="section-title">Etapa 2: Configurar o inventário para um componente básico de gerenciamento, metadados e armazenamento</block>
  <block id="5320d481bd8442fec42afcaded2a8d49" category="paragraph">O primeiro componente básico do cluster ou componente básico deve incluir o serviço de gerenciamento do BeeGFS, além de serviços de metadados e storage:</block>
  <block id="a54299a446e0a2e17f57383db8e31dc6" category="list-text">No<block ref="d28e452e49fc926f32af1d87afcff3ce" prefix=" " category="inline-code"></block>, preencha os seguintes parâmetros em<block ref="47488094171904d309860f2ab8f8eb63" prefix=" " category="inline-code"></block>:</block>
  <block id="fd84d0d4501e2eca409dc18043cf1492" category="list-text">Crie o arquivo<block ref="096c36ebf1ab8bf90e099d6808eb57d0" prefix=" " category="inline-code"></block> e inclua o seguinte:</block>
  <block id="bcc9cdaf60435f4d091a1bfdac879201" category="list-text">Em<block ref="14681f191ffa04a9b3cfd0d1d62d0b7c" prefix=" " category="inline-code"></block>, crie arquivos para grupos de recursos<block ref="9a2a6271435751311d49f29af321e54c" prefix=" " category="inline-code"></block><block ref="71fcdde6efe08cd30c14cff19fe12017" prefix=" " category="inline-code"></block> usando o modelo a seguir e preencha os valores de espaço reservado para cada serviço que faz referência à tabela abaixo:</block>
  <block id="3df790a0a0a3be54d9cbac91d4bc35e1" category="inline-link">Introdução ao array NetApp EF600</block>
  <block id="4ada98602970473e524def1d48723bd6" category="admonition">O tamanho do volume é especificado como uma porcentagem do conjunto de armazenamento geral (também conhecido como um grupo de volumes). A NetApp recomenda fortemente que você deixe alguma capacidade livre em cada pool para permitir espaço para provisionamento excessivo de SSD (para obter mais informações,<block ref="dfc1025f9a756c10e6b0cbe0f4bc500a" category="inline-link-rx"></block>consulte ). O pool de armazenamento,<block ref="7ef878b8d47cf2658a8b7e4c1b8f133d" prefix=" " category="inline-code"></block>, também aloca 1% da capacidade do pool para o serviço de gerenciamento. Assim, para volumes de metadados no pool de armazenamento,<block ref="7ef878b8d47cf2658a8b7e4c1b8f133d" prefix=" " category="inline-code"></block>, quando 1,92TB ou 3,84TB unidades forem usadas, defina esse valor como<block ref="6950471ad34ba84d94045961d34ad16b" prefix=" " category="inline-code"></block>; para unidades 7,65TB, defina esse valor como<block ref="6d61e9b2e679326dd5a7a5a155cce414" prefix=" " category="inline-code"></block>; e para unidades 15,3TB, defina esse valor como<block ref="c350ffebb2160c4726034bf20ba7520f" prefix=" " category="inline-code"></block>.</block>
  <block id="34082694d21dbdcfc31e6e32d9fb2b9f" category="cell">Nome do ficheiro</block>
  <block id="f4d0c8022be4f31d06814c33705037ff" category="cell">meta_01.yml</block>
  <block id="1f7aa6705d5b742085538c627f6f9c2b" category="cell">8015</block>
  <block id="a94e8f341d41dc36ead41bc0876ad6b6" category="cell">i1b:100.127.101.1/16 i2b:100.127.102.1/16</block>
  <block id="cfcd208495d565ef66e7dff9f98764da" category="cell">0</block>
  <block id="3d1a3866e5aadfdac8b0e07e6740b0fe" category="cell">netapp_01</block>
  <block id="7ef878b8d47cf2658a8b7e4c1b8f133d" category="cell">beegfs_m1_m2_m5_m6</block>
  <block id="7fc56270e7a70fa81a5935b72eacbe29" category="cell">A</block>
  <block id="60b1afbaab870bf5621ed87ae12559fe" category="cell">meta_02.yml</block>
  <block id="62d2b7ba91f34c0ac08aa11c359a8d2c" category="cell">8025</block>
  <block id="ceff1390fad555137a9e76549f5c5c35" category="cell">i2b:100.127.102.2/16 i1b:100.127.101.2/16</block>
  <block id="9d5ed678fe57bcca610140957afab571" category="cell">B</block>
  <block id="3ce592406a461bfadfa5ab1f08c5c506" category="cell">meta_03.yml</block>
  <block id="a2b8a85a29b2d64ad6f47275bf1360c6" category="cell">8035</block>
  <block id="4261093cdb58c46bcef081c2a8d50a22" category="cell">i3b:100.127.101.3/16 i4b:100.127.102.3/16</block>
  <block id="c4ca4238a0b923820dcc509a6f75849b" category="cell">1</block>
  <block id="ae9471dd5ddb2f7bbf73f8df6d11ea8d" category="cell">netapp_02</block>
  <block id="c229ea898f8c27aeb40c65332e30db3f" category="cell">beegfs_m3_m4_m7_m8</block>
  <block id="7f6482de225123824ca5b23c1cf79f05" category="cell">meta_04.yml</block>
  <block id="704cddc91e28d1a5517518b2f12bc321" category="cell">8045</block>
  <block id="6a4b726f26d557d3d41580df69e5f52c" category="cell">i4b:100.127.102.4/16 i3b:100.127.101.4/16</block>
  <block id="833a23c43dc9c206a593873d80d04903" category="cell">meta_05.yml</block>
  <block id="444b0d9a802792791bb9a2da568b463d" category="cell">8055</block>
  <block id="3468e3b520debc18497bb043da48a402" category="cell">i1b:100.127.101.5/16 i2b:100.127.102.5/16</block>
  <block id="38774c8cd9de3fd76c7df6b0746f2f2b" category="cell">meta_06.yml</block>
  <block id="320e4df890a1a620573db8170f39a093" category="cell">8065</block>
  <block id="661d119659a3196ad4ea3cd776db51f9" category="cell">i2b:100.127.102.6/16 i1b:100.127.101.6/16</block>
  <block id="5a681b3e1f7ad2d965284e36f4f6b7d3" category="cell">meta_07.yml</block>
  <block id="ede529dfcbb2907e9760eea0875cdd12" category="cell">8075</block>
  <block id="5e4915a0b5172fe24086c6612e459a18" category="cell">i3b:100.127.101.7/16 i4b:100.127.102.7/16</block>
  <block id="a9cc3f3ebc7a8daedf369af06faba518" category="cell">meta_08.yml</block>
  <block id="5011bf6d8a37692913fce3a15a51f070" category="cell">8085</block>
  <block id="d4255115c2508bc18adb598c6fb0b827" category="cell">i4b:100.127.102.8/16 i3b:100.127.101.8/16</block>
  <block id="89f0938aa83de82ca99f8b06297ed69c" category="list-text">Em<block ref="14681f191ffa04a9b3cfd0d1d62d0b7c" prefix=" " category="inline-code"></block>, crie arquivos para grupos de recursos<block ref="204798ade8b6ac861bd335e908dea445" prefix=" " category="inline-code"></block><block ref="febac7a5dad8d84a1faa80d56d8a70cb" prefix=" " category="inline-code"></block> usando o modelo a seguir e preencha os valores de espaço reservado para cada serviço que referencie o exemplo:</block>
  <block id="9b62ac6b206ab6cafe8dafa0990559c7" category="inline-link-macro">Porcentagens recomendadas de provisionamento de pool de storage</block>
  <block id="ab2ec57b0e9afdc73bcc69a962ee35c4" category="admonition">Para obter o tamanho correto a ser usado, <block ref="152d8bea233357f34ffa00ccf219bae3" category="inline-link-macro-rx"></block>consulte .</block>
  <block id="b627976db3394ccf24342632cef6f4f1" category="cell">stor_01.yml</block>
  <block id="40f4da34bbe180214c23b9e55da4f772" category="cell">8013</block>
  <block id="8d05d453ff97ca9e3418e1655244d8d5" category="cell">i1b:100.127.103.1/16 i2b:100.127.104.1/16</block>
  <block id="5ef33d06ff783e8453c10b95db8c1253" category="cell">beegfs_s1_s2</block>
  <block id="70963f6e36ca66556bef5f6ae74ad0ad" category="cell">stor_02.yml</block>
  <block id="1ecdec353419f6d7e30857d00d0312d1" category="cell">8023</block>
  <block id="f012b1a2bc162eecafcb880e45d300b3" category="cell">i2b:100.127.104.2/16 i1b:100.127.103.2/16</block>
  <block id="a4253b13d64a7017467d335c0c147ed3" category="cell">stor_03.yml</block>
  <block id="fc5b3186f1cf0daece964f78259b7ba0" category="cell">8033</block>
  <block id="92947a5a536c1c49f8a56988362e49f9" category="cell">i3b:100.127.103.3/16 i4b:100.127.104.3/16</block>
  <block id="a3cc9ef3e643fd2d2e1b6c2672b1c361" category="cell">beegfs_s3_s4</block>
  <block id="d471f1c4be4f658b822b7cfcfc808efa" category="cell">stor_04.yml</block>
  <block id="5bd529d5b07b647a8863cf71e98d651a" category="cell">8043</block>
  <block id="0b566e0d0703bad78bbac23313f53279" category="cell">i4b:100.127.104.4/16 i3b:100.127.103.4/16</block>
  <block id="6a0625f228a1c5802a3d0ca970c7ebac" category="cell">stor_05.yml</block>
  <block id="dfccdb8b1cc7e4dab6d33db0fef12b88" category="cell">8053</block>
  <block id="d424257a0c5e62d3b63dc54431955dbb" category="cell">i1b:100.127.103.5/16 i2b:100.127.104.5/16</block>
  <block id="2ac54a6d92aca96fef8d0eac5b813f34" category="cell">beegfs_s5_s6</block>
  <block id="09da1a861f10d113069c5e1da9d2decd" category="cell">stor_06.yml</block>
  <block id="8d1f1aac0dd8a76b49e8bbdda0c7c98c" category="cell">8063</block>
  <block id="261805237e27c4db09ed2709c5b4ee1d" category="cell">i2b:100.127.104.6/16 i1b:100.127.103.6/16</block>
  <block id="cf124e58023b3726106af9c8718a48ed" category="cell">stor_07.yml</block>
  <block id="ffa9b486ad206c638c657b7ed335635c" category="cell">8073</block>
  <block id="85dab52b55c7182f1c63b93086d2f9ba" category="cell">i3b:100.127.103.7/16 i4b:100.127.104.7/16</block>
  <block id="3e96e523215f928a3915e79e1451e2e7" category="cell">beegfs_s7_s8</block>
  <block id="0e4b036746af52a755e4b546698b2b61" category="cell">stor_08.yml</block>
  <block id="20ef119e812e178ecb44efa448b57ebc" category="cell">8083</block>
  <block id="4c348e39f74a16c489df29edbf00971e" category="cell">i4b:100.127.104.8/16 i3b:100.127.103.8/16</block>
  <block id="80e0c052ed9f2bde54c56adb04f880f1" category="section-title">Passo 3: Configure o inventário para um bloco de construção de metadados e armazenamento</block>
  <block id="9e701ac8f2dd669a0e51464b4d8e3331" category="paragraph">Estas etapas descrevem como configurar um inventário do Ansible para um componente básico de storage e metadados do BeeGFS.</block>
  <block id="ff1cbf3210fb9b21912445c6ea8cb9f6" category="list-text">No<block ref="d28e452e49fc926f32af1d87afcff3ce" prefix=" " category="inline-code"></block>, preencha os seguintes parâmetros sob a configuração existente:</block>
  <block id="628d1b90e1a21bbcec24af78377f8297" category="list-text">Em<block ref="14681f191ffa04a9b3cfd0d1d62d0b7c" prefix=" " category="inline-code"></block>, crie arquivos para grupos de recursos<block ref="f7f236466904f5e4828a0db580764b62" prefix=" " category="inline-code"></block><block ref="20581f314f77bcf174d5bf0da0f87668" prefix=" " category="inline-code"></block> usando o modelo a seguir e preencha os valores de espaço reservado para cada serviço que referencie o exemplo:</block>
  <block id="bc5e8003da73758b95c46194672943bb" category="admonition">Para obter o tamanho correto a ser usado, <block ref="152d8bea233357f34ffa00ccf219bae3" category="inline-link-macro-rx"></block>consulte .</block>
  <block id="9c6de3c786b8c9c409de2fd8070e5072" category="cell">meta_09.yml</block>
  <block id="aaaaf06756bef5b0c236a0c7e8a41d11" category="cell">i1b:100.127.101.9/16 i2b:100.127.102.9/16</block>
  <block id="017d565d10fb6b2886e9ca05b035e9a9" category="cell">netapp_03</block>
  <block id="2ea9f3181dbee99d651a0d6c53be4a36" category="cell">beegfs_m9_m10_m13_m14</block>
  <block id="f370a281056494e99bcade5ddef17b26" category="cell">meta_10.yml</block>
  <block id="39496d413f74d010a0d1b0c2e9ccce4e" category="cell">i2b:100.127.102.10/16 i1b:100.127.101.10/16</block>
  <block id="27f563eed2131061540c21a6239b43d8" category="cell">meta_11.yml</block>
  <block id="6a413ad3d1000df8b4efef19a8814dce" category="cell">i3b:100.127.101.11/16 i4b:100.127.102.11/16</block>
  <block id="c5c0f84cd4efb77f7e5e98b314d5b73f" category="cell">netapp_04</block>
  <block id="7c335ef1ce51db644c52518580d45d49" category="cell">beegfs_m11_m12_m15_m16</block>
  <block id="a2a3007e91ab84d40e9453997468f1ad" category="cell">meta_12.yml</block>
  <block id="e9be3165e6fc46ba149605e78b46fa81" category="cell">i4b:100.127.102.12/16 i3b:100.127.101.12/16</block>
  <block id="14c79c2a227a377885225e0f4dcf53b0" category="cell">meta_13.yml</block>
  <block id="f3f421c2e886c62a1aec7be061c685b2" category="cell">i1b:100.127.101.13/16 i2b:100.127.102.13/16</block>
  <block id="07e72a8a343c421129dc3a92902de565" category="cell">meta_14.yml</block>
  <block id="ed8c3ab02a44fc84902022ddcb5fabe8" category="cell">i2b:100.127.102.14/16 i1b:100.127.101.14/16</block>
  <block id="d4d36ef3d915a0d2eaac8c62f1d8eff6" category="cell">meta_15.yml</block>
  <block id="1920edec824c590f137b449a0443311a" category="cell">i3b:100.127.101.15/16 i4b:100.127.102.15/16</block>
  <block id="b465a4b4c591a6f2e44fedac80e726d0" category="cell">meta_16.yml</block>
  <block id="73a812d8e4ab9aeff521f90df25f5e23" category="cell">i4b:100.127.102.16/16 i3b:100.127.101.16/16</block>
  <block id="91e38d134a7ca4a23006b0cf023d9011" category="list-text">Em<block ref="648847925d2f67d0e9aff6f86a7141c1" prefix=" " category="inline-code"></block> criar arquivos para grupos de recursos<block ref="e82765740642d7caa6320c506be59565" prefix=" " category="inline-code"></block><block ref="26d2d73c912baae339181423e2a8cf85" prefix=" " category="inline-code"></block> usando o modelo a seguir e preencha os valores de espaço reservado para cada serviço que referencie o exemplo:</block>
  <block id="ca61951791cd6f4d50294a908b9eee76" category="admonition">Para obter o tamanho correto a ser usado, <block ref="152d8bea233357f34ffa00ccf219bae3" category="inline-link-macro-rx"></block>consulte ..</block>
  <block id="71c1385fcc844d118e8b2688b0cfd2d6" category="cell">stor_09.yml</block>
  <block id="d3ff883be9e23adf4e03697eb2b136f5" category="cell">i1b:100.127.103.9/16 i2b:100.127.104.9/16</block>
  <block id="9282f3f43896f146dcbcc2d03d530b59" category="cell">beegfs_s9_s10</block>
  <block id="8f72ae1bf7ca7b8218a4bf9e719f5e7d" category="cell">stor_10.yml</block>
  <block id="6db8aa9802df58c38910ed6abe1ba11e" category="cell">i2b:100.127.104.10/16 i1b:100.127.103.10/16</block>
  <block id="e5a3d4f42adb756f3b3c2e3ed045e4a8" category="cell">stor_11.yml</block>
  <block id="0e507490f78723195265893fc3dd4a5b" category="cell">i3b:100.127.103.11/16 i4b:100.127.104.11/16</block>
  <block id="6e4cec4b32bddd9c9a3574aacee223b6" category="cell">beegfs_s11_s12</block>
  <block id="05fd4833433a12b38d11d8045aebddff" category="cell">stor_12.yml</block>
  <block id="32ac4e07dd77b430c6297e3e8799efd2" category="cell">i4b:100.127.104.12/16 i3b:100.127.103.12/16</block>
  <block id="437037bccd34f3db0b238843b50fe65a" category="cell">stor_13.yml</block>
  <block id="f82dba07589e57dfcaf71442a7d0cd71" category="cell">i1b:100.127.103.13/16 i2b:100.127.104.13/16</block>
  <block id="7db433542754f496e2d707f51bf00c05" category="cell">beegfs_s13_s14</block>
  <block id="b3c4ed6c5b5c833713923f9e9bdfb9b9" category="cell">stor_14.yml</block>
  <block id="39c7f24708288668c898771cebf44864" category="cell">i2b:100.127.104.14/16 i1b:100.127.103.14/16</block>
  <block id="4871ef58b7b91db78d33bb4d95e4bf27" category="cell">stor_15.yml</block>
  <block id="28800e3773b860f61c7a9b36b316ed98" category="cell">i3b:100.127.103.15/16 i4b:100.127.104.15/16</block>
  <block id="b1a9c1cb2640dd5bc9fb4e80dda30200" category="cell">beegfs_s15_s16</block>
  <block id="b02a9cdb541eba39e680a1da9c6299c7" category="cell">stor_16.yml</block>
  <block id="ce02872e166a5cf80f50cd4385d0d192" category="cell">i4b:100.127.104.16/16 i3b:100.127.103.16/16</block>
  <block id="dea1f079dcd8c8280e07dcd96ea8c075" category="section-title">Etapa 4: Configure o inventário para um componente básico somente de armazenamento</block>
  <block id="711be1acedea341e1f5455f007cdb22b" category="paragraph">Estas etapas descrevem como configurar um inventário do Ansible para um componente básico somente de storage do BeeGFS. A principal diferença entre configurar a configuração de metadados e armazenamento versus um componente básico somente de armazenamento é a omissão de todos os grupos de recursos de metadados e a alteração de<block ref="4c7b810e50ba611dcdc51295c4338bf0" prefix=" " category="inline-code"></block> 10 para 12 para cada pool de armazenamento.</block>
  <block id="5b6fe069463b7f5581a1864de036e765" category="list-text">Em<block ref="14681f191ffa04a9b3cfd0d1d62d0b7c" prefix=" " category="inline-code"></block>, crie arquivos para grupos de recursos<block ref="24a4e7d8beea152fbef989b5391e857b" prefix=" " category="inline-code"></block><block ref="4df0910e4828ce9c7f4218f92cf86499" prefix=" " category="inline-code"></block> usando o modelo a seguir e preencha os valores de espaço reservado para cada serviço que referencie o exemplo:</block>
  <block id="80f4c22d8a78e5d96cdf5bef28444426" category="admonition">Para obter o tamanho correto a ser usado, <block ref="152d8bea233357f34ffa00ccf219bae3" category="inline-link-macro-rx"></block>consulte .</block>
  <block id="f9838993bed3d0e550ae346ed2e4355e" category="cell">stor_17.yml</block>
  <block id="e8ed9c2d9c49ed0524af7cf1d12ba639" category="cell">i1b:100.127.103.17/16 i2b:100.127.104.17/16</block>
  <block id="63e36b5f8b91c5859b9a169198da7feb" category="cell">netapp_05</block>
  <block id="8cf4aacf94a115dfc0190ee6782190d3" category="cell">beegfs_s17_s18</block>
  <block id="7876b49b042d07da9a565db780a9b186" category="cell">stor_18.yml</block>
  <block id="caf800dba53971258bebfcd9348ac486" category="cell">i2b:100.127.104.18/16 i1b:100.127.103.18/16</block>
  <block id="291847ab33dfc1d81beed13f4d7a0519" category="cell">stor_19.yml</block>
  <block id="7b25c9239b1b161705c2cb1b81a33c4a" category="cell">i3b:100.127.103.19/16 i4b:100.127.104.19/16</block>
  <block id="b9fc71cc5ff86544747cf2b210fbab78" category="cell">netapp_06</block>
  <block id="6a972920f626e0b0b8d505315beaf38b" category="cell">beegfs_s19_s20</block>
  <block id="943a4f354a2af18dac1fe2a6e14fe880" category="cell">stor_20.yml</block>
  <block id="41510e449bb0d73d0aa0a826b53e7866" category="cell">i4b:100.127.104.20/16 i3b:100.127.103.20/16</block>
  <block id="a5aadbbde2e0b66fc661a126f5a1ce1e" category="cell">stor_21.yml</block>
  <block id="0b2d0578110fe19b63e28d0502beb0c8" category="cell">i1b:100.127.103.21/16 i2b:100.127.104.21/16</block>
  <block id="9c82263beb960ece0e5b6ac0604bb4d9" category="cell">beegfs_s21_s22</block>
  <block id="4879e56fe4d161ba3e4df67f961c483a" category="cell">stor_22.yml</block>
  <block id="30b35cb26fde8fb49ebb562dd442913e" category="cell">i2b:100.127.104.22/16 i1b:100.127.103.22/16</block>
  <block id="316b3c9a6656c51b87a725bf1f678a52" category="cell">stor_23.yml</block>
  <block id="864d7d5e08731a767f391f837e7ef23e" category="cell">i3b:100.127.103.23/16 i4b:100.127.104.23/16</block>
  <block id="2404c81b13915ef9d59e0ac6328f4c10" category="cell">beegfs_s23_s24</block>
  <block id="47662afeeaa16771e7d516dd96ade0b7" category="cell">stor_24.yml</block>
  <block id="2c1d9121314a70e0d2a2ba89aec6fc0e" category="cell">i4b:100.127.104.24/16 i3b:100.127.103.24/16</block>
  <block id="7042a03d018b94aee36197baf79897b2" category="summary">Para maximizar o desempenho, recomendamos configurar as configurações do sistema no modelo de servidor que você usa como nós de arquivo.</block>
  <block id="bb2fcb1abe8d0829558e398d9acb4589" category="doc">Ajuste as configurações do sistema do nó de arquivo para obter desempenho</block>
  <block id="e95c3b26aabb0242b0a38d72568b125a" category="paragraph">Para maximizar o desempenho, recomendamos configurar as configurações do sistema no modelo de servidor que você usa como nós de arquivo.</block>
  <block id="291e90fb83bca326d06b5479d0ae7197" category="paragraph">As configurações do sistema variam dependendo do modelo de servidor que você usa como nó de arquivo. Este tópico descreve como configurar as definições do sistema para os nós de ficheiro de servidor Lenovo ThinkSystem SR665 validados.</block>
  <block id="cfa9d7ef51eae23751a0ea54765b99fd" category="section-title">Utilize a interface UEFI para ajustar as definições do sistema</block>
  <block id="7afe745e5e5ded0e0cf311f6ab05ce41" category="paragraph">O firmware do sistema do servidor Lenovo SR665 contém vários parâmetros de ajuste que podem ser definidos através da interface UEFI. Esses parâmetros de ajuste podem afetar todos os aspetos de como o servidor funciona e o desempenho do servidor.</block>
  <block id="01d5e77f89697d310442aa744d5c4068" category="paragraph">Em *Configuração UEFI &gt; Definições do sistema*, ajuste as seguintes definições do sistema:</block>
  <block id="6e2e169ab41f56781f3cd65629914fc6" category="section-title">Menu modo de funcionamento</block>
  <block id="f7adfd4c98207b1161c7b693c16fa9ea" category="cell">*Configuração do sistema*</block>
  <block id="a3fb412bb8de9718b8510aa99340221a" category="cell">*Mude para*</block>
  <block id="1c2631aa94b6d5e1cc826b0cb76a87ba" category="paragraph">Modo de funcionamento</block>
  <block id="90589c47f06eb971d548591f23c285af" category="paragraph">Personalizado</block>
  <block id="43e16592d1b7c57c68cdf68bcd7f2fbd" category="paragraph">CTDP</block>
  <block id="e1ba155a9f2e8c3be94020eef32a0301" category="paragraph">Manual</block>
  <block id="db0877bc3fbb4ce0ffd2f36fa5470581" category="paragraph">Manual do cTDP</block>
  <block id="9de6d14fff9806d4bcd1ef555be766cd" category="paragraph">350</block>
  <block id="43287f46609a4dc60f40223b99452814" category="paragraph">Limite de potência do pacote</block>
  <block id="8bec16a6c589939ad9d0a3c20f7dd8dc" category="paragraph">Modo de eficiência</block>
  <block id="bcfaccebf745acfd5e75351095a5394a" category="paragraph">Desativar</block>
  <block id="50a4d260500229aae705dffbef792499" category="paragraph">Controle Global-Cstate</block>
  <block id="bbb8600e28b07b4e7765ccb37c8ba72d" category="paragraph">estados SOC P</block>
  <block id="16a2e561c536a77cbfd10490ea398be6" category="paragraph">P0</block>
  <block id="f7d2d14860cfdee82e8cf9418c1ec624" category="paragraph">DF C-Estados</block>
  <block id="254542384d1213a7d51adea301584149" category="paragraph">P-State</block>
  <block id="9c1a39470ba5d6a8856c5e813e20ef6b" category="paragraph">Ativação da desativação da memória</block>
  <block id="3011761cbf6a8eb38a41f6b38210c119" category="paragraph">NUMA NODES por socket</block>
  <block id="4142a6b2c0ac3aaf643751457e9aad6a" category="paragraph">NPS1</block>
  <block id="cdceaf6498461c15ce1ae0800bf60c66" category="section-title">Menu dispositivos e portas de e/S.</block>
  <block id="fb31ba7c369028665e7e1a20bd645da6" category="paragraph">IOMMU</block>
  <block id="ada62bbe41ae187c3f0f777ffbd44d28" category="section-title">Menu de alimentação</block>
  <block id="e7dc1149b98b9a234419b52cb65c86eb" category="paragraph">Travão de potência PCIe</block>
  <block id="a4fb96bd64d4ecceb3f0f416f7032bb9" category="section-title">Menu processadores</block>
  <block id="78ee21f7e9d290c773c1aa6ae0d03303" category="paragraph">Controlo global do estado C</block>
  <block id="dc8a824c345b5e3bbaa79fce219830c2" category="paragraph">Modo SMT</block>
  <block id="28fb70bc7fdb441f9e6550205a24c92c" category="paragraph">CPPC</block>
  <block id="83ed73e76e0c1cfe38ef9627b7ae0fe0" category="section-title">Use Redfish API para ajustar as configurações do sistema</block>
  <block id="2bfb51b6fb78d5540135d28668652ab6" category="paragraph">Além de usar a Configuração UEFI, você pode usar a API Redfish para alterar as configurações do sistema.</block>
  <block id="33e221e2cea2342a6bae3c4c24f33827" category="inline-link">Website da DMTF</block>
  <block id="d96afe3ab332c2cc42ac69c811923ba7" category="paragraph">Para obter informações detalhadas sobre o esquema do Red Fish, consulte<block ref="108ef396f9aef1d6bcaea08379b877eb" category="inline-link-rx"></block> .</block>
  <block id="c38012b2187d10d4a33d168693918570" category="summary">Cada componente básico consiste em dois nós de arquivo x86 validados diretamente conectados usando InfiniBand HDR (200GBK) para dois nós de bloco NetApp.</block>
  <block id="abd55e01ead6dac45d997ad9c82c8019" category="doc">Implantar hardware</block>
  <block id="0893812920a9268362b89a618b2f05c4" category="paragraph">Cada componente básico consiste em dois nós de arquivo x86 validados diretamente conectados a dois nós de bloco usando cabos InfiniBand HDR (200GB).</block>
  <block id="50d1288a06e5d81d403b256e91757cd8" category="paragraph">As etapas a seguir são idênticas para cada componente básico no cluster, independentemente de ser usado para executar serviços de storage e metadados do BeeGFS, ou apenas serviços de storage, a menos que seja indicado de outra forma.</block>
  <block id="2420c82686a86123afa7fb56270ebdba" category="list-text">Configure cada nó de arquivo BeeGFS com quatro adaptadores de canal de host (HCAs) usando os modelos especificados no <block ref="786d34f336ab7f462feb4fe8776c8670" category="inline-link-macro-rx"></block>. Insira os HCAs nos slots PCIe do nó de arquivo de acordo com as especificações abaixo:</block>
  <block id="655bb8c05d377bb94fdb062b9b431c69" category="list-text">*Servidor Lenovo ThinkSystem SR665 V3:* Use slots PCIe 1, 2, 4 e 5.</block>
  <block id="79d10643d6c05fba16a1207303e6a6c0" category="list-text">*Servidor Lenovo ThinkSystem SR665:* Use slots PCIe 2, 3, 5 e 6.</block>
  <block id="9df6f3b087eea6552beb54d44653501a" category="list-text">Configure cada nó de bloco BeeGFS com uma placa de interface de host (HIC) 200GB de porta dupla e instale o HIC em cada uma de suas duas controladoras de storage.</block>
  <block id="32bf9d61588971ac8df90b5b33ea1a67" category="paragraph">Agrupe os componentes básicos para que os dois nós de arquivo BeeGFS fiquem acima dos nós de bloco BeeGFS. A figura a seguir mostra a configuração correta de hardware para o componente básico BeeGFS usando servidores Lenovo ThinkSystem SR665 V3 como nós de arquivo (visão traseira).</block>
  <block id="83b5e8063fa9a23613c6fe11336c236a" category="paragraph"><block ref="83b5e8063fa9a23613c6fe11336c236a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9e5081bbd0a64102ab8844f96776d6ea" category="admonition">A configuração da fonte de alimentação para casos de uso de produção normalmente deve usar PSUs redundantes.</block>
  <block id="cf31d049daa8cd238cb4238371f2e5d0" category="list-text">Se necessário, instale as unidades em cada um dos nós de bloco BeeGFS.</block>
  <block id="eb86aba8f900c8f076cdcddafcf7271f" category="list-text">Se o componente básico for usado para executar metadados e serviços de storage do BeeGFS e unidades menores forem usados para volumes de metadados, verifique se eles estão preenchidos nos slots de unidade mais externos, como mostra a figura abaixo.</block>
  <block id="c448ee45144a8930f2211d0a4edb7b91" category="list-text">Para todas as configurações de componentes básicos, se um compartimento de unidade não estiver totalmente preenchido, certifique-se de que um número igual de unidades esteja preenchido nos slots 0–11 e 12–23 para obter um desempenho ideal.</block>
  <block id="32105fac7897c11e56236a163fa6d971" category="inline-image-macro">EF600 slots de unidade</block>
  <block id="a2df183adc09aa68cc267d7f30848e40" category="paragraph"><block ref="a2df183adc09aa68cc267d7f30848e40" category="inline-image-macro-rx" type="image"></block></block>
  <block id="43c3123c89f5e279387f5f5375ace233" category="inline-link-macro">Cabos de cobre de conexão direta InfiniBand HDR 200GB de 1m GB</block>
  <block id="3c75c93f121f7b2c649fd946b1a935cf" category="list-text">Conete os nós de bloco e arquivo usando o <block ref="c748126fd5b6f4c3728762b1ce9f2698" category="inline-link-macro-rx"></block>, de modo que correspondam à topologia mostrada na figura a seguir.</block>
  <block id="9c5c72057491d0a5ae89a71dfa3f18ec" category="inline-image-macro">Cabeamento de conexão direta SR665V3</block>
  <block id="91b0007e09ff2fa20716b9ee1e611eb4" category="paragraph"><block ref="91b0007e09ff2fa20716b9ee1e611eb4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7fd5b7ef2a561c49e1b59a838397af45" category="admonition">Os nós em vários componentes básicos nunca são conetados diretamente. Cada bloco de construção deve ser Tratado como uma unidade autônoma e toda a comunicação entre blocos de construção ocorre através de switches de rede.</block>
  <block id="be01bbade44d01019fcef77af9fc26e5" category="inline-link-macro">Cabos InfiniBand de 2M GB</block>
  <block id="df8ecd3c13ed9e59d88fa90e10bcc47f" category="list-text">Conete as portas InfiniBand restantes no nó de arquivo ao switch InfiniBand da rede de storage usando o <block ref="661a89e8980e34439324f4cc2c4b1743" category="inline-link-macro-rx"></block> específico do switch de storage InfiniBand.</block>
  <block id="8e4e4dc9d710c035afcec16817c6b5a3" category="paragraph">Ao usar cabos divisores para conetar o switch de armazenamento a nós de arquivo, um cabo deve se ramificar para fora do switch e se conetar às portas delineadas em verde claro. Outro cabo divisor deve ser ramificado para fora do switch e conetar-se às portas delineadas em verde escuro.</block>
  <block id="5059e1c6d859e6d2e881b28d0a939639" category="paragraph">Além disso, para redes de armazenamento com switches redundantes, as portas delineadas em verde claro devem se conetar a um switch, enquanto as portas em verde escuro devem se conetar a outro switch.</block>
  <block id="e501a80fb52b2df8a7a16f92da9b76b2" category="inline-image-macro">Cabeamento de rede de storage</block>
  <block id="3f713ba1926971f2cec8152bf5b64825" category="paragraph"><block ref="3f713ba1926971f2cec8152bf5b64825" category="inline-image-macro-rx" type="image"></block></block>
  <block id="57f799feabdc3b75aa704ff51e74f4c1" category="list-text">Conforme necessário, monte blocos de construção adicionais seguindo as mesmas diretrizes de cabeamento.</block>
  <block id="6a2ae129e5b77fd39f068e6cdee42d2a" category="admonition">O número total de componentes básicos que podem ser implantados em um único rack depende da energia e refrigeração disponíveis em cada local.</block>
  <block id="f45c646cffcf39011c125e7523fa9149" category="summary">As variações de implantação para um componente básico de alta capacidade.</block>
  <block id="8b074fc693c7d8fd35c61de8fe2dee9a" category="doc">Componente básico de alta capacidade</block>
  <block id="fc6e06f3e4cfc328095f04c8f44c28f1" category="paragraph">O guia de implantação padrão da solução BeeGFS descreve os procedimentos e recomendações para requisitos de workloads de alta performance. Os clientes que desejam atender a requisitos de alta capacidade devem observar as variações na implantação e recomendações descritas aqui.</block>
  <block id="3e555d7998b255ac574c6430c2d9eaf6" category="inline-image-macro">Diagrama de rack de alta capacidade</block>
  <block id="5c4a48e1bba2d7e97a5afb3329da8750" category="paragraph"><block ref="5c4a48e1bba2d7e97a5afb3329da8750" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cbfb14f470701bf93424d757c624369a" category="section-title">Controladores</block>
  <block id="174e6193fff9ed7c9b1839367e007f13" category="paragraph">Para blocos de construção de alta capacidade, os controladores EF600 devem ser substituídos por controladores EF300, cada um com um Cascade HIC instalado para expansão SAS. Cada nó de bloco terá um número mínimo de SSDs NVMe preenchidos no compartimento do array para o storage de metadados do BeeGFS e será anexado aos compartimentos de expansão preenchidos com HDDs NL-SAS para volumes de storage BeeGFS.</block>
  <block id="1ec9226d3745f2995d2686d2450831c7" category="paragraph">A configuração do nó do arquivo para o nó do bloco permanece a mesma.</block>
  <block id="af932b84cc0c8562c0e572647564048f" category="section-title">Posicionamento da unidade</block>
  <block id="f96a95c482225ca6a9b4c17bfa47d918" category="paragraph">Para o storage de metadados do BeeGFS, são necessários no mínimo 4 SSD NVMe em cada nó de bloco. Essas unidades devem ser colocadas nos slots mais externos do gabinete.</block>
  <block id="ab0440e4421843b823481ec8c40114fa" category="inline-image-macro">Diagrama do slot da unidade de alta capacidade</block>
  <block id="d471943365921fcc3ec56d2cb62b204d" category="paragraph"><block ref="d471943365921fcc3ec56d2cb62b204d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fdd528ca6f274d102819b008b189961c" category="section-title">Bandejas de expansão</block>
  <block id="6627fde89324d2cbb6afd245e3d32d35" category="paragraph">O componente básico de alta capacidade pode ser dimensionado com bandejas de expansão de 1 a 7 unidades e 60 por storage array.</block>
  <block id="80b4ce0c4b11e4d8c7c4a14614b871f7" category="inline-link-macro">Consulte o cabeamento EF300 para ver as gavetas de unidades</block>
  <block id="25ada85328148d5356ce4edd989b1f40" category="paragraph">Para obter instruções sobre o cabo de cada bandeja de expansão, <block ref="8c170f7da852d665db7cd9113b2ed6bb" category="inline-link-macro-rx"></block>.</block>
  <block id="1b6582c92d5f0e47bd102f2e16686662" category="summary">Antes de começar a implantação, entenda como usar o Ansible para configurar e implantar a solução BeeGFS no NetApp usando o design de componentes básicos do BeeGFS de segunda geração.</block>
  <block id="4aa1cf90ffa01d3b63825bad839d9e29" category="doc">Saiba mais sobre o inventário do Ansible</block>
  <block id="91177a5a4b0c27f810e6deb9395eef4a" category="inline-link">NetApp e-Series BeeGFS GitHub</block>
  <block id="489a8841f96385c3fca8ff239dc24250" category="paragraph">O inventário do Ansible define a configuração para nós de arquivo e bloco e representa o sistema de arquivos BeeGFS que você deseja implantar. O inventário inclui hosts, grupos e variáveis descrevendo o sistema de arquivos BeeGFS desejado. Os inventários de amostra podem ser baixados de<block ref="5f5a4f2bb780d1d47d6a1c5865c757e8" category="inline-link-rx"></block>.</block>
  <block id="2b030b2e370bebb88648070cda0b66eb" category="section-title">Módulos e funções do Ansible</block>
  <block id="2b2607ba10759a35b672629d844a4bfc" category="paragraph">Para aplicar a configuração descrita pelo inventário do Ansible, use os vários módulos e funções do Ansible fornecidos na coleção do NetApp e-Series Ansible, em particular a função BeeGFS HA 7,4 (disponível no<block ref="e65da35b507a01fbe5db4a35e8ffaf77" category="inline-link-rx"></block>) que implanta a solução completa.</block>
  <block id="27633c2a48532dabf935531ba52193df" category="paragraph">Cada função na coleção Ansible do NetApp e-Series é uma implantação completa completa e completa da solução BeeGFS no NetApp. As funções usam as coleções SANtricity, host e BeeGFS do NetApp e-Series que permitem configurar o sistema de arquivos BeeGFS com HA (alta disponibilidade). Em seguida, você pode provisionar e mapear o armazenamento e garantir que o armazenamento de cluster esteja pronto para uso.</block>
  <block id="ca467fdffa66288bc6eeca1d49467e2e" category="paragraph">Embora a documentação detalhada seja fornecida com as funções, os procedimentos de implantação descrevem como usar a função para implantar uma arquitetura verificada do NetApp usando o design de componentes básicos do BeeGFS de segunda geração.</block>
  <block id="7c1be9d0f9dc743e2a1540004da3eb1d" category="admonition">Embora as etapas de implantação tentem fornecer detalhes suficientes para que a experiência anterior com o Ansible não seja um pré-requisito, você deve estar familiarizado com o Ansible e com a terminologia relacionada.</block>
  <block id="e9b6dfb59ebbe3c2a8e47b9bec2ada24" category="section-title">Layout de inventário para um cluster BeeGFS HA</block>
  <block id="5585bfe6d81b9366f1160e16fcf3464f" category="paragraph">Use a estrutura de inventário do Ansible para definir um cluster BeeGFS HA.</block>
  <block id="ea969b9d9b8b0a66432c22ea23412c18" category="paragraph">Qualquer pessoa com experiência anterior do Ansible deve estar ciente de que a função BeeGFS HA implementa um método personalizado para descobrir quais variáveis (ou fatos) se aplicam a cada host. Isso é necessário para simplificar a criação de um inventário do Ansible que descreve recursos que podem ser executados em vários servidores.</block>
  <block id="fcf695220ea603b6d461ed9aaa63c323" category="paragraph">Um inventário do Ansible normalmente consiste nos arquivos no<block ref="3342582e194d63e4c91b56623752c9c6" prefix=" " category="inline-code"></block> eno e<block ref="96fa973cda8809ad84f646e3d8fbbc1c" prefix=" " category="inline-code"></block> em um<block ref="d28e452e49fc926f32af1d87afcff3ce" prefix=" " category="inline-code"></block> arquivo que atribui hosts a grupos específicos (e potencialmente grupos a outros grupos).</block>
  <block id="927527f499c87b83ee052f9a293c0293" category="admonition">Não crie nenhum arquivo com o conteúdo desta subseção, que se destina apenas a exemplo.</block>
  <block id="a7a48a32496dcd14ea6f94f7d89ab599" category="paragraph">Embora essa configuração seja predeterminada com base no perfil de configuração, você deve ter uma compreensão geral de como tudo é definido como um inventário do Ansible, da seguinte forma:</block>
  <block id="9d92e1d6c46a5db6f99457758b8c71dc" category="paragraph">Para cada serviço, um arquivo adicional é criado em<block ref="96fa973cda8809ad84f646e3d8fbbc1c" prefix=" " category="inline-code"></block> descrever sua configuração:</block>
  <block id="7c98bb1c0d887b40b12614cc2cce909e" category="inline-link">O NetApp acelera a implantação do HA para BeeGFS com o Ansible</block>
  <block id="2c3ce0f08dbef62630d61052bdd46f20" category="paragraph">Esse layout permite que a configuração de serviço, rede e storage do BeeGFS para cada recurso seja definida em um único lugar. Nos bastidores, a função BeeGFS agrega a configuração necessária para cada nó de arquivo e bloco com base nessa estrutura de inventário. Para obter mais informações, consulte este post no blog:<block ref="500a149f08c7164c80066a24197a4f46" category="inline-link-rx"></block>.</block>
  <block id="bab8955d49a06dc041f1cf99ae3c65aa" category="admonition">O ID numérico e do nó de string BeeGFS para cada serviço é configurado automaticamente com base no nome do grupo. Assim, além do requisito geral do Ansible para que os nomes de grupos sejam únicos, os grupos que representam um serviço BeeGFS precisam terminar em um número exclusivo para o tipo de serviço BeeGFS que o grupo representa. Por exemplo, meta_01 e stor_01 são permitidos, mas metadata_01 e meta_01 não são.</block>
  <block id="fefc21957cc1bbb1f6a7704d95ad5e0d" category="summary">É possível implantar o BeeGFS no NetApp para nós de arquivos e blocos validados usando a segunda geração do design de componentes básicos do BeeGFS da NetApp.</block>
  <block id="42f8643eb52a942747937327c72c8361" category="doc">Visão geral da implantação</block>
  <block id="ef200d7e9d983785df6b4e01fa65bf59" category="section-title">Coleções e funções do Ansible</block>
  <block id="31f2ceaa03965649e2e37df5634511e7" category="paragraph">Com o Ansible, você implanta a solução BeeGFS no NetApp, que é um mecanismo popular de automação DE TI usado para automatizar as implantações de aplicações. O Ansible usa uma série de arquivos coletivamente conhecidos como um inventário, que modela o sistema de arquivos BeeGFS que você deseja implantar.</block>
  <block id="87d27d52f7fc81e8a134f2e3d2a57ecf" category="inline-link">Coleção BeeGFS da NetApp e-Series</block>
  <block id="a3dbff02e88e9e804d80d00706cede6c" category="paragraph">O Ansible permite que empresas como o NetApp expandam a funcionalidade incorporada usando coleções no Ansible Galaxy (<block ref="09c3689692686597c3ced866c6122b6c" category="inline-link-rx"></block>consulte ). As coleções incluem módulos que executam alguma função ou tarefa específica (como criar um volume e-Series) e incluem funções que podem chamar vários módulos e outras funções. Essa abordagem automatizada reduz o tempo necessário para implantar o sistema de arquivos BeeGFS e o cluster de HA subjacente. Além disso, simplifica a adição de componentes básicos para expandir os sistemas de arquivos existentes.</block>
  <block id="1325754275d5677e560f21035bc1ac47" category="paragraph">Para obter mais detalhes, <block ref="dd39ef1fcc2e17fe1fe509b7ac2d5dea" category="inline-link-macro-rx"></block>consulte .</block>
  <block id="5b3ae76175242b9c0c63ba5668657f49" category="admonition">Como várias etapas estão envolvidas na implantação da solução BeeGFS no NetApp, o NetApp não oferece suporte para a implantação manual da solução.</block>
  <block id="6201cef3e5bb8f42f2aa1876b8c1f544" category="section-title">Perfis de configuração para blocos de construção BeeGFS</block>
  <block id="3c411e2f06cd1b5275d2be84bb18a641" category="paragraph">Os procedimentos de implantação abrangem os seguintes perfis de configuração:</block>
  <block id="3c1ad21a1c1a2804f8ace80b84822bfe" category="list-text">Um componente básico que inclui serviços de gerenciamento, metadados e storage.</block>
  <block id="416ad52da618754efb3680e957b1a048" category="list-text">Um segundo componente básico que inclui metadados e serviços de storage.</block>
  <block id="11047a79bd1eab4d52ba658a48a430e8" category="list-text">Um terceiro componente básico que inclui apenas serviços de storage.</block>
  <block id="886066871646e69724c15beede051aa6" category="paragraph">Esses perfis demonstram a gama completa de perfis de configuração recomendados para os blocos de construção BeeGFS do NetApp. Para cada implantação, o número de componentes básicos de storage e metadados ou componentes básicos apenas de serviços de storage pode variar nos procedimentos, dependendo dos requisitos de capacidade e desempenho.</block>
  <block id="20cf8ff34f34ae23669e586d1092a0f9" category="section-title">Visão geral das etapas de implantação</block>
  <block id="9d863a0564ad86180bde2b2a6c27a6ed" category="paragraph">A implantação envolve as seguintes tarefas de alto nível:</block>
  <block id="fd2f8c173ade715231c21c932686e38b" category="list-title">Implantação de hardware</block>
  <block id="f08d36149d715ffbb8eca9f7159e0d27" category="list-text">Monte fisicamente cada bloco de construção.</block>
  <block id="65353eb96f13d02029086d1790108e3c" category="list-text">Hardware de rack e cabo. Para obter procedimentos detalhados, <block ref="19367e6e5e194f2806703eb905741326" category="inline-link-macro-rx"></block>consulte .</block>
  <block id="b9205e876aa43217d9358621cf2c6187" category="list-title">Implantação de software</block>
  <block id="359f84c66084d8c8c9d4cb7ca3945bcd" category="inline-link-macro">Configurar nós de arquivo e bloco</block>
  <block id="f8367dab28e2315251df9dcf227916b5" category="list-text"><block ref="4cfaa56cb8da11f04e7ee8ae6dd86bcc" category="inline-link-macro-rx"></block>.</block>
  <block id="ee63db10faeceba4efb3b03145e0ec26" category="list-text">Configurar IPs BMC em nós de arquivo</block>
  <block id="aa51221099b00aa6e09e3cb6b1b03f47" category="list-text">Instale um sistema operacional suportado e configure a rede de gerenciamento em nós de arquivos</block>
  <block id="a75b117cd8d7af9205b2185d8afb8537" category="list-text">Configurar IPs de gerenciamento em nós de bloco</block>
  <block id="14f10d91a4d4d076d9f025fdb6134949" category="inline-link-macro">Configure um nó de controle do Ansible</block>
  <block id="b81f7e6126c9f5040f05685e56e57af1" category="list-text"><block ref="6848fc9a1ed48359bab6d9326922d03c" category="inline-link-macro-rx"></block>.</block>
  <block id="51d961299f8aa9bb882574aae2a219eb" category="inline-link-macro">Ajuste as configurações do sistema para obter desempenho</block>
  <block id="9312585e52fd3b0a0898c7f73fdfd8cc" category="list-text"><block ref="dbe1843153b6696d3dd846d3a25ea7b2" category="inline-link-macro-rx"></block>.</block>
  <block id="914b8eb4568f7c438e1d415af01c2787" category="list-text"><block ref="dbbcb9482f49ee969cddb7f10864cbd0" category="inline-link-macro-rx"></block>.</block>
  <block id="2640957ad14de18b2d308da5e116b4a0" category="list-text"><block ref="56ee4018bb6227ffe39900ebf12f2472" category="inline-link-macro-rx"></block>.</block>
  <block id="d21cb96c35176f0f0ea13876f354d072" category="inline-link-macro">Implante o BeeGFS com o Ansible</block>
  <block id="a8169193bd5718bbe78111b3a1f874d7" category="list-text"><block ref="dffbd1bc941e2f4395de7cba04c6653b" category="inline-link-macro-rx"></block>.</block>
  <block id="f159952d71e33cd0a1ffbb2bcc4ce2ad" category="list-text"><block ref="75197807ccb18c9f99e8f2a2a3443aea" category="inline-link-macro-rx"></block>.</block>
  <block id="d6dd015562e1d088d87d28007ecfa541" category="admonition">Os procedimentos de implantação incluem vários exemplos em que o texto precisa ser copiado para um arquivo. Preste muita atenção a quaisquer comentários inline indicados por carateres "///" para qualquer coisa que deve ou pode ser modificada para uma implantação específica. Por exemplo:<block ref="f791b43c55fc3520a5d297b1addbd507" prefix=" " category="inline-code"></block></block>
  <block id="02cf3373667b246c17c8d054c073a372" category="paragraph">Arquiteturas derivadas com variações nas recomendações de implantação:</block>
  <block id="2e93d3c37349d17095fd0dca7d6fe097" category="inline-link-macro">Bloco de construção de alta capacidade</block>
  <block id="8a43f7c3e77834cf43b5398c116033e3" category="list-text"><block ref="8a43f7c3e77834cf43b5398c116033e3" category="inline-link-macro-rx"></block></block>
  <block id="bea1a33800109358727c67f41cd01d07" category="summary">A implantação e o gerenciamento da configuração envolve a execução de um ou mais playbooks que contêm as tarefas que o Ansible precisa executar e colocar o sistema geral no estado desejado.</block>
  <block id="40184afe39cc9f2361b3b73e0695976d" category="doc">Implantar o BeeGFS</block>
  <block id="a5cd3ed116608dac017f14c046ea56bf" category="inline-link">Funções</block>
  <block id="d0dbcd7fcc2b33ea218a58e2364a462a" category="paragraph">Embora todas as tarefas possam ser incluídas em um único manual, para sistemas complexos, isso rapidamente se torna difícil de gerenciar. O Ansible permite que você crie e distribua funções como uma forma de empacotar playbooks reutilizáveis e conteúdo relacionado (por exemplo: Variáveis padrão, tarefas e manipuladores). Para obter mais informações, consulte a documentação do Ansible para<block ref="68a1974ca8634592518191ca9775617f" category="inline-link-rx"></block>.</block>
  <block id="63d74efd13802381ddc8b8a65a3a5000" category="paragraph">As funções geralmente são distribuídas como parte de uma coleção do Ansible que contém funções e módulos relacionados. Assim, esses playbooks apenas importam várias funções distribuídas nas várias coleções do NetApp e-Series Ansible.</block>
  <block id="3fb2d69a2432fdcecc09bb3418ad3ace" category="admonition">Atualmente, pelo menos dois componentes básicos (quatro nós de arquivo) são necessários para implantar o BeeGFS, a menos que um dispositivo de quorum separado seja configurado como um tiebreaker para mitigar quaisquer problemas ao estabelecer quorum com um cluster de dois nós.</block>
  <block id="2ab028f46312dfd58cd64798fc7cbf9e" category="list-text">Crie um novo<block ref="2f78c4e27feaf25ffb33d97e8ff7e7a6" prefix=" " category="inline-code"></block> arquivo e inclua o seguinte:</block>
  <block id="26a3e9e044d0e5b372c4803d6bdeefbd" category="admonition">Esse manual de estratégia executa alguns<block ref="c14192fc9675e5023582b237e885e10d" prefix=" " category="inline-code"></block> que verificam se o Python 3 está instalado nos nós de arquivo e verificam se as tags do Ansible fornecidas são compatíveis.</block>
  <block id="7cf59981bd844e32610404655f205256" category="list-text">Use o<block ref="6afa1ad605a4192ba2e50e8be9966e68" prefix=" " category="inline-code"></block> comando com os arquivos de inventário e manual de estratégia quando estiver pronto para implantar o BeeGFS.</block>
  <block id="f73890e8771abfa1abdc045ab1b722ef" category="paragraph">A implantação executará tudo<block ref="c14192fc9675e5023582b237e885e10d" prefix=" " category="inline-code"></block>e solicitará a confirmação do usuário antes de prosseguir com a implantação real do BeeGFS.</block>
  <block id="efd5cfa405ebe66e35820b347b961b90" category="paragraph">Execute o seguinte comando, ajustando o número de garfos conforme necessário (veja a nota abaixo):</block>
  <block id="2485710fb8c15237f98f63beae48b455" category="inline-link">Controlar a execução do manual de estratégia</block>
  <block id="ce0bc242efa1f7752857cac8fae4d239" category="admonition">Especialmente para implantações maiores, a substituição do número padrão de bifurcações (5) usando o<block ref="448725115a83c589b33de77889e1e2f3" prefix=" " category="inline-code"></block> parâmetro é recomendada para aumentar o número de hosts que o Ansible configura em paralelo. (Para obter mais informações,<block ref="2f92d47aead0a3ef15304d32faf6a032" category="inline-link-rx"></block>consulte .) A configuração de valor máximo depende da potência de processamento disponível no nó de controle do Ansible. O exemplo acima de 20 foi executado em um nó de controle virtual do Ansible com 4 CPUs (CPU Intel(R) Xeon(R) Gold 6146 com 3,20GHz GB).</block>
  <block id="e5e4c2e4c004bc7dbd4a04d4b0971e53" category="paragraph">Dependendo do tamanho da implantação e da performance de rede entre o nó de controle do Ansible e os nós de bloco e arquivo do BeeGFS, o tempo de implantação pode variar.</block>
  <block id="66136a118d01240429805a157ae4b538" category="summary">Ao seguir a configuração padrão de quatro volumes por pool de armazenamento para componentes básicos de segunda geração, consulte essas porcentagens recomendadas.</block>
  <block id="13d38edc52fe6e049aae05e6fce1573a" category="paragraph">Ao seguir a configuração padrão de quatro volumes por pool de storage para componentes básicos de segunda geração, consulte a tabela a seguir.</block>
  <block id="2d115a94acc324947afb0abf7c47d665" category="paragraph">Essa tabela fornece as porcentagens recomendadas a serem usadas como o tamanho do volume em<block ref="8ca968d07b3817015da8919c700152f5" prefix=" " category="inline-code"></block> cada metadados do BeeGFS ou destino de storage:</block>
  <block id="ec8691da9bf60fda22f12e08033d054b" category="cell">Tamanho da unidade</block>
  <block id="6f6cb72d544962fa333e2e34ce64f719" category="cell">Tamanho</block>
  <block id="be3ca1ec15ca4657e5ca3ec84a561090" category="cell">1,92 TB</block>
  <block id="6f4922f45568161a8cdf4ad2299f6d23" category="cell">18</block>
  <block id="71839d6e6fb59e239ad941d08b5e2519" category="cell">3,84 TB</block>
  <block id="d81fdeb5a429e85d04118048e4b3485d" category="cell">21,5</block>
  <block id="a98c228c0d8903ba6926546f64321cc4" category="cell">7,68 TB</block>
  <block id="6303058eb2f22355195922bb9eeac265" category="cell">22,5</block>
  <block id="1f04a7c587f50d269f44d43229c966ac" category="cell">15,3 TB</block>
  <block id="1ff1de774005f8da13f42943881c655f" category="cell">24</block>
  <block id="b6f404dc4372a8369386a51240b69703" category="admonition">As orientações acima não se aplicam ao pool de storage que contém o serviço de gerenciamento, o que deve reduzir os tamanhos acima em 25% para alocar 1% do pool de storage para dados de gerenciamento.</block>
  <block id="cede28c203641f70169adaabc10df9b6" category="inline-link">TR-4800: Apêndice A: Compreender a resistência e o provisionamento de SSD</block>
  <block id="dab022c0b8356780eb602bc87effd71f" category="paragraph">Para entender como esses valores foram determinados,<block ref="fa826cd698d934925bfe1b514e70b591" category="inline-link-rx"></block>consulte .</block>
  <block id="2bf773d42bef6909b232e854a16b3ec1" category="summary">Configure a Pacemaker e o Corosync para escalar além de cinco blocos de construção.</block>
  <block id="22892d2f5bfdfba001a02572258cca62" category="doc">Escala além de cinco componentes básicos</block>
  <block id="cfd24c157d6cd9f200eb8c3cf68ee7ed" category="paragraph">Você pode configurar o Pacemaker e o Corosync para escalar além de cinco blocos de construção (10 nós de arquivo). No entanto, há desvantagens para clusters maiores e, eventualmente, a Pacemaker e a Corosync impõem um máximo de 32 nós.</block>
  <block id="9e59383f4d4ca677923852ae81323178" category="paragraph">A NetApp testou apenas clusters de HA do BeeGFS para até 10 nós. O dimensionamento de clusters individuais além desse limite não é recomendado ou compatível. No entanto, os sistemas de arquivos BeeGFS ainda precisam ser dimensionados para além de 10 nós, e a NetApp foi responsável pela solução BeeGFS on NetApp.</block>
  <block id="72799e21cef92db3ad98f7c0a923e398" category="paragraph">Com a implantação de vários clusters de HA que contêm um subconjunto dos componentes básicos em cada sistema de arquivos, é possível dimensionar o sistema de arquivos BeeGFS geral independentemente de quaisquer limites físicos ou recomendados pelos mecanismos subjacentes de clustering HA. Neste cenário, faça o seguinte:</block>
  <block id="5c3bc488def3e9ba17589e3a75fdd5c0" category="list-text">Crie um novo inventário do Ansible que represente o(s) cluster(s) de HA adicional(s) e, em seguida, omite a configuração de outro serviço de gerenciamento. Em vez disso, aponte a<block ref="58d2053fd85feeb270797993bb67b146" prefix=" " category="inline-code"></block> variável em cada cluster adicional<block ref="3cd295e6aaa39e2510aff65b801cc5ab" prefix=" " category="inline-code"></block> para o IP do primeiro serviço de gerenciamento BeeGFS.</block>
  <block id="321f3f6b80bc5f9c02e358e120fa74b0" category="list-text">Ao adicionar clusters de HA adicionais ao mesmo sistema de arquivos, verifique o seguinte:</block>
  <block id="32e66ce3c599bce3fc21c5a5943b6f4d" category="list-text">As IDs de nó do BeeGFS são exclusivas.</block>
  <block id="50b9a2f3bd2dc22b582e6e66d12bf0ff" category="list-text">Os nomes de arquivo correspondentes a cada serviço em<block ref="96fa973cda8809ad84f646e3d8fbbc1c" prefix=" " category="inline-code"></block> são exclusivos em todos os clusters.</block>
  <block id="6219a68f7552d8328f7fc5df8510ffc3" category="list-text">Os endereços IP do cliente e do servidor BeeGFS são exclusivos em todos os clusters.</block>
  <block id="16d3c50a6b84c7701cadfdf721b74007" category="list-text">O primeiro cluster de HA que contém o serviço de gerenciamento BeeGFS está sendo executado antes de tentar implantar ou atualizar clusters adicionais.</block>
  <block id="6f94cb93f82c2013e179dc630a5dd715" category="list-text">Mantenha os inventários de cada cluster de HA separadamente em sua própria árvore de diretórios.</block>
  <block id="079e1a9e099799d390c677577618ecce" category="paragraph">Tentar misturar arquivos de inventário para vários clusters em uma árvore de diretório pode causar problemas em como a função de HA BeeGFS agrega a configuração aplicada a um cluster específico.</block>
  <block id="f4250b17c613a290cad4edf8e2bab3fd" category="admonition">Não é necessário que cada cluster de HA escale até cinco componentes básicos antes de criar um novo. Em muitos casos, é mais fácil gerenciar o uso de menos componentes básicos por cluster. Uma abordagem é configurar os componentes básicos em cada rack único como um cluster de HA.</block>
  <block id="b11764419626b2eff6352f3d8e6022e3" category="summary">Para configurar um nó de controle do Ansible, identifique uma máquina virtual ou física com acesso de rede às portas de gerenciamento de todos os nós de arquivo e bloco que podem ser usados para configurar a solução.</block>
  <block id="bfcf60c321d0d2cb85402c7a22d208b9" category="paragraph">Para configurar um nó de controle do Ansible, você precisa identificar uma máquina virtual ou física com acesso de rede às portas de gerenciamento de todos os nós de arquivo e bloco que podem ser usados para configurar a solução.</block>
  <block id="8bf028bec7411a5f58e9f6c9cdcb868c" category="paragraph">As etapas a seguir foram testadas no Ubuntu 22,04.04. Para obter passos específicos para a distribuição Linux preferida, consulte<block ref="34c856f227a1cab1577af9d235784d24" category="inline-link-rx"></block> .</block>
  <block id="6beebf7e29f7e6b87bb0cfa8afb3d664" category="list-text">Instale o Python 3,10 e certifique-se de que a versão correta do<block ref="62ad1c2a46c5298f3e2c95d3babf8d0c" prefix=" " category="inline-code"></block> está instalada.</block>
  <block id="e709eaee39c1c94ce2b784ef354857f3" category="list-text">Crie links simbólicos, garantindo que o binário Python 3,10 seja usado sempre que<block ref="6e8efbe3a442748b716644025479aab5" prefix=" " category="inline-code"></block> ou<block ref="23eeeb4347bdd26bfc6b7ee9a3b755dd" prefix=" " category="inline-code"></block> seja chamado.</block>
  <block id="e7a81038c18b15bf5d97b77fb110af03" category="list-text">Instale os pacotes Python exigidos pelas coleções BeeGFS do NetApp.</block>
  <block id="7f883f5609524995f000fc99b8f5691a" category="admonition">Para garantir que você esteja instalando uma versão compatível do Ansible e todos os pacotes Python necessários, consulte o arquivo Readme da coleção BeeGFS. As versões suportadas também são anotadas no <block ref="786d34f336ab7f462feb4fe8776c8670" category="inline-link-macro-rx"></block>.</block>
  <block id="a36d9a848f44be3e2b8d092a5861995a" category="list-text">Verifique se as versões corretas do Ansible e do Python estão instaladas.</block>
  <block id="4ac0a4015ebef3209a5f3acb61110dd9" category="list-text">Armazene os inventários Ansible usados para descrever a implantação do BeeGFS em sistemas de controle de origem, como Git ou BitBucket, e instale o Git para interagir com esses sistemas.</block>
  <block id="f2f38616eaf6d21846071c00e89109b4" category="list-text">Configure o SSH sem senha. Essa é a maneira mais fácil de permitir que o Ansible acesse os nós de arquivo BeeGFS remotos a partir do nó de controle do Ansible.</block>
  <block id="3087af73e5990976755e4c56b6e7c754" category="list-text">No nó de controle do Ansible, se necessário, gere um par de chaves públicas usando<block ref="5356c138de038f32891acc3ddf8f3ed6" prefix=" " category="inline-code"></block></block>
  <block id="c5d36867af8fc130f7a6b6bd87d51d23" category="list-text">Configure o SSH sem senha para cada um dos nós de arquivo usando<block ref="db16ae2d4f692829fd5e7722c57dc5ff" prefix=" " category="inline-code"></block></block>
  <block id="c4e4fc85a76d5e87beac70d1fa166882" category="paragraph">*Not* configure SSH sem senha para os nós de bloco. Isto não é suportado nem necessário.</block>
  <block id="03f38aac08b6c6c3e6e3afc965fedbcc" category="list-text">Use o Ansible Galaxy para instalar a versão da coleção BeeGFS listada no <block ref="786d34f336ab7f462feb4fe8776c8670" category="inline-link-macro-rx"></block>.</block>
  <block id="b113449496b52721b53dc04e5120a57b" category="paragraph">Essa instalação inclui dependências adicionais do Ansible, como o software NetApp SANtricity e as coleções de host.</block>
  <block id="d8ca15234a274a841f06a1d429141054" category="summary">Configure a rede no controlador de gerenciamento de placa base (BMC) de cada servidor e configure a porta de gerenciamento em cada controlador.</block>
  <block id="1cfd8029b1372ddacb436890446b43fd" category="doc">Configurar nós de arquivo e nós de bloco</block>
  <block id="d900235d99f416c3bfda0461cbb71f26" category="paragraph">Embora a maioria das tarefas de configuração de software seja automatizada com as coleções do Ansible fornecidas pela NetApp, é necessário configurar a rede na controladora de gerenciamento de placa base (BMC) de cada servidor e configurar a porta de gerenciamento em cada controladora.</block>
  <block id="02f510b4f0f01c83fb0898c7c21472f3" category="section-title">Configurar nós de arquivo</block>
  <block id="58ee770c560ec650edbb0731c6882d53" category="list-text">Configure a rede no controlador de gerenciamento de placa base (BMC) de cada servidor.</block>
  <block id="75ae096871a25daf3dcd5da902c66ecf" category="inline-link">Documentação do Lenovo ThinkSystem</block>
  <block id="0f7c31137702c2d677a474d55058637d" category="paragraph">Para saber como configurar a rede para os nós de arquivo validados do Lenovo SR665 V3, consulte o<block ref="05277b4b7d004e546ac1f238e66dd4bf" category="inline-link-rx"></block>.</block>
  <block id="0c112c89dd8c3ce2b92d5e4844ea4641" category="admonition">Um controlador de gerenciamento de placa base (BMC), às vezes chamado de processador de serviço, é o nome genérico para o recurso de gerenciamento fora da banda incorporado em várias plataformas de servidor que podem fornecer acesso remoto, mesmo que o sistema operacional não esteja instalado ou acessível. Normalmente, os fornecedores comercializam essa funcionalidade com sua própria marca. Por exemplo, no Lenovo SR665, o BMC é chamado de _controlador XClarity (XCC)_.</block>
  <block id="290a84841d7341364c4abf862a74583f" category="list-text">Configure as definições do sistema para obter o máximo desempenho.</block>
  <block id="04c7f6322804081c61ca0d88cef85904" category="paragraph">Você configura as configurações do sistema usando a configuração UEFI (anteriormente conhecida como BIOS) ou usando as APIs do Redfish fornecidas por muitos BMCs. As configurações do sistema variam de acordo com o modelo de servidor usado como nó de arquivo.</block>
  <block id="354f37da23eacae1fc163775964a0a2e" category="paragraph">Para saber como configurar as configurações do sistema para os nós de arquivo validados do Lenovo SR665, <block ref="dbe1843153b6696d3dd846d3a25ea7b2" category="inline-link-macro-rx"></block>consulte .</block>
  <block id="b8d06d76e2eaa67bfafbce3081ab48f5" category="list-text">Instale o Red Hat 9,3 e configure o nome do host e a porta de rede usados para gerenciar o sistema operacional, incluindo a conetividade SSH do nó de controle do Ansible.</block>
  <block id="63b34e32fcac1724c46edd575672332b" category="paragraph">Não configure IPs em nenhuma das portas InfiniBand no momento.</block>
  <block id="e9074e57167186919a163cd099187dd0" category="admonition">Embora não sejam estritamente necessárias, as seções subsequentes presumem que os nomes de host são numerados sequencialmente (como H1-HN) e referem-se a tarefas que devem ser concluídas em hosts ímpares versus mesmo numerados.</block>
  <block id="7568449700f7c3e03b4500285c69b82f" category="list-text">Use o RedHat Subscription Manager para Registrar e assinar o sistema para permitir a instalação dos pacotes necessários dos repositórios oficiais da Red Hat e limitar as atualizações da versão suportada do Red Hat:<block ref="085c7e75df5d271759849f369fa065a7" prefix=" " category="inline-code"></block>. Para obter instruções, consulte<block ref="2e2e1be81972e19947d90393d5319b6e" category="inline-link-rx"></block> e <block ref="bbd834e2960f33a50fb102fd4d31a6d9" category="inline-link-rx"></block>.</block>
  <block id="577885e812bad7e4780317a271722339" category="list-text">Ative o repositório Red Hat que contém os pacotes necessários para alta disponibilidade.</block>
  <block id="3c438be737391744e2fed6f73c418638" category="inline-link-macro">Requisitos de tecnologia</block>
  <block id="00d3e1c43b2f440233b2874bbe49a236" category="list-text">Atualize todo o firmware HCA para a versão recomendada em <block ref="27ecbcefd12957257b84a6d4c5608591" category="inline-link-macro-rx"></block>.</block>
  <block id="33abf34a1ac99d306f38ad532ed75170" category="inline-link-macro">manual do utilizador</block>
  <block id="de2787072a70ede6b3c4b90ff28fe789" category="inline-link">Mlxup - Utilitário de atualização e consulta</block>
  <block id="313520f5b6c2887466092680afb5d057" category="paragraph">Esta atualização pode ser feita baixando e executando uma versão da ferramenta mlxup que agrupa o firmware recomendado. Pode transferir esta ferramenta a partir de<block ref="d22fd7ba0031fc3b862dce4cf129cfa5" category="inline-link-rx"></block> (<block ref="0efbaca172e58edf29b612ba47aac915" category="inline-link-macro-rx"></block> ).</block>
  <block id="febfb51b621938c49980eee52ab6a373" category="section-title">Configurar nós de bloco</block>
  <block id="1dab115fdeed11b46ad9a32f690cfc8a" category="paragraph">Configure os nós de bloco EF600 configurando a porta de gerenciamento em cada controlador.</block>
  <block id="0631592349fc286da7627270b9c9b359" category="list-text">Configure a porta de gerenciamento em cada controlador EF600.</block>
  <block id="3f7c08d9f511dbd36a44bc681e25e3bf" category="inline-link">E-Series Documentation Center</block>
  <block id="83398f0ded44dc933df951171f29b604" category="paragraph">Para obter instruções sobre como configurar portas, vá para o<block ref="4719a190e5f3bfbda84ab0e6295af1ef" category="inline-link-rx"></block>.</block>
  <block id="a1cdd0715dd7993c1664eea6d7f39810" category="list-text">Opcionalmente, defina o nome do storage array para cada sistema.</block>
  <block id="6c8f452018d59ce25e69f9d3f8851b32" category="paragraph">Definir um nome pode facilitar a consulta a cada sistema nas seções subsequentes. Para obter instruções sobre como definir o nome do array, vá para<block ref="4719a190e5f3bfbda84ab0e6295af1ef" category="inline-link-rx"></block> .</block>
  <block id="561abcc4bd5f30a9d5ee1e4c64d9a10d" category="admonition">Embora não sejam estritamente necessários, os tópicos subsequentes presumem que os nomes de matrizes de armazenamento são numerados sequencialmente (como C1 - CN) e referem-se às etapas que devem ser concluídas em sistemas ímpares versus pares.</block>
  <block id="39f54b8b12af6ae0edd74b4db43d9959" category="summary">A configuração de hardware do BeeGFS no NetApp inclui nós de arquivo e cabeamento de rede.</block>
  <block id="a80f40a4cf172e4461c613d2afc0bade" category="doc">Configuração de hardware</block>
  <block id="a6f76304e97d4b2df31a130d24073f88" category="section-title">Configuração do nó do arquivo</block>
  <block id="8e9473694bc8ee293e1f6c4f730ab4ed" category="paragraph">Os nós de arquivo têm dois soquetes de CPU configurados como zonas NUMA separadas, que incluem acesso local a um número igual de slots PCIe e memória.</block>
  <block id="81fb4a697d99bad44c068f68db513e26" category="paragraph">Os adaptadores InfiniBand devem ser preenchidos nos risers ou slots PCI apropriados, de modo que a carga de trabalho seja equilibrada sobre as faixas PCIe e os canais de memória disponíveis. Você equilibra o workload com o isolamento total do trabalho de serviços individuais do BeeGFS para um nó específico. O objetivo é alcançar um desempenho semelhante de cada nó de arquivo como se fossem dois servidores de soquete único independentes.</block>
  <block id="26dc1928abfabc3027cfa2e4f0b2f57f" category="paragraph">A figura a seguir mostra a configuração do nó de arquivo NUMA.</block>
  <block id="e5e317ea18fb59bd91370981078a2eb6" category="inline-image-macro">Configuração NUMA</block>
  <block id="b69049bad10aec8bac8579c94488a401" category="paragraph"><block ref="b69049bad10aec8bac8579c94488a401" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cc560c8656cb52d0c2376a0dbb2ac436" category="paragraph">Os processos BeeGFS são fixados a uma zona NUMA específica para garantir que as interfaces usadas estejam na mesma zona. Esta configuração evita a necessidade de acesso remoto através da ligação entre sockets. A conexão entre soquetes às vezes é conhecida como QPI ou link GMI2; mesmo em arquiteturas de processador modernas, eles podem ser um gargalo ao usar redes de alta velocidade como HDR InfiniBand.</block>
  <block id="037505dd545df2577c95982dd52a9497" category="section-title">Configuração de cabeamento de rede</block>
  <block id="2efc6e5efcfc3424383b80badbc6f2f8" category="paragraph">Em um componente básico, cada nó de arquivo é conetado a dois nós de bloco usando um total de quatro conexões InfiniBand redundantes. Além disso, cada nó de arquivo tem quatro conexões redundantes com a rede de storage InfiniBand.</block>
  <block id="c2b0d4abc479963299ef11f7007b04d9" category="paragraph">Na figura a seguir, observe que:</block>
  <block id="ccebd32ee2768501ecf2042e521d090c" category="list-text">Todas as portas de nós de arquivo descritas em verde são usadas para se conectar à malha de storage. Todas as outras portas de nós de arquivo são as conexões diretas aos nós de bloco.</block>
  <block id="01be869a64586dc6df5d40be148742a7" category="list-text">Duas portas InfiniBand em uma zona NUMA específica se conetam aos controladores A e B do mesmo nó de bloco.</block>
  <block id="92d102b77ed7526653d6ed77bc5f9297" category="list-text">As portas no nó NUMA 0 sempre se conetam ao primeiro nó de bloco.</block>
  <block id="41d34f3f75f0a6f23825fec8c1f6b167" category="list-text">As portas no nó NUMA 1 conetam-se ao segundo nó de bloco.</block>
  <block id="12316ea7d4573c51756ec0fb8fe2d354" category="inline-image-macro">Cabeamento de rede</block>
  <block id="f8e0ca3438f30328dc02a59212533e4b" category="paragraph"><block ref="f8e0ca3438f30328dc02a59212533e4b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b52d8b061d9ea3d197fbe8093a3eec3f" category="admonition">Ao usar cabos divisores para conetar o switch de armazenamento a nós de arquivo, um cabo deve ramificar e conetar-se às portas delineadas em verde claro. Outro cabo deve ramificar e conetar-se às portas delineadas em verde escuro. Além disso, para redes de armazenamento com switches redundantes, as portas delineadas em verde claro devem se conetar a um switch, enquanto as portas em verde escuro devem se conetar a outro switch.</block>
  <block id="1109e0767ef0b323f02f85cdaa9a589d" category="paragraph">A configuração de cabeamento ilustrada na figura permite que cada serviço BeeGFS:</block>
  <block id="12e9ec8c0cb3aa87bfb400a73712d79b" category="list-text">Execute na mesma zona NUMA, independentemente do nó de arquivo que está executando o serviço BeeGFS.</block>
  <block id="488f6220ee8bab2e1e3621f7f99b598c" category="list-text">Ter caminhos secundários ideais para a rede de storage de front-end e para os nós de bloco de back-end, independentemente de onde ocorra uma falha.</block>
  <block id="e2ae85c4e917fafc3b545710dcc3fdf1" category="list-text">Minimize os efeitos de desempenho se um nó de arquivo ou controlador em um nó de bloco exigir manutenção.</block>
  <block id="53c31a8ba69af9d096629948d271d34d" category="paragraph-title">Cabeamento para aproveitar a largura de banda</block>
  <block id="dcc608d1c76fed74a96f75915bc6561f" category="paragraph">Para utilizar a largura de banda bidirecional PCIe completa, verifique se uma porta em cada adaptador InfiniBand se conecta à malha de storage e se a outra porta se conecta a um nó de bloco.</block>
  <block id="33f3e0c9879fd051eb380c62267a24cf" category="paragraph">A figura a seguir mostra o projeto de cabeamento usado para aproveitar a largura de banda bidirecional PCIe completa.</block>
  <block id="dfc8d818052af4f5e6b27ab14809f648" category="inline-image-macro">Largura de banda bidirecional HCA</block>
  <block id="109f376ab71650e10de73ac118faa1cf" category="paragraph"><block ref="109f376ab71650e10de73ac118faa1cf" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e366b0b441e75fcafac2db7ff979a799" category="inline-link-macro">Configuração de software</block>
  <block id="1a72dacfce92d062255a929bbb18fc8d" category="paragraph">Para cada serviço BeeGFS, use o mesmo adaptador para conetar a porta preferida usada para o tráfego do cliente com o caminho para a controladora de nós de bloco que é o principal proprietário desses volumes de serviços. Para obter mais informações, <block ref="1ce6299bc86692b3e97783bdba904848" category="inline-link-macro-rx"></block>consulte .</block>
  <block id="f8ed0cba5469cc89e05fa4d3025eca1b" category="summary">As variações de projeto para um bloco de construção de alta capacidade.</block>
  <block id="fb5708557d5e7c6d44ac55ef4c09a054" category="paragraph">O design da solução padrão BeeGFS foi desenvolvido com os workloads de alta performance em mente. Os clientes que procuram casos de uso de alta capacidade devem observar as variações nas caraterísticas de design e desempenho descritas aqui.</block>
  <block id="800f7da804cf784ad962d085fbc70486" category="section-title">Configuração de hardware e software</block>
  <block id="90f177623f1131fc7f45e82db6189a1b" category="paragraph">A configuração de hardware e software para o componente básico de alta capacidade é padrão, exceto que os controladores EF600 devem ser substituídos por EF300 controladores com a opção de anexar entre 1 e 7 bandejas de expansão IOM com 60 unidades cada para cada storage de armazenamento, totalizando 2 a 14 bandejas de expansão por bloco de construção.</block>
  <block id="467fccc62f2ea7630303f15d47a54aa7" category="paragraph">Os clientes que implantam um design de componente básico de alta capacidade provavelmente usarão apenas a configuração básica em estilo de componente básico que consiste no gerenciamento, metadados e serviços de storage do BeeGFS para cada nó. Para obter eficiência de custos, os nós de storage de alta capacidade devem provisionar volumes de metadados nas unidades NVMe no compartimento da controladora EF300 e provisionar volumes de storage para as unidades NL-SAS nas bandejas de expansão.</block>
  <block id="774f4231e5651061791e65cf90314897" category="paragraph"><block ref="774f4231e5651061791e65cf90314897" category="inline-image-macro-rx" type="image"></block></block>
  <block id="137e4d3e0bc5586af6fc7ca9441511e1" category="section-title">Diretrizes de dimensionamento</block>
  <block id="267aa4fef181a2097a06345c854cc106" category="paragraph">Essas diretrizes de dimensionamento presumem que os componentes básicos de alta capacidade são configurados com um grupo de volume SSD NVMe de mais de 2 GB para metadados no compartimento EF300 básico e 2 6x 8 grupos de volume NL-SAS de mais de 2 TB por bandeja de expansão IOM para storage.</block>
  <block id="963320465e8fcfa25188a669a43858c4" category="cell">Tamanho da unidade (HDDs de capacidade)</block>
  <block id="55fd8e839de07671a6869fad80279ab9" category="cell">Capacidade por BB (1 tabuleiro)</block>
  <block id="001115a96afe0add22e654316239365a" category="cell">Capacidade por BB (2 bandejas)</block>
  <block id="b9781606af717d9b153714ca7a3a2d33" category="cell">Capacidade por BB (3 bandejas)</block>
  <block id="345ffe7c9ac213823037fbcdca8f4ef2" category="cell">Capacidade por BB (4 bandejas)</block>
  <block id="6b7e0bcfc566b639bc0d10bad9f871dd" category="cell">4 TB</block>
  <block id="676efbc64df1b4909842616f91027d96" category="cell">439 TB</block>
  <block id="25c359cf674976f1bd282922ff6ed0e3" category="cell">878 TB</block>
  <block id="1416acbb13ce37c62934fde6e37b3c6b" category="cell">1317 TB</block>
  <block id="3aa071e61efaac2113f5fc251c03b688" category="cell">1756 TB</block>
  <block id="0706c165b0123479cffaac9b374484f0" category="cell">8 TB</block>
  <block id="76a91245e71b558dbe0040ea8b7b3c21" category="cell">2634 TB</block>
  <block id="dd9fa1084ca34ce21c6b127bd37446b9" category="cell">3512 TB</block>
  <block id="1191f788083da9194f8eef9400d10898" category="cell">10 TB</block>
  <block id="6587b6d3747beeadda1eccb500e9771b" category="cell">1097 TB</block>
  <block id="3a89d830e84dc7715fe902bb9adac448" category="cell">2195 TB</block>
  <block id="1024776bf84a4c2469e49539ac248790" category="cell">3292 TB</block>
  <block id="0af601e969fa263e021792cfd1dfd4af" category="cell">4390 TB</block>
  <block id="aad11c7dd0feb18c08cb728eea0a8c46" category="cell">12 TB</block>
  <block id="0fc4914bd341e29e4eef438ff8c44bdb" category="cell">3951 TB</block>
  <block id="4d63a00ef9361479d55d2914d7f75e28" category="cell">5268 TB</block>
  <block id="324f218b8144e744b54eb58e0bf14eea" category="cell">16 TB</block>
  <block id="af4d6969d11876b269a31ebb39d7c34e" category="cell">7024 TB</block>
  <block id="7ba1b40b5eed0a67df50aa00c907f9ac" category="cell">18 TB</block>
  <block id="23f86ea0b6ba63be94542d36e1d0ac20" category="cell">1975 TB</block>
  <block id="01dbb09e4b3f7243c1cae305daf2972a" category="cell">5927 TB</block>
  <block id="547259566f92db3383cbd2575b9d68c1" category="cell">7902 TB</block>
  <block id="ce0a47ccdc84e9c90b9185aea530a07b" category="summary">Equipamentos, cabeamento e configurações específicos são necessários para dar suporte à solução BeeGFS on NetApp, que combina o sistema de arquivos paralelos do BeeGFS com os sistemas de storage NetApp EF600.</block>
  <block id="fb7e8abee0ed4186f8c4b871d0ea6ac3" category="doc">Visão geral do design</block>
  <block id="7cac973d2abc65a232606799a99be23c" category="paragraph">Saiba mais:</block>
  <block id="6ee419ed5a936cfed45771da0b746c94" category="list-text"><block ref="6ee419ed5a936cfed45771da0b746c94" category="inline-link-macro-rx"></block></block>
  <block id="1ce6299bc86692b3e97783bdba904848" category="list-text"><block ref="1ce6299bc86692b3e97783bdba904848" category="inline-link-macro-rx"></block></block>
  <block id="57448c4b7cf64af279b612502ae49c08" category="inline-link-macro">Verificação do design</block>
  <block id="2c39c30b16a5c14e4b3bd73361f541c5" category="list-text"><block ref="2c39c30b16a5c14e4b3bd73361f541c5" category="inline-link-macro-rx"></block></block>
  <block id="b7f5b93ad68dd5ab95107b85145443e8" category="list-text"><block ref="b7f5b93ad68dd5ab95107b85145443e8" category="inline-link-macro-rx"></block></block>
  <block id="9db3ca538820d0cfb7b44ef80f16ca98" category="inline-link-macro">Ajuste de desempenho</block>
  <block id="a51906ad0f905e303cf3b09d82ec1db0" category="list-text"><block ref="a51906ad0f905e303cf3b09d82ec1db0" category="inline-link-macro-rx"></block></block>
  <block id="585389cefc924819e7ab6d5b7eba5f03" category="paragraph">Arquiteturas derivadas com variações de design e desempenho:</block>
  <block id="730b718214a170296ed598158264e021" category="summary">A solução BeeGFS inclui recomendações para ajuste de performance com base nos testes de verificação.</block>
  <block id="a49e13cf9bc8e242e7b828e3c9016699" category="paragraph">Embora o BeeGFS forneça desempenho razoável pronto para uso, a NetApp desenvolveu um conjunto de parâmetros de ajuste recomendados para maximizar a performance. Esses parâmetros levam em consideração as funcionalidades dos nós de bloco e-Series subjacentes e todos os requisitos especiais necessários para executar o BeeGFS em uma arquitetura de HA de disco compartilhado.</block>
  <block id="6900084f28039c00033899865271a4b5" category="section-title">Ajuste de performance para nós de arquivos</block>
  <block id="7ed4e287a78a4cc348d1e60d143ceda8" category="paragraph">Os parâmetros de ajuste disponíveis que você pode configurar incluem o seguinte:</block>
  <block id="d8eb1bf5eeddb34869fa0aee2c5c3be0" category="list-text">* Configurações do sistema na UEFI/BIOS de nós de arquivo.* Para maximizar o desempenho, recomendamos configurar as configurações do sistema no modelo de servidor que você usa como nós de arquivo. Você configura as configurações do sistema quando configura seus nós de arquivo usando a configuração do sistema (UEFI/BIOS) ou as APIs do Redfish fornecidas pelo controlador de gerenciamento de placa base (BMC).</block>
  <block id="adecdfd501fe0c9f7674b95abecb661b" category="paragraph">As configurações do sistema variam dependendo do modelo de servidor que você usa como nó de arquivo. As configurações devem ser configuradas manualmente com base no modelo de servidor em uso. Para saber como configurar as configurações do sistema para os nós de arquivo validados do Lenovo SR665, <block ref="891cfd1f8dbb99c09432be0144a5be81" category="inline-link-macro-rx"></block>consulte .</block>
  <block id="6721128d9ea380f9965cc220f28619e1" category="list-text">* Configurações padrão para os parâmetros de configuração necessários.* Os parâmetros de configuração necessários afetam a forma como os serviços BeeGFS são configurados e como os volumes do e-Series (dispositivos de bloco) são formatados e montados pelo pacemaker. Estes parâmetros de configuração necessários incluem o seguinte:</block>
  <block id="93de4dab2e303d649f94f0880095e6ef" category="list-text">Parâmetros de configuração do BeeGFS Service</block>
  <block id="c5b3473e89672cc155d0436c6e60bd52" category="inline-link">Parâmetros de configuração do serviço BeeGFS</block>
  <block id="0a31efbdaa47f7da5564c0e43b03e7ea" category="paragraph">Você pode substituir as configurações padrão para os parâmetros de configuração, conforme necessário. Para obter os parâmetros que podem ser ajustados para suas cargas de trabalho ou casos de uso específicos, consulte o<block ref="986eca0f3f99dd3e8d8640fddbc137d2" category="inline-link-rx"></block>.</block>
  <block id="334a50f926a902a241ecfae54f3cce32" category="list-text">Os parâmetros de formatação e montagem do volume são definidos como padrões recomendados e devem ser ajustados apenas para casos de uso avançados. Os valores padrão farão o seguinte:</block>
  <block id="4b9b870ed7f3db8f28c2ddcf4d3bd986" category="list-text">Otimize a formatação inicial do volume com base no tipo de destino (como gerenciamento, metadados ou armazenamento), juntamente com a configuração RAID e o tamanho do segmento do volume subjacente.</block>
  <block id="9f641b3b08e18d35b2219dee293e2038" category="list-text">Ajuste a forma como o pacemaker monta cada volume para garantir que as alterações sejam imediatamente lavadas para nós de bloco da série E. Isso evita a perda de dados quando os nós de arquivo falham com gravações ativas em andamento.</block>
  <block id="72247689b02927b1ceac4fb69e6c9954" category="inline-link">formatação de volume e parâmetros de configuração de montagem</block>
  <block id="11a09874ac1f09275ccc827cbc44353e" category="paragraph">Para obter os parâmetros que podem ser ajustados para suas cargas de trabalho ou casos de uso específicos, consulte o<block ref="0ea07919cef6ebe8518c59fc238308fd" category="inline-link-rx"></block>.</block>
  <block id="4d8ee2002969aa8084ace10838f40531" category="list-text">* Configurações do sistema no sistema operacional Linux instalado nos nós de arquivo.* Você pode substituir as configurações padrão do sistema operacional Linux ao criar o inventário do Ansible na etapa 4 do <block ref="dbbcb9482f49ee969cddb7f10864cbd0" category="inline-link-macro-rx"></block>.</block>
  <block id="c5d80eb8c0726de2a9804385295dc0e3" category="paragraph">As configurações padrão foram usadas para validar a solução BeeGFS no NetApp, mas você pode alterá-las para ajustá-las aos seus workloads ou casos de uso específicos. Alguns exemplos das configurações do sistema operacional Linux que você pode alterar incluem o seguinte:</block>
  <block id="b56281fe1e5f14da49b6d1d4c6ad0cd9" category="list-text">Filas de e/S em dispositivos de bloco e-Series.</block>
  <block id="43a8170c4aebbb467c4d4b59d77a7662" category="paragraph">Você pode configurar filas de e/S nos dispositivos de bloco e-Series usados como destinos BeeGFS para:</block>
  <block id="ce0213a2bd6755f2eacf9574b2b56dda" category="list-text">Ajuste o algoritmo de agendamento com base no tipo de dispositivo (NVMe, HDD, etc.).</block>
  <block id="c78d3d0bdafa5fc5623e3d56a9cc33ce" category="list-text">Aumentar o número de pedidos pendentes.</block>
  <block id="b785a1945e736aa8340d2e4bde128b82" category="list-text">Ajuste os tamanhos dos pedidos.</block>
  <block id="a9a2c451a0c5c7939a07afe7cd297216" category="list-text">Otimizar o comportamento de leitura antecipada.</block>
  <block id="f39721f45b17814f0740b3c066ca0b66" category="list-text">Definições de memória virtual.</block>
  <block id="552afad9cf059c34e2ed8d24ff34fc12" category="paragraph">Você pode ajustar as configurações de memória virtual para um desempenho otimizado de streaming contínuo.</block>
  <block id="aa8e8d4d1817c4e08c70cd3c1b4c89b9" category="list-text">Definições da CPU.</block>
  <block id="423dd652f980ba19cb7fb7f577576270" category="paragraph">Você pode ajustar o regulador de frequência da CPU e outras configurações da CPU para obter o máximo desempenho.</block>
  <block id="eb2cf8d186779ea110100038f3ec2e90" category="list-text">Leia o tamanho da solicitação.</block>
  <block id="f9a2fc1e1676d37df014ebfbdfa9a90d" category="paragraph">Você pode aumentar o tamanho máximo da solicitação de leitura para HCAs NVIDIA.</block>
  <block id="ba4dcc8d5b46a4c30176506ef828aea4" category="section-title">Ajuste de desempenho para nós de bloco</block>
  <block id="4f59030dbd3da04d4b74738f5149fffb" category="paragraph">Com base nos perfis de configuração aplicados a um componente básico do BeeGFS específico, os grupos de volume configurados nos nós de bloco mudam ligeiramente. Por exemplo, com um nó de bloco de EF600 unidades de 24 unidades:</block>
  <block id="841fc343eee01328e222ebada200ca5d" category="list-text">Para o componente básico único, incluindo gerenciamento, metadados e serviços de storage do BeeGFS:</block>
  <block id="bbea55f4794f89e45fe7c40eaf8ca3ee" category="list-text">Grupo de volumes RAID 10, mais de 1x 2 2 vezes, para serviços de gerenciamento e metadados do BeeGFS</block>
  <block id="92f2b7b47db52c081f552bd884a78ae7" category="list-text">Grupos de volumes RAID 6 de 2x 8 2 vezes mais para serviços de storage BeeGFS</block>
  <block id="4f4960028dfd13311a5679d2450101d1" category="list-text">Para um componente básico de storage e metadados do BeeGFS:</block>
  <block id="fdd7b1bdaea27f32d5925fd1a957fce4" category="list-text">Grupo de volumes RAID 10, mais de 1x 2 2 vezes, para serviços de metadados BeeGFS</block>
  <block id="196fdf9280847a2a4a9ddd0b8520bdfb" category="list-text">Para o storage BeeGFS apenas componente básico:</block>
  <block id="632ac8eccac17a8789dd33202130e509" category="list-text">Grupos de volumes RAID 6 de 2x 10 2 vezes mais para serviços de storage BeeGFS</block>
  <block id="014e85e7f3bbdad1ad6f193e82d21755" category="inline-link-macro">instruções de implantação</block>
  <block id="39b751cb17d740944bc5071eba1abda2" category="admonition">Como o BeeGFS precisa de muito menos espaço de storage para gerenciamento e metadados em vez de storage, uma opção é usar unidades menores para os grupos de volumes RAID 10. As unidades menores devem ser preenchidas nos slots de unidade mais externos. Para obter mais informações, consulte <block ref="92eed053ec15880d36275e60ab80275b" category="inline-link-macro-rx"></block>.</block>
  <block id="1708794637b71b8aadfa80d503ccc505" category="paragraph">Todos eles são configurados pela implantação baseada em Ansible, juntamente com várias outras configurações geralmente recomendadas para otimizar a performance/o comportamento, incluindo:</block>
  <block id="b02fbba0a56e144e15b688980d01275a" category="list-text">Ajustar o tamanho do bloco de cache global para 32KiB e ajustar a descarga de cache baseada na demanda para 80%.</block>
  <block id="c70b65aef502812d5a0e8a4b173334d9" category="list-text">Desativar o balanceamento automático (garantindo que as atribuições de volume do controlador permaneçam como pretendido).</block>
  <block id="94966bf9df1a2fb2442d06d53723f28e" category="list-text">Ativar o cache de leitura e desativar o cache de leitura antecipada.</block>
  <block id="65f3cbabf1e92d0ce2d27d87d85a3c5a" category="list-text">Ativar o armazenamento em cache de gravação com espelhamento e exigir backup de bateria, para que os caches persistam por falha de um controlador de nó de bloco.</block>
  <block id="dfb95cf8b58d92dcb47401bae0964c5d" category="list-text">Especificar a ordem pela qual as unidades são atribuídas a grupos de volume, equilibrando e/S entre os canais de unidade disponíveis.</block>
  <block id="883ccbea6264c3d9c8ea56267b290a0a" category="summary">A configuração de software do BeeGFS no NetApp inclui componentes de rede BeeGFS, nós de arquivo de EF600 blocos, nós de arquivo BeeGFS, grupos de recursos e serviços BeeGFS.</block>
  <block id="dea1b03288253149cb4c55f3c4f10e3e" category="section-title">Configuração de rede BeeGFS</block>
  <block id="391f99769ce2b9374f0421ace7ce5ac5" category="paragraph">A configuração de rede BeeGFS consiste nos seguintes componentes.</block>
  <block id="f05f92f283e258444df8e73ac9508c74" category="list-text">*IPs flutuantes* os IPs flutuantes são uma espécie de endereço IP virtual que pode ser roteado dinamicamente para qualquer servidor na mesma rede. Vários servidores podem possuir o mesmo endereço IP flutuante, mas só podem estar ativos em um servidor a qualquer momento.</block>
  <block id="76a7e91177d008d5a202ef507a9049d7" category="paragraph">Cada serviço de servidor BeeGFS tem seu próprio endereço IP que pode se mover entre nós de arquivo, dependendo do local de execução do serviço de servidor BeeGFS. Esta configuração IP flutuante permite que cada serviço faça failover independentemente para o outro nó de arquivo. O cliente simplesmente precisa saber o endereço IP de um determinado serviço BeeGFS; ele não precisa saber qual nó de arquivo está executando esse serviço no momento.</block>
  <block id="527f436644c629cc1f2330d74c5c29b4" category="list-text">*Configuração multihoming do servidor BeeGFS* para aumentar a densidade da solução, cada nó de arquivo tem várias interfaces de storage com IPs configurados na mesma sub-rede IP.</block>
  <block id="5a19238d05fdcdb09e439e41a0a94349" category="paragraph">Configuração adicional é necessária para garantir que essa configuração funcione como esperado com a pilha de rede Linux, porque por padrão, as solicitações para uma interface podem ser respondidas em uma interface diferente se seus IPs estiverem na mesma sub-rede. Além de outras desvantagens, esse comportamento padrão torna impossível estabelecer ou manter adequadamente conexões RDMA.</block>
  <block id="e7a28f6c997a9c0eba41eb574b5f829c" category="paragraph">A implantação baseada em Ansible lida com o aperto do comportamento do caminho reverso (RP) e do protocolo de resolução de endereço (ARP), além de garantir quando os IPs flutuantes são iniciados e parados; as rotas e regras IP correspondentes são criadas dinamicamente para permitir que a configuração de rede multihomed funcione corretamente.</block>
  <block id="163d5c0f8034e540888104ef4ded6727" category="list-text">*A configuração multitrilho do cliente BeeGFS* _Multi-rail_ refere-se à capacidade de um aplicativo usar várias conexões de rede independentes, ou "trilhos", para aumentar o desempenho.</block>
  <block id="8d2644ad58bcbab1442816a77a82fefb" category="paragraph">BeeGFS implementa suporte multi-trilho para permitir o uso de várias interfaces IB em uma única sub-rede IPoIB. Essa capacidade permite recursos como balanceamento dinâmico de carga entre NICs de RDMA, otimizando o uso de recursos de rede. Ele também se integra ao armazenamento GPUDirect NVIDIA (GDS), que oferece maior largura de banda do sistema e diminui a latência e a utilização na CPU do cliente.</block>
  <block id="992c3cb2d0c5be332151afe6ab4d5005" category="paragraph">Esta documentação fornece instruções para configurações de sub-rede IPoIB únicas. As configurações de sub-rede IPoIB duplas são suportadas, mas não fornecem as mesmas vantagens que as configurações de sub-rede única.</block>
  <block id="12ec3f7db1a39d49d76e159a6fc9be24" category="paragraph">A figura a seguir mostra o balanceamento de tráfego entre várias interfaces de cliente BeeGFS.</block>
  <block id="4761409fb0a2290e1a6a09381da73347" category="inline-image-macro">Balanceamento de tráfego de interface</block>
  <block id="04e97962e6bb1a104f48fbc1086830e4" category="paragraph"><block ref="04e97962e6bb1a104f48fbc1086830e4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="02eef1a6d9aefa452755edb315057e27" category="paragraph">Como cada arquivo no BeeGFS geralmente é distribuído em vários serviços de storage, a configuração de vários trilhos permite que o cliente obtenha mais taxa de transferência do que o possível com uma única porta InfiniBand. Por exemplo, a amostra de código a seguir mostra uma configuração comum de distribuição de arquivos que permite ao cliente equilibrar o tráfego entre ambas as interfaces:</block>
  <block id="26b17225b626fb9238849fd60eabdf60" category="paragraph">E</block>
  <block id="b28b500a27afaa858536ee53a4c02d91" category="section-title">Configuração de nó de bloco de EF600 U.</block>
  <block id="6e88eb560b5c117f0226888b924af1c5" category="paragraph">Os nós de bloco são compostos por duas controladoras RAID ativas/ativas com acesso compartilhado ao mesmo conjunto de unidades. Normalmente, cada controlador possui metade dos volumes configurados no sistema, mas pode assumir o controle para o outro controlador conforme necessário.</block>
  <block id="674757e2095af366602187ca856f8ec4" category="paragraph">O software multipathing nos nós de arquivo determina o caminho ativo e otimizado para cada volume e se move automaticamente para o caminho alternativo no caso de uma falha de cabo, adaptador ou controlador.</block>
  <block id="458cd7cdbda7e7a38853eae8ce0e9662" category="paragraph">O diagrama a seguir mostra o layout do controlador em EF600 nós de bloco.</block>
  <block id="bbd50c1c67920eb714a77de6085a1da7" category="inline-image-macro">Array EF600</block>
  <block id="77ab09336108b97d55d660c37ecfa138" category="paragraph"><block ref="77ab09336108b97d55d660c37ecfa138" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b4adca73c8e2d619dedc4eb6a42bc966" category="paragraph">Para facilitar a solução de HA de disco compartilhado, os volumes são mapeados para os dois nós de arquivo, para que eles possam assumir o controle uns dos outros conforme necessário. O diagrama a seguir mostra um exemplo de como o serviço BeeGFS e a propriedade de volume preferencial são configurados para obter o máximo de performance. A interface à esquerda de cada serviço BeeGFS indica a interface preferida que os clientes e outros serviços usam para contatá-lo.</block>
  <block id="aa24db2ee9f316acbbbfcc348aff2139" category="inline-image-macro">Propriedade do volume de serviço do BeeGFS</block>
  <block id="81722745ad5693a2c53cb7fd80ef42cd" category="paragraph"><block ref="81722745ad5693a2c53cb7fd80ef42cd" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d1bff1512ad9e19d6469659f6a916a7e" category="paragraph">No exemplo anterior, clientes e serviços de servidor preferem se comunicar com o serviço de armazenamento 1 usando a interface i1b. O serviço de armazenamento 1 usa a interface i1a como o caminho preferido para se comunicar com seus volumes (storage_tgt_101, 102) no controlador A do primeiro nó de bloco. Esta configuração utiliza a largura de banda PCIe bidirecional completa disponível para o adaptador InfiniBand e consegue um melhor desempenho a partir de um adaptador InfiniBand HDR de porta dupla do que seria possível com PCIe 4,0.</block>
  <block id="f4fa0385d373373f4ab191231ead5909" category="section-title">Configuração do nó de arquivo BeeGFS</block>
  <block id="5e2d5eb9f991b81a298fb57212c715fe" category="paragraph">Os nós de arquivos BeeGFS são configurados em um cluster de alta disponibilidade (HA) para facilitar o failover de serviços BeeGFS entre vários nós de arquivo.</block>
  <block id="f409d0a0c329860646597bbcc45fcc4b" category="inline-link">Treinamento da Red Hat para complementos de alta disponibilidade</block>
  <block id="2d861baf986f6a35c479d15a72c8284c" category="paragraph">O projeto de cluster HA é baseado em dois projetos Linux HA amplamente utilizados: Corosync para associação de cluster e Pacemaker para gerenciamento de recursos de cluster. Para obter mais informações,<block ref="0a03558b42ce04f55d37553193f6d76f" category="inline-link-rx"></block>consulte .</block>
  <block id="79b70ba13b6d273b53c66d816a15830d" category="paragraph">A NetApp criou e estendeu vários agentes de recursos da estrutura de cluster aberta (OCF) para permitir que o cluster inicie e monitore de forma inteligente os recursos do BeeGFS.</block>
  <block id="ff07f4dbc22a6f0ecb4a11bfb6136d40" category="section-title">Clusters de HA do BeeGFS</block>
  <block id="7a189557128751d94f2d8bca38ccf462" category="paragraph">Normalmente, quando você inicia um serviço BeeGFS (com ou sem HA), alguns recursos devem estar implementados:</block>
  <block id="3f1f71800ded6b59769a66de67dd7d86" category="list-text">Endereços IP onde o serviço é acessível, normalmente configurados pelo Network Manager.</block>
  <block id="03eb5c90128e244e904f61d22569b4af" category="list-text">Sistemas de arquivos subjacentes usados como destino para o BeeGFS armazenar dados.</block>
  <block id="510de0f837e4aacf9e6eb3c08926bcff" category="paragraph">Estes são tipicamente definidos em<block ref="816a3ef77b62ade41c3f936c958aa555" prefix=" " category="inline-code"></block> e montados pelo Systemd.</block>
  <block id="49990dbe44b62019deed5be9f5c437a3" category="list-text">Um serviço Systemd responsável por iniciar processos BeeGFS quando os outros recursos estiverem prontos.</block>
  <block id="4f26c3922778ca3d5247b1281f6843af" category="paragraph">Sem software adicional, esses recursos começam apenas em um único nó de arquivo. Portanto, se o nó de arquivo ficar offline, uma parte do sistema de arquivos BeeGFS fica inacessível.</block>
  <block id="c60a1b018b03670c1a1a93baf9da5d45" category="paragraph">Como vários nós podem iniciar cada serviço BeeGFS, o fabricante de pacemaker precisa garantir que cada serviço e recursos dependentes estejam sendo executados apenas em um nó de cada vez. Por exemplo, se dois nós tentarem iniciar o mesmo serviço BeeGFS, há o risco de corrupção de dados se ambos tentarem gravar nos mesmos arquivos no destino subjacente. Para evitar esse cenário, a Pacemaker confia no Corosync para manter o estado geral do cluster em sincronia entre todos os nós e estabelecer quórum.</block>
  <block id="a96d4ad8c651d8ff21de193227e20f4d" category="paragraph">Se houver uma falha no cluster, o fabricante de Paz reagirá e reiniciará os recursos do BeeGFS em outro nó. Em alguns cenários, o pacemaker pode não ser capaz de se comunicar com o nó defeituoso original para confirmar que os recursos estão parados. Para verificar se o nó está inativo antes de reiniciar os recursos do BeeGFS em outro lugar, o fabricante de pacemaker bloqueia o nó com falha, idealmente removendo energia.</block>
  <block id="ad22605bb834d1c650f3b2f1e5c76401" category="paragraph">Muitos agentes de esgrima de código aberto estão disponíveis que permitem que o pacemaker cerque um nó com uma unidade de distribuição de energia (PDU) ou usando o controlador de gerenciamento de placa base (BMC) do servidor com APIs como o Redfish.</block>
  <block id="05273fb3cfbaf5190eee8cfc0c3e0597" category="paragraph">Quando o BeeGFS está em execução em um cluster de HA, todos os serviços do BeeGFS e os recursos subjacentes são gerenciados pelo Pacemaker em grupos de recursos. Cada serviço BeeGFS e os recursos dos quais depende são configurados em um grupo de recursos, o que garante que os recursos sejam iniciados e parados na ordem correta e colocados no mesmo nó.</block>
  <block id="de25b213ff1f6f931a4d9c0f59bbed69" category="paragraph">Para cada grupo de recursos BeeGFS, o pacemaker executa um recurso de monitoramento personalizado BeeGFS, responsável por detetar condições de falha e acionar failovers de forma inteligente quando um serviço BeeGFS não estiver mais acessível em um nó específico.</block>
  <block id="e33abb1ba19f563eaa662796e8b3021b" category="paragraph">A figura a seguir mostra os serviços e dependências do BeeGFS controlados pelo pacemaker.</block>
  <block id="a0db15ba7734a2f0bd68d8f7ec6da53b" category="inline-image-macro">Serviços de pacemaker-controlador</block>
  <block id="633cadaf9644bd4072214489980f4de0" category="paragraph"><block ref="633cadaf9644bd4072214489980f4de0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5346cef6f7de3aac02ebdfc1ae9b6f27" category="inline-link">Documentação BeeGFS no modo Multi</block>
  <block id="c4ae8913dc1f6c9fed7961516b16defd" category="admonition">Para que vários serviços BeeGFS do mesmo tipo sejam iniciados no mesmo nó, o pacemaker é configurado para iniciar os serviços BeeGFS usando o método de configuração Multi Mode. Para obter mais informações, consulte<block ref="bc179f675bb7a303402ecb902ab09448" category="inline-link-rx"></block> .</block>
  <block id="553c30108a127bc2c66537e58970be9e" category="paragraph">Como os serviços BeeGFS precisam ser capazes de iniciar em vários nós, o arquivo de configuração de cada serviço (normalmente localizado em<block ref="af1cad80e288805d61b78377a6d2c339" prefix=" " category="inline-code"></block>) é armazenado em um dos volumes do e-Series usados como destino do BeeGFS para esse serviço. Isso torna a configuração, juntamente com os dados de um serviço BeeGFS específico, acessível a todos os nós que possam precisar para executar o serviço.</block>
  <block id="1d62eb925570a160f6a58cd18984f578" category="summary">A solução BeeGFS inclui recomendações para o dimensionamento da performance e da capacidade com base nos testes de verificação.</block>
  <block id="6166a42aac4e50811124dbb35631ea78" category="paragraph">Com uma arquitetura de componentes básicos, o objetivo é criar uma solução simples de dimensionar adicionando vários componentes básicos para atender aos requisitos de um sistema BeeGFS específico. Usando as diretrizes abaixo, você pode estimar a quantidade e os tipos de componentes básicos do BeeGFS necessários para atender aos requisitos do seu ambiente.</block>
  <block id="a752ca5f8ca9bd168c12fc180ff734e3" category="paragraph">Tenha em mente que essas estimativas são o melhor desempenho. Aplicativos de benchmarking sintéticos são escritos e utilizados para otimizar o uso de sistemas de arquivos subjacentes de maneiras que aplicativos do mundo real podem não.</block>
  <block id="800f4a301937e5493aaaddfe77e10dd5" category="section-title">Dimensionamento da performance</block>
  <block id="6875300666b544ca98e406bd6ca73da1" category="paragraph">A tabela a seguir fornece o dimensionamento de desempenho recomendado.</block>
  <block id="83d4567aaaf81ff58ab394c3ad02accc" category="cell">Perfil de configuração</block>
  <block id="58a15ea9e5c981b498a5c119456b9dd9" category="cell">1MiB leituras</block>
  <block id="968dfca19c742301bc400a7c883b1594" category="cell">1MiB grava</block>
  <block id="8cf5b688a1a209b630cab18001501c76" category="cell">Metadados e armazenamento</block>
  <block id="5d44d1f7b753dee2968cad82eef2f1dd" category="cell">62GiBps</block>
  <block id="a5a649e4dec54d9f61f1cfc632dab412" category="cell">21GiBps</block>
  <block id="dfab8e8b566f2d091e7ecb4b4d65060b" category="cell">Apenas armazenamento</block>
  <block id="1d955116a3bafb864bcf6755485fce7e" category="cell">64GiBps</block>
  <block id="419cfc02b324dc7d8faefa90ed608fb0" category="inline-link">Requisitos do sistema</block>
  <block id="e618e38f89f153e374a90674c51efb8f" category="paragraph">As estimativas de dimensionamento da capacidade dos metadados baseiam-se na "regra geral" de que 500GB TB de capacidade é suficiente para cerca de 150 milhões de arquivos no BeeGFS. (Para obter mais informações, consulte a documentação do BeeGFS para<block ref="d422b619831c270410797364c04b1fb2" category="inline-link-rx"></block>.)</block>
  <block id="903cd75262aca9ec0b3a831bccc18869" category="paragraph">O uso de recursos como listas de controle de acesso e o número de diretórios e arquivos por diretório também afetam a rapidez com que o espaço de metadados é consumido. As estimativas de capacidade de armazenamento são responsáveis pela capacidade utilizável da unidade, juntamente com a sobrecarga RAID 6 e XFS.</block>
  <block id="9490db12574d3954607c7e9d91d28809" category="section-title">Dimensionamento da capacidade para componentes básicos de storage e metadados</block>
  <block id="015d2cd8138605f0cec20c9dffe04a93" category="paragraph">A tabela a seguir fornece o dimensionamento de capacidade recomendado para metadados, além de componentes básicos de storage.</block>
  <block id="b897bc1ea15940ab83faf02e07b143bf" category="cell">Grupos de volume de metadados de tamanho da unidade (2 RAID 1 2)</block>
  <block id="fa4beb4be6de6614b0cd1460e8d33b1f" category="cell">Capacidade de metadados (número de arquivos)</block>
  <block id="070e4137f478af27755d228dba080d41" category="cell">Grupos de volume de armazenamento de tamanho da unidade (8 RAID 2 6)</block>
  <block id="785d80cc95b60fc3365e05e3ae013331" category="cell">Capacidade de armazenamento (conteúdo do arquivo)</block>
  <block id="119c6b2e3908d75335ad13f9fead045a" category="cell">1.938.577.200</block>
  <block id="753b107ce954fb125f0557af947a86c5" category="cell">51,77 TB</block>
  <block id="bb586a502f621b433b3966d68c887364" category="cell">3.880.388.400</block>
  <block id="8b2e1597e74fb68a87ef415a1ce004fc" category="cell">103,55 TB</block>
  <block id="9c0aa8a6ddcfe00cef8951f0edd99c58" category="cell">8.125.278.000</block>
  <block id="b0baa6e5c027744d7e7f2a93d8686bf5" category="cell">216,74 TB</block>
  <block id="edd8590257b34c7c6f57e06f28bb9460" category="cell">17.269.854.000</block>
  <block id="0d9c02ec5b1f4c4a835073aa142d0b7f" category="cell">460,60 TB</block>
  <block id="a966f153f6f429bbd39c3ac2390ef970" category="admonition">Ao dimensionar metadados e componentes básicos de storage, você pode reduzir custos usando unidades menores para grupos de volumes de metadados em vez de grupos de volumes de storage.</block>
  <block id="f9fb1e607e840d5610c34a9f15da540e" category="section-title">Dimensionamento da capacidade para componentes básicos somente de storage</block>
  <block id="cd9db38cfde636fa7c304f8e67d8708d" category="paragraph">A tabela a seguir fornece o dimensionamento da capacidade de regra geral para componentes básicos somente de storage.</block>
  <block id="bc893b2686532fc683cb056beffd08aa" category="cell">Grupos de volume de armazenamento de tamanho da unidade (10 RAID 2 6)</block>
  <block id="4f7d0f08c61d0cc981b973ba853e2c6f" category="cell">59,89 TB</block>
  <block id="22f3cf273453d70fdc724d513005c81d" category="cell">119,80 TB</block>
  <block id="e4c2850d67996ecfe5e0b56e9637a470" category="cell">251,89 TB</block>
  <block id="f7c8918f0c24047e89e5842785e7b8ef" category="cell">538,55 TB</block>
  <block id="3cf8b9e44b7a1eb7154f2b777094e670" category="admonition">A sobrecarga de desempenho e capacidade de incluir o serviço de gerenciamento no componente básico básico (primeiro) são mínimas, a menos que o bloqueio global de arquivos esteja habilitado.</block>
  <block id="0dfb05d4ea761122194fbafcd7f3a5eb" category="summary">O design de segunda geração da solução BeeGFS on NetApp foi verificado usando três perfis de configuração de componentes básicos.</block>
  <block id="dd444e75087c1912fb6b2f9435eec0ba" category="paragraph">Os perfis de configuração incluem o seguinte:</block>
  <block id="ba33770125b7249843843e3524e48e5e" category="list-text">Um componente básico único, incluindo gerenciamento, metadados e serviços de storage do BeeGFS.</block>
  <block id="dc0ae690014a6e4ed1d17d728fce2e3a" category="list-text">Metadados do BeeGFS, além de um componente básico de storage.</block>
  <block id="f789cf74ad54c463cf1827c970b695c0" category="list-text">Componente básico somente de storage do BeeGFS.</block>
  <block id="9d550842e04b4f253a1d3e7bb3297890" category="paragraph">Os componentes básicos foram anexados a dois switches NVIDIA Quantum InfiniBand (MQM8700). Dez clientes BeeGFS também foram anexados aos switches InfiniBand e usados para executar utilitários de benchmark sintéticos.</block>
  <block id="f27d4d7620b1158ad830c498a6faf1c5" category="paragraph">A figura a seguir mostra a configuração BeeGFS usada para validar a solução BeeGFS no NetApp.</block>
  <block id="08193bfb92c50dc5860e0ae7ab70b8de" category="inline-image-macro">Configuração de validação BeeGFS</block>
  <block id="d4d7c2778d639ee21874e3a533b4cb45" category="paragraph"><block ref="d4d7c2778d639ee21874e3a533b4cb45" category="inline-image-macro-rx" type="image"></block></block>
  <block id="dfa0c76fc554fa6837cfe216381eb3df" category="section-title">Distribuição de arquivos BeeGFS</block>
  <block id="73bf7a09a102bdf9e2984ff15f2e62cc" category="paragraph">Um benefício dos sistemas de arquivos paralelos é a capacidade de distribuir arquivos individuais entre vários destinos de storage, o que pode representar volumes no mesmo ou em diferentes sistemas de storage subjacentes.</block>
  <block id="f781a67c7f55c5a3d6d505e3569ff3c3" category="inline-link">Riscar</block>
  <block id="0102b96fad09ea07b9b6c943ac48e706" category="inline-link">Striping API</block>
  <block id="be4c29766b20870006df2b27be87994e" category="paragraph">No BeeGFS, você pode configurar a distribuição por diretório e por arquivo para controlar o número de destinos usados para cada arquivo e controlar o tamanho do bloco (ou tamanho do bloco) usado para cada faixa de arquivo. Essa configuração permite que o sistema de arquivos ofereça suporte a diferentes tipos de cargas de trabalho e perfis de e/S sem a necessidade de reconfigurar ou reiniciar serviços. Você pode aplicar configurações de stripe usando a<block ref="525acd7d8ba0c119c88006411faf1d89" prefix=" " category="inline-code"></block> ferramenta de linha de comando ou com aplicativos que usam a API de striping. Para obter mais informações, consulte a documentação do BeeGFS para<block ref="d307c57bb94d8613bf23053de378d367" category="inline-link-rx"></block> e<block ref="d53017212bcf8a78d44d2efbf061a88a" category="inline-link-rx"></block>.</block>
  <block id="706c7a765e77b694cee17941887ccaaf" category="paragraph">Para alcançar o melhor desempenho, padrões de faixa foram ajustados ao longo dos testes, e os parâmetros usados para cada teste são observados.</block>
  <block id="a40727fe75676638a1b87009fafed260" category="section-title">Testes de largura de banda IOR: Vários clientes</block>
  <block id="a4c77786e4208d299fbf0c491eb99106" category="inline-link">HPC GitHub</block>
  <block id="8b2e6032c8801b379e2fd75991ebb452" category="paragraph">Os testes de largura de banda IOR usaram o OpenMPI para executar trabalhos paralelos da ferramenta de gerador de e/S sintética IOR (disponível a partir de<block ref="323e2ec03a214c41088a20e514e0a41e" category="inline-link-rx"></block>) em todos os nós de cliente 10 para um ou mais blocos de construção BeeGFS. Salvo indicação em contrário:</block>
  <block id="219cae8db1869355f9c480a2fe2c5d6d" category="list-text">Todos os testes usaram I/o direto com um tamanho de transferência de 1MiB.</block>
  <block id="de2223ae9c343f387e4a3549abf2a4fc" category="list-text">A distribuição de arquivos BeeGFS foi definida como um tamanho de 1MB chunksize e um destino por arquivo.</block>
  <block id="8aa2f9ce00cbab54a4479ba40f638773" category="paragraph">Os seguintes parâmetros foram utilizados para IOR com a contagem de segmentos ajustada para manter o tamanho do arquivo agregado para 5TiB para um bloco de construção e 40TiB para três blocos de construção.</block>
  <block id="015dd422187100bd2a53cae756db5bcd" category="paragraph-title">Uma base do BeeGFS (gerenciamento, metadados e storage) componente básico</block>
  <block id="a404b853baec85523834a070479317ea" category="paragraph">A figura a seguir mostra os resultados do teste de IOR com um único componente básico do BeeGFS (gerenciamento, metadados e storage).</block>
  <block id="25362da3867ffd1fb6b8e5946bb60770" category="inline-image-macro">Resultados únicos de IOR de componentes básicos do BeeGFS</block>
  <block id="815be59c5f2e9977f869e63692f4c698" category="paragraph"><block ref="815be59c5f2e9977f869e63692f4c698" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2eb32f267ab2864aa50a3171522c1574" category="paragraph-title">Componentes básicos de storage e metadados do BeeGFS</block>
  <block id="578da280bb783045852047cd081f65fd" category="paragraph">A figura a seguir mostra os resultados do teste de IOR com um único componente básico de storage e metadados do BeeGFS.</block>
  <block id="5ceb441734022db46316b9560c287a7f" category="inline-image-macro">Blocos de construção de storage e metadados do BeeGFS únicos para resultados de IOR</block>
  <block id="2fd2e54693b2c76f97569df889a592fd" category="paragraph"><block ref="2fd2e54693b2c76f97569df889a592fd" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2cf619569e1d3422599fa7ba3fff04f2" category="paragraph-title">Componente básico somente de storage do BeeGFS</block>
  <block id="720f0ab0184643d51a1197789875c393" category="paragraph">A figura a seguir mostra os resultados do teste de IOR com um único componente básico somente de storage do BeeGFS.</block>
  <block id="bc75db64efedca0861be31efc710d385" category="inline-image-macro">Resultados únicos de IOR de storage do BeeGFS</block>
  <block id="7f73d3737f911cd518afbf2c214c0c64" category="paragraph"><block ref="7f73d3737f911cd518afbf2c214c0c64" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9443a11095bad63a50d95ece24842fb2" category="paragraph-title">Três blocos de construção BeeGFS</block>
  <block id="e3b081c19738d20e5f52be67ac8d0361" category="paragraph">A figura a seguir mostra os resultados do teste de IOR com três componentes básicos do BeeGFS.</block>
  <block id="d63d6ac704b4d61d17ece2c0612e08f5" category="inline-image-macro">Três blocos de construção BeeGFS resultados IOR</block>
  <block id="9c28704420f2090ce57c2e671f191dc0" category="paragraph"><block ref="9c28704420f2090ce57c2e671f191dc0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9abc8771b8098ae505a1ff386b580ef3" category="paragraph">Como esperado, a diferença de desempenho entre o componente básico e o componente básico de armazenamento de metadados subsequentes é insignificante. Comparar os metadados e o componente básico de armazenamento e um componente básico somente de armazenamento mostra um ligeiro aumento no desempenho de leitura devido às unidades adicionais usadas como destinos de armazenamento. No entanto, não há diferença significativa no desempenho de gravação. Para obter um desempenho mais alto, você pode adicionar vários blocos de construção juntos para dimensionar o desempenho de forma linear.</block>
  <block id="7465e2f5afc6bc7ebff6ea05e19d52d3" category="section-title">Testes de largura de banda IOR: Cliente único</block>
  <block id="4cb463d8f88ac93de9fecb82d125d05c" category="paragraph">O teste de largura de banda IOR usou o OpenMPI para executar vários processos IOR usando um único servidor GPU de alto desempenho para explorar o desempenho possível para um único cliente.</block>
  <block id="6a2583bcd41d0a03702444d541162685" category="paragraph">Este teste também compara o comportamento de releitura e o desempenho do BeeGFS quando o cliente está configurado para usar o cache de página do kernel Linux <block ref="6e97c2177f166e83fa16865e701a7917" prefix="(" category="inline-code"></block>) versus a configuração padrão<block ref="8b365ffbd5d92a1b9c20f227a4b6fcec" prefix=" " category="inline-code"></block>.</block>
  <block id="0123881fd1c799161bf0cc847d402a42" category="paragraph">O modo de cache nativo usa o cache de página do kernel Linux no cliente, permitindo que as operações de releitura venham da memória local em vez de serem retransmitidas pela rede.</block>
  <block id="2748a8672e1df7ff75dc04c3e0086a44" category="paragraph">O diagrama a seguir mostra os resultados do teste de IOR com três componentes básicos do BeeGFS e um único cliente.</block>
  <block id="e5910bdf77b7103e1d2c0a93d4c49fc8" category="inline-image-macro">Três componentes básicos do BeeGFS com resultados de IOR de cliente único</block>
  <block id="f496e88262c7c32001b4a84ce3febf98" category="paragraph"><block ref="f496e88262c7c32001b4a84ce3febf98" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2e301b61d3683cc584633009bafffa70" category="admonition">BeeGFS striping para esses testes foi definido para um tamanho de 1MB chunksize com oito alvos por arquivo.</block>
  <block id="8c5eae70f19670232111d1823b5edb56" category="paragraph">Embora o desempenho de gravação e leitura inicial seja maior usando o modo de buffer padrão, para cargas de trabalho que releram os mesmos dados várias vezes, um aumento de desempenho significativo é observado no modo de armazenamento em cache nativo. Essa performance de releitura aprimorada é importante para workloads como o deep learning que releiam o mesmo conjunto de dados várias vezes em várias épocas.</block>
  <block id="e9f3e979fd823256ea73296f49e954da" category="section-title">Teste de desempenho de metadados</block>
  <block id="e3195dd21dbd9ee2c6c42f0c8a6c7128" category="paragraph">Os testes de performance de metadados usaram a ferramenta MDTest (incluída como parte da IOR) para medir a performance de metadados do BeeGFS. Os testes utilizaram OpenMPI para executar trabalhos paralelos em todos os dez nós de cliente.</block>
  <block id="44ece23db4ca31ae5b81205ad387af00" category="paragraph">Os seguintes parâmetros foram utilizados para executar o teste de benchmark com o número total de processos dimensionados de 10 a 320 na etapa de 2x e com um tamanho de arquivo de 4K.</block>
  <block id="b872c01a040702b121dc5f52261e99e0" category="paragraph">A performance dos metadados foi medida primeiro com um e dois componentes básicos de storage e metadados para mostrar como a performance é dimensionada com a adição de componentes básicos adicionais.</block>
  <block id="3c793d71f0d81892f28ab10f661381c8" category="paragraph-title">Um componente básico de storage e metadados do BeeGFS</block>
  <block id="c6c65b36c5c466822447bc4c94abd80c" category="paragraph">O diagrama a seguir mostra os resultados do MDTest com os componentes básicos de storage e metadados do BeeGFS.</block>
  <block id="09033d0c41b9b8aab0f364b81b9c69b3" category="inline-image-macro">Componentes básicos de storage e metadados do BeeGFS únicos</block>
  <block id="9a0ca14324a0c9493b33cc5efdcf3460" category="paragraph"><block ref="9a0ca14324a0c9493b33cc5efdcf3460" category="inline-image-macro-rx" type="image"></block></block>
  <block id="94c5de0e8c5b79f8b061a00a2d638234" category="paragraph-title">Dois componentes básicos de storage e metadados do BeeGFS</block>
  <block id="5d4514dbb64a843f08caa7fe8140c121" category="paragraph">O diagrama a seguir mostra os resultados do MDTest com dois componentes básicos de storage e metadados do BeeGFS.</block>
  <block id="362973e7a4fa534a7db69e8dfa0877a8" category="inline-image-macro">Dois componentes básicos de storage e metadados do BeeGFS</block>
  <block id="070cfbe37786e49518755132f73ded2c" category="paragraph"><block ref="070cfbe37786e49518755132f73ded2c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6bcc55d27d7ea16e6df55e7ec18fd377" category="section-title">Validação funcional</block>
  <block id="b15005270887e63f3c777c3722631021" category="paragraph">Como parte da validação desta arquitetura, o NetApp executou vários testes funcionais, incluindo os seguintes:</block>
  <block id="008151af32cff92eed6431ca4cf43500" category="list-text">Falha em uma única porta InfiniBand de cliente desativando a porta do switch.</block>
  <block id="73b83d70be21d004da6e079b00bb5948" category="list-text">Falha em uma única porta InfiniBand de servidor desativando a porta do switch.</block>
  <block id="f7b8ad51ce1aad4a6e15c6583fcbdd55" category="list-text">Acionando uma desativação imediata do servidor usando o BMC.</block>
  <block id="6148d6995d77c1b8b1bfd4c6f299162b" category="list-text">Colocação graciosa de um nó em standby e falha no serviço para outro nó.</block>
  <block id="1cc77e3527f4ac004c8a5cdb5cac049e" category="list-text">Colocando um nó de volta on-line e falhando serviços de volta para o nó original.</block>
  <block id="908463015e2671e9d90b06353dabae03" category="list-text">Desligar um dos switches InfiniBand usando a PDU. Todos os testes foram realizados enquanto o teste de estresse estava em andamento com o<block ref="2f737a641ac05fa577f51efab6ed8e27" prefix=" " category="inline-code"></block> parâmetro definido nos clientes BeeGFS. Não foram observados erros ou interrupções na e/S.</block>
  <block id="c49182dc0c7a70b9cd2e10853d9ec6c7" category="inline-link">Changelog</block>
  <block id="788a9659515e495b379621cac9040872" category="admonition">Há um problema conhecido (consulte a<block ref="9892b1a82a523d642c4ee2c76b765b8b" category="inline-link-rx"></block>) quando as conexões RDMA cliente/servidor BeeGFS são interrompidas inesperadamente, seja pela perda da interface principal (conforme definido na<block ref="7f8e8358da4bb8d8e7f6f717ad9eb0e9" prefix=" " category="inline-code"></block>) ou por falha de um servidor BeeGFS; e/S cliente ativo pode travar por até dez minutos antes de retomar. Esse problema não ocorre quando os nós BeeGFS são colocados graciosamente dentro e fora de espera para manutenção planejada ou se o TCP estiver em uso.</block>
  <block id="16e30c156c86a2bc6240a20ed7b6fdc4" category="section-title">Validação do NVIDIA DGX SuperPOD e BasePOD</block>
  <block id="40fa362dda8b4d271b61c38987bd5131" category="paragraph">A NetApp validou uma solução de storage para NVIDIAs DGX A100 SuperPOD usando um sistema de arquivos BeeGFS semelhante, que consiste em três componentes básicos com os metadados e o perfil de configuração de storage aplicado. O esforço de qualificação envolveu o teste da solução descrita por esse NVA com vinte servidores de GPU DGX A100 que executam diversos benchmarks de storage, aprendizado de máquina e deep learning. Com base na validação estabelecida pelo SuperPOD DGX A100 da NVIDIA, a solução BeeGFS on NetApp foi aprovada para os sistemas DGX SuperPOD H100, H200 e B200. Essa extensão se baseia no cumprimento dos requisitos de sistema e de benchmark estabelecidos anteriormente, conforme validado com o NVIDIA DGX A100.</block>
  <block id="7c6326491c77a63417df94790ba07083" category="inline-link">NVIDIA DGX SuperPOD com NetApp</block>
  <block id="64dc43320ec1a44c390fafb5e2408f4b" category="inline-link">NVIDIA DGX BasePOD</block>
  <block id="33d753992c8525a016e60650889ef7a9" category="paragraph">Para obter mais informações,<block ref="917e0b817a1bc5579c3d00c8de7a0790" category="inline-link-rx"></block> consulte e<block ref="d4d49ddfca3de3daecdc231399362db8" category="inline-link-rx"></block>.</block>
  <block id="51bfd24e79e0939d84e9230980db5f18" category="summary">A solução BeeGFS on NetApp está atualmente em seu segundo projeto geracional.</block>
  <block id="fa0de4179a84e742d2d88028d16bf137" category="doc">Projete gerações</block>
  <block id="51c16b7415d506b9bbcedd7241c7c1c0" category="paragraph">A primeira e a segunda geração incluem uma arquitetura básica que incorpora um sistema de arquivos BeeGFS e um sistema de storage NVMe EF600. No entanto, a segunda geração baseia-se na primeira a incluir estes benefícios adicionais:</block>
  <block id="20667306535e51f69f34371b95abfd0b" category="list-text">Duplique o desempenho e a capacidade, adicionando apenas 2U GB de espaço em rack</block>
  <block id="edcc56d654a1a9362699f309c738a185" category="list-text">Alta disponibilidade (HA) com base em um design de hardware de duas camadas de disco compartilhado</block>
  <block id="21b6d1b90774505daa15a9be831436a9" category="inline-link-macro">guia de design</block>
  <block id="1cba1266f00c729aee1318803f870d22" category="list-text">Arquitetura projetada para os sistemas NVIDIA DGX SuperPOD A100, H100, H200 e B200, que foi validada anteriormente em um cluster de aceitação dedicado na NVIDIA. Leia mais sobre o NVIDIA DGX SuperPOD com a NetApp no <block ref="e98320202738eb339bebe66cbb05ad8f" category="inline-link-macro-rx"></block>.</block>
  <block id="189fdda096d5b994e140eac128f464e1" category="section-title">Segundo design geracional</block>
  <block id="145c927b5996411105e8a05381bfab75" category="section-title">Primeiro design geracional</block>
  <block id="10ca191b839b35e5100464ff59b95b97" category="paragraph">A primeira geração de BeeGFS no NetApp foi projetada para workloads de aprendizado de máquina (ML) e inteligência artificial (AI) usando os sistemas de storage NVMe NetApp EF600, o sistema de arquivos paralelos BeeGFS, os sistemas NVIDIA A100 e os switches IB NVIDIA Mellanox Quantum QM8700 200GBGb/s. Esse design também oferece InfiniBand (IB) de 200GB GB/s para a malha de interconexão de cluster de computação e storage para fornecer uma arquitetura totalmente baseada em IB para workloads de alto desempenho.</block>
  <block id="8c2de6dc6972aa428c25b73867ee0c6c" category="inline-link-macro">NetApp EF-Series AI com os sistemas DGX A100 e BeeGFS da NVIDIA</block>
  <block id="cb0e1ee82028e21bcb25d1cedee42a90" category="paragraph">Para obter mais informações sobre a primeira geração, <block ref="7c75f12548abfaad3f9a226ecdfc54d3" category="inline-link-macro-rx"></block>consulte .</block>
  <block id="cef5ab698867f39ec4b495cba708da1a" category="summary">A solução BeeGFS on NetApp combina o sistema de arquivos paralelos do BeeGFS com os sistemas de storage NetApp EF600 para uma infraestrutura confiável, dimensionável e econômica que acompanha os workloads exigentes.</block>
  <block id="c0c4b60d27032c028c91440e9d3be949" category="doc">Visão geral da solução</block>
  <block id="c6ff1c8ffcd7024a30e7240129bf57a8" category="section-title">Programa NVA</block>
  <block id="f109ec830b8ab112f8e89da398d4ca0f" category="paragraph">A solução BeeGFS on NetApp faz parte do programa NetApp Verified Architecture (NVA), que fornece aos clientes configurações de referência e orientações de dimensionamento para workloads e casos de uso específicos. As soluções NVA são completamente testadas e projetadas para minimizar os riscos de implantação e acelerar o time-to-market.</block>
  <block id="aef5a6ba281c6919d0a3e3ff7d8feaf3" category="section-title">Visão geral do design</block>
  <block id="a1d7af56cbcfca285cd257ae3430a2d3" category="inline-link-macro">visão geral da arquitetura</block>
  <block id="61dd8d13bec6e1ac3455eb2e13d61261" category="paragraph">A solução BeeGFS on NetApp foi projetada como uma arquitetura de componentes básicos dimensionável, configurável para uma variedade de workloads exigentes. Seja lidando com muitos arquivos pequenos, gerenciando grandes operações de arquivos ou uma carga de trabalho híbrida, o sistema de arquivos pode ser personalizado para atender a essas necessidades. A alta disponibilidade é incorporada ao design com o uso de uma estrutura de hardware de duas camadas que permite failover independente em várias camadas de hardware e garante desempenho consistente, mesmo durante degradações parciais do sistema. O sistema de arquivos BeeGFS oferece um ambiente dimensionável e de alta performance em diferentes distribuições do Linux. Além disso, apresenta aos clientes um namespace de storage único de fácil acesso. Saiba mais no <block ref="45037eea1e64b480408f051dfe424a3c" category="inline-link-macro-rx"></block>.</block>
  <block id="2a3b399798aa16ecfbc1425cc560bfad" category="section-title">Casos de uso</block>
  <block id="9a250aa43ea6738ca4cd441c42e26b4e" category="paragraph">Os seguintes casos de uso se aplicam à solução BeeGFS no NetApp:</block>
  <block id="f743e786ba2a29eb033d8f7e1e2101d3" category="inline-link">BeeGFS para IA: Fato versus ficção</block>
  <block id="b761cb5be0f07b26af56bda6c19cf90a" category="list-text">Inteligência artificial (AI), incluindo aprendizado de máquina (ML), aprendizado profundo (DL), processamento de linguagem natural em larga escala (PNL) e compreensão de linguagem natural (NLU). Para obter mais informações,<block ref="e0ec3865f791595484686c9b79436d0e" category="inline-link-rx"></block>consulte .</block>
  <block id="3476c4aa4908c2b49f576f13d95d657a" category="inline-link">Por que BeeGFS vai além da HPC</block>
  <block id="4becc7ac7e53ca421f06307e37478c8a" category="list-text">Computação de alto desempenho (HPC), incluindo aplicativos acelerados por MPI (interface de passagem de mensagens) e outras técnicas de computação distribuída. Para obter mais informações,<block ref="3f795d4ce44ed51872cb7704a4553f2a" category="inline-link-rx"></block>consulte .</block>
  <block id="89b4dd8e856627d44ffe8d3d0066cd98" category="list-text">Workloads de aplicação caraterizados por:</block>
  <block id="c9ccfce7935790c9fd0d9ccf98da5177" category="list-text">Leitura ou escrita em arquivos maiores que 1GB</block>
  <block id="680e47afa4860ce2ac4a078a0d466121" category="list-text">Leitura ou escrita no mesmo arquivo por vários clientes (10s, 100s e 1000s)</block>
  <block id="56e0e65d3207ad1f0f7efb003935c936" category="list-text">Conjuntos de dados com vários terabytes ou multipetabytes.</block>
  <block id="f36d694578bdc30f9cfa5faeb163df61" category="list-text">Ambientes que precisam de um único namespace de armazenamento otimizado para uma combinação de arquivos grandes e pequenos.</block>
  <block id="e654f7a86a4458b9cd662267e0f29b52" category="section-title">Benefícios</block>
  <block id="abc4f101e3891d158ab6ad80a3568c46" category="paragraph">Os principais benefícios do uso do BeeGFS no NetApp incluem:</block>
  <block id="f1161b5399c6f13433f0d7ef82e26dfc" category="list-text">Disponibilidade de designs de hardware verificados que fornecem integração total de componentes de hardware e software para garantir desempenho e confiabilidade previsíveis.</block>
  <block id="d678167c236b5d1af08b550c5038cccb" category="list-text">Implantação e gerenciamento com o Ansible para oferecer simplicidade e consistência em escala.</block>
  <block id="82a72442e588bfcf2e472da1d9834f2a" category="inline-link">Apresentando uma estrutura para monitorar as soluções NetApp e-Series</block>
  <block id="e30389e6b0882b87124e5401375e84e3" category="list-text">Monitoramento e observabilidade fornecidos com o e-Series Performance Analyzer e o plug-in BeeGFS. Para obter mais informações,<block ref="5fd4bf3409228b006228517662906ac3" category="inline-link-rx"></block>consulte .</block>
  <block id="fc20f26327fc88da82154f6c09f6991d" category="list-text">Alta disponibilidade com uma arquitetura de disco compartilhado que fornece durabilidade e disponibilidade de dados.</block>
  <block id="d47615808883de28c6943d206bf0d2cb" category="inline-link">Conheça o BeeGFS: Uma história dos investimentos prontos para o futuro</block>
  <block id="7f62321e8e75c63a1fe94a4d41435dac" category="list-text">Suporte para gerenciamento e orquestração modernos de workloads usando contêineres e Kubernetes. Para obter mais informações,<block ref="3ba4b256f7ab4762b0c431fc1809aa9b" category="inline-link-rx"></block>consulte .</block>
  <block id="e95081b0e85f690a9bdcb41ea940c186" category="summary">Para implementar a solução BeeGFS no NetApp, verifique se seu ambiente atende aos requisitos de tecnologia.</block>
  <block id="bcaa6be52b9fd12687892056d441d7e4" category="paragraph">Para implementar a solução BeeGFS no NetApp, garanta que seu ambiente atenda aos requisitos de tecnologia descritos neste documento.</block>
  <block id="47dee50ad0138b8f5ca70e40e86e6c04" category="section-title">Requisitos de hardware</block>
  <block id="7bf6b11b50ef88e180323b13813659d7" category="paragraph">Antes de começar, certifique-se de que seu hardware atenda às seguintes especificações para um único design de componente básico de segunda geração da solução BeeGFS on NetApp. Os componentes exatos para uma determinada implantação podem variar com base nos requisitos do cliente.</block>
  <block id="694e8d1f2ee056f98ee488bdc4982d73" category="cell">Quantidade</block>
  <block id="16cc6ce48a597aebb8ab5132cb3523dc" category="cell">Componente de hardware</block>
  <block id="c81e728d9d4c2f636f067f89cc14862c" category="paragraph">2</block>
  <block id="e40e4e443af5090e1039aebba0a6cd24" category="paragraph">Nós de arquivo BeeGFS</block>
  <block id="d065c203a4b9103e8896c456d35cceea" category="paragraph">Cada nó de arquivo deve atender ou exceder as especificações dos nós de arquivo recomendados para obter a performance esperada.</block>
  <block id="fbb1fad3a6f7d3538a8a1f8e9b6f1f08" category="paragraph">* Opções de nó de arquivo recomendadas:*</block>
  <block id="5be994ecb912a7fb7448cc05f90afcf7" category="list-text">*Lenovo ThinkSystem SR665 V3*</block>
  <block id="c0c1df1f325217c6fa04ce4c03ba875a" category="list-text">* Processadores:* 2x AMD EPYC 9124 16C 3,0 GHz (configurado como duas zonas NUMA).</block>
  <block id="e679361e60a219fe470d3ddb1f34a7d7" category="list-text">*Memória:* 256GBGB (16x 16GB TruDDR5 4800MHzGB RDIMM-A)</block>
  <block id="9946d99f0bd7932556af9646233dd2e8" category="list-text">*Expansão PCIe:* quatro slots PCIe Gen5 x16 (dois por zona NUMA)</block>
  <block id="a631c0a4a9b408ccc2559c2a3323af51" category="list-text">*Diversos:*</block>
  <block id="accd99f82c9ad3f026edd29ae4aaa9d8" category="list-text">Duas unidades em RAID 1 para os (1TB 7,2K SATA ou superior)</block>
  <block id="c618fd1e9213f6ba6e4961e3d1165110" category="list-text">Porta de 1GbE GbE para gerenciamento de SO na banda</block>
  <block id="db812d54d604d8c71ffd5e4be563e3e5" category="list-text">1GbE BMC com API Redfish para gerenciamento de servidores fora da banda</block>
  <block id="15cf8b6d2674b1d9c9b0383ecfee8929" category="list-text">Fontes de alimentação duplas hot swap e ventoinhas de desempenho</block>
  <block id="1fb2f6fd0ecd0371486e7642b03c5dee" category="list-text">*Lenovo ThinkSystem SR665*</block>
  <block id="78cbac434e403c43ef215a8541f8e62a" category="list-text">* Processadores:* 2x AMD EPYC 7343 16C 3,2 GHz (configurado como duas zonas NUMA).</block>
  <block id="634d6174b88e5856171cb65f69c870d6" category="list-text">*Memória:* 256GBGB (16x 16GB TruDDR4 3200MHzGB RDIMM-A)</block>
  <block id="7d381836b9e0d0145f8901a9e826a329" category="list-text">*Expansão PCIe:* quatro slots PCIe Gen4 x16 (dois por zona NUMA)</block>
  <block id="05323ece1df24d4488db57fd326597c0" category="cell">Nós de bloco do e-Series (array de EF600 U)</block>
  <block id="06fc3bd2748fbbf8f16ce893ede22214" category="paragraph">*Memória:* 256GB GB (128GB GB por controlador). *Adaptador:* 200GB/HDR de 2 portas (NVMe/IB). *Drives:* configurado para corresponder aos metadados e à capacidade de armazenamento desejados.</block>
  <block id="c9f0f895fb98ab9159f51fd0297e236d" category="cell">8</block>
  <block id="1e3cea12222d4b63badbe998ef00b55d" category="cell">Adaptadores de placa de host InfiniBand (para nós de arquivo).</block>
  <block id="1e36a3ec484f8d613eabadcfb7010a41" category="paragraph">Os adaptadores de placa de host variam de acordo com o modelo de servidor usado para o nó de arquivo. As recomendações para nós de arquivos verificados incluem:</block>
  <block id="22d9c94f9f4ead6ee028aeb105c59845" category="list-text">*Servidor Lenovo ThinkSystem SR665 V3:*</block>
  <block id="6ea32d47808c9a0a8b4ad8ce7c3d46a8" category="list-text">MCX755106AS-Heat ConnectX-7, NDR200, QSFP112, 2 portas, PCIe Gen5 x16, adaptador InfiniBand</block>
  <block id="2f02d951d56eb9f3451bbc826c3e8750" category="list-text">*Servidor Lenovo ThinkSystem SR665:*</block>
  <block id="a6db2cf27367b5061d9dcb3d029e4836" category="list-text">MCX653106A-HDAT ConnectX-6, HDR, QSFP-56, 2 portas, PCIe Gen4 x16, adaptador InfiniBand</block>
  <block id="b74051cf2ad1a189f8a05453712ca47a" category="cell">Switch de rede de armazenamento</block>
  <block id="abf33d394022ed774955ca8b4e892340" category="paragraph">O switch de rede de storage deve ter capacidade para velocidades InfiniBand de 200GB GB/s. Os modelos de interrutores recomendados incluem:</block>
  <block id="d7405c22a666ad0d0cb249c209ed8a2a" category="list-text">*NVIDIA QM9700 Quantum 2 NDR switch InfiniBand*</block>
  <block id="8371ac7bb43cddb78635bb02c4ecf477" category="list-text">*NVIDIA MQM8700 Quantum HDR InfiniBand switch*</block>
  <block id="118d935cca54466f59122caecfde09ad" category="section-title">Requisitos de cabeamento</block>
  <block id="0594ef398f6882c7d1d98994e3906850" category="paragraph">*Conexões diretas de nós de bloco para nós de arquivo.*</block>
  <block id="1fe3c9d0657c143dd35fa09974da425b" category="cell">Número de peça</block>
  <block id="ba2a9c6c8c77e03f83ef8bf543612275" category="cell">Comprimento</block>
  <block id="c3fc989bc0ee89bd4f833252b93ae9fc" category="cell">MCP1650-H001E30 (cabo de cobre passivo NVIDIA, QSFP56, 200GBm/s)</block>
  <block id="9859011cc78b3687689e719ce0d111a5" category="cell">1 m</block>
  <block id="b38917fef1efbb1471841f7a026c98c3" category="paragraph">*Conexões de nós de arquivo para o switch de rede de storage.* Selecione a opção de cabo apropriada na tabela a seguir de acordo com o switch de armazenamento InfiniBand. O comprimento recomendado do cabo é de 2m mm; no entanto, isso pode variar de acordo com o ambiente do cliente.</block>
  <block id="e71a6bc9da9d285c521501e596936972" category="cell">Modelo do interrutor</block>
  <block id="6fd115591b61cfe21f37443a0afb71e0" category="cell">Tipo de cabo</block>
  <block id="0f0a45940e8946022b971d4ccdf6154e" category="cell">NVIDIA QM9700</block>
  <block id="a87ff679a2f3e71d9181a67b7542122c" category="cell">4</block>
  <block id="979ceabbdb73904b7beec8a0d58c32b8" category="cell">Fibra ativa</block>
  <block id="270f13016300dfe6e2fe7c681978bef9" category="cell">MFA7U10-H002 (cabo de fibra ativa NVIDIA, InfiniBand de 400GB GB/s a 2x 200GB GB/s, OSFP a 2x QSFP56 GB)</block>
  <block id="f629de18a131cfa25b9f36ef4690fc92" category="cell">Cobre passivo</block>
  <block id="bebb3995ccd5809442d1bb1bc0a25e3a" category="cell">MCP7Y60-H002 (cabo de cobre passivo NVIDIA, InfiniBand de 400GB GB/s a 2x 200GB GB/s, OSFP a 2x QSFP56 GB)</block>
  <block id="f3b15dfb9c8e8d6298034f5cc32a59cd" category="cell">NVIDIA MQM8700</block>
  <block id="30657be0f3a2fdc8c171bce10af72efc" category="cell">MFS1S00-H003E (cabo de fibra ativa NVIDIA, InfiniBand de 200GB GB/s, QSFP56 GB)</block>
  <block id="c1850fdcdcbbaf2fb48f3055382d5a41" category="cell">MCP1650-H002E26 (cabo de cobre passivo NVIDIA, InfiniBand de 200GB GB/s, QSFP56 GB)</block>
  <block id="7ddb33edf227a18eb76201fcb9e2c9db" category="section-title">Requisitos de software</block>
  <block id="440907229edb210984831982728c0047" category="paragraph">Para performance e confiabilidade previsíveis, as versões da solução BeeGFS on NetApp são testadas com versões específicas dos componentes de software necessárias para implementar a solução.</block>
  <block id="5510cedb08df4208db0688e41cea716f" category="section-title">Requisitos de nó de arquivo</block>
  <block id="719d067b229178f03bcfa1da4ac4dede" category="cell">Software</block>
  <block id="34b6cd75171affba6957e308dcbd92be" category="cell">Versão</block>
  <block id="eae2868fd17cac4569887ad9ccca42c2" category="paragraph">RedHat Enterprise Linux</block>
  <block id="0db451285b4ab90f8e6012dfd8f0d190" category="paragraph">Servidor RedHat 9,3 físico com alta disponibilidade (soquete 2).</block>
  <block id="1f8b1bc6c0a349e88a3353e347489a9a" category="admonition">Os nós de arquivo exigem uma assinatura válida do RedHat Enterprise Linux Server e o Red Hat Enterprise Linux High Availability Add-on.</block>
  <block id="2488fead2064d4aeb886afc1a0010ee7" category="cell">Kernel do Linux</block>
  <block id="099646c88bdb63cce0ec389f4c842fed" category="cell">5.14.0-362.24.1.el9_3.x86_64</block>
  <block id="f6883581bd882ffdf705127738982586" category="cell">Drivers InfiniBand / RDMA</block>
  <block id="de4e152f23f311bbd0da3bd3cc07390d" category="cell">MLNX_OFED_LINUX-23,10-3,2.2,0-LTS</block>
  <block id="8c21a74db8c25bd18866fe78a889642f" category="paragraph">Firmware HCA</block>
  <block id="cf135b5c065c2f500279337fc59c78ac" category="paragraph">* Firmware HCA * ConnectX-7 FW: 28.39.1002 e PXE: 3.7.0201 e UEFI: 14.32.0012</block>
  <block id="932d22339e7f2f10a02d7bf453b85501" category="paragraph">* Firmware HCA * ConnectX-6 FW: 20.31.1014 e PXE: 3.6.0403 e UEFI: 14.24.0013</block>
  <block id="fbc534ed33feffdfe8fc56e7cde13e6e" category="section-title">Requisitos de nó de bloco de EF600 U.</block>
  <block id="e791d47d690cbc6aa7c7f9434ebd2fa1" category="cell">Sistema operacional SANtricity</block>
  <block id="41d49156a74390ee5d03e3516c1dca6b" category="cell">11.80.0</block>
  <block id="b384b3cf4ffa3a81a88e8687dd6ca028" category="cell">NVSRAM</block>
  <block id="36744b059ba2d833befd7109b0ba5167" category="cell">N6000-880834-D08.dlp</block>
  <block id="b89cb5f38b54c6181858af1281dcaeef" category="cell">Firmware da unidade</block>
  <block id="df4607ba320342072b2dc12271b08d2f" category="cell">Mais recente disponível para os modelos de acionamento em uso.</block>
  <block id="5fea6233624bde259c99b82e6d7de3c6" category="section-title">Requisitos de implantação de software</block>
  <block id="699b33acca98ab1d3eb0d684f59f1c98" category="paragraph">A tabela a seguir lista os requisitos de software implantados automaticamente como parte da implantação do BeeGFS baseada em Ansible.</block>
  <block id="eb57eb77389d7d4e71c5790c9c6ec1a7" category="cell">BeeGFS</block>
  <block id="141a8d7da406be785ba26084a46e1c00" category="cell">7.4.4</block>
  <block id="51cf7c858a71d06ee12a42cfbff97da7" category="cell">Corosync</block>
  <block id="92f9c52d96ebf7ac8dc2f41e6e11647a" category="cell">3,1.5-4</block>
  <block id="d95adee972ae170512bd3bdbce557054" category="cell">Pacemaker</block>
  <block id="c60a2cf4eb7f8efdd97013c9acb1f45b" category="cell">2,1.4-5</block>
  <block id="0a0d34e3921098e12d40efeb9e5b64ff" category="cell">OpenSM</block>
  <block id="a1a2ed259d1be22e6373097baea242eb" category="paragraph">opensm-5.17.2 (de MLNX_OFED_Linux-23,10-3,2.2,0-LTS)</block>
  <block id="83d32979307efd813f41ef5070206fd3" category="paragraph">A solução BeeGFS no NetApp é implantada e gerenciada a partir de um nó de controle do Ansible. Para obter mais informações, consulte<block ref="4410f583cbabaee2389115371eb2ab02" category="inline-link-rx"></block> .</block>
  <block id="158a122309f0454b31e4853755a5962a" category="paragraph">Os requisitos de software listados nas tabelas a seguir são específicos da versão da coleção Ansible do NetApp BeeGFS listada abaixo.</block>
  <block id="5487c77147bdac492714cd2896a16557" category="cell">6.x quando instalado através do pip: Ansible-6.0.0 e Ansible-core &gt; 2.13.0</block>
  <block id="a7f5f35426b927411fc9231b56382173" category="cell">Python</block>
  <block id="b1e65a5d34a577630a4fc7840358333f" category="cell">3,9 (ou posterior)</block>
  <block id="d35d779fe31977939a0a72c5c962d2af" category="cell">Pacotes Python adicionais</block>
  <block id="1f6e93b1ea11aa12e871822a2cabfc76" category="cell">Criptografia-43,0.0, netaddr-1,3.0, ipaddr-2.2.0</block>
  <block id="7af6b9890b6c8ce699616c59f48b5248" category="cell">Coleção BeeGFS do NetApp e-Series</block>
  <block id="070afde0274dc6039a8a8949d12a15cd" category="cell">3.2.0</block>
  <block id="014e0772632604acc6760e28c820cb22" category="summary">Visão geral da solução de problemas</block>
  <block id="818c6e601a24f72750da0f6c9b8ebe28" category="paragraph">Lorem ipsum dolor sit amet, conssectetur adippiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</block>
  <block id="71f5771dab663d80ba4dad1627e3386a" category="summary">Visão geral da atualização</block>
  <block id="e8afe31a21b6aae9717484d865743dae" category="sidebar">O BeeGFS no NetApp com storage e-Series é uma solução comprovada e integrada com uma infraestrutura de HPC simples, confiável, dimensionável e econômica que acompanha os workloads mais extremos.</block>
  <block id="28e8b3e83af233fe7085ba954fc6fd36" category="sidebar">BeeGFS no NetApp com storage e-Series</block>
  <block id="e3b88cba18358b065044f4788449026b" category="sidebar">Suporte à solução para o sistema de arquivos de cluster paralelo BeeGFS que é executado no storage NetApp e-Series de alta performance e baixa latência. Uma solução de HPC econômica, fácil de gerenciar e altamente disponível, com suporte da NetApp.</block>
  <block id="be11c74c1dd7f307bb80183a90dc2067" category="sidebar">Comece agora</block>
  <block id="12623d7cc9dff74b7325aa809ffc84df" category="sidebar">Blog - Saiba mais sobre BeeGFS e e-Series</block>
  <block id="0af9e7bf64a8e8c1b37ec554248f3d14" category="sidebar">Blog - BeeGFS para iniciantes</block>
  <block id="6316c96cdd51a54d33d0011cf5f10c81" category="sidebar">Blog - HA para BeeGFS</block>
  <block id="b89fcecfac1f6b8376165aabe5b6c5ee" category="sidebar">Documentos adicionais</block>
  <block id="bc4fe2352063642d68529f2aa0ca7ca3" category="sidebar">Documentação do produto NetApp</block>
  <block id="dbd68e15f4c30d2a47d780a9bf4f3da1" category="sidebar">Documentação BeeGFS</block>
  <block id="ba13e086fe19056a379b6240e05651a8" category="sidebar">TR-4915 - movimentação de dados com e-Series e BeeGFS para AI</block>
  <block id="974ad78dc53c253ebfe5b2b8b376f353" category="sidebar">Ferramentas e suporte</block>
  <block id="d564be87f67790fe4b92faa0eea29c48" category="sidebar">Coleções do NetApp e-Series no Ansible Galaxy</block>
  <block id="668e2078ef1b1722c77cdb5c523a4463" category="sidebar">Base de dados de Conhecimento da NetApp</block>
  <block id="2bae42f280067110dfd52cc69a468364" category="sidebar">Active IQ (login necessário)</block>
  <block id="c35665ae18bf4eff9afa413fcb281b07" category="sidebar">BeeGFS na NetApp docs</block>
  <block id="f40341c80e215542b4fdfe4e2f2e2a21" category="sidebar">O que está incluído neste site</block>
  <block id="2146c9256a2a3883605731032b6b8015" category="sidebar">Use arquiteturas verificadas</block>
  <block id="539652fdf317cc6e27c7373dc6fe13d3" category="sidebar">Rever o design da solução</block>
  <block id="0607ff4a53c90b270dd9fd9fce5c3d92" category="sidebar">Opção de alta capacidade</block>
  <block id="6c24b1b24585abc1454b91e5eb163103" category="sidebar">Implantar a solução</block>
  <block id="c5d1e465274381bca5df236c2a5a7d57" category="sidebar">Implantar software</block>
  <block id="97ecf64b4f2550ec2c53f49bb9fde847" category="sidebar">Configurar o nó de controle do Ansible</block>
  <block id="f99ff2e7716d2f6aa55979e838f0a328" category="sidebar">Crie o inventário do Ansible</block>
  <block id="da7f5c02044100badae24523f01941a2" category="sidebar">Defina os componentes básicos do BeeGFS</block>
  <block id="8025f3ce3e3e1dd003430788c4be8b5e" category="sidebar">Escale clusters BeeGFS</block>
  <block id="e304a70d2f42f62cefb9b474f73a1e91" category="sidebar">Percentagens de volume recomendadas</block>
  <block id="c9e209235fa71f94c6ca46692bb327a3" category="sidebar">Use arquiteturas personalizadas</block>
  <block id="2c9d17683bf440abca82add607aa6a61" category="sidebar">Configuração inicial</block>
  <block id="2186112c2fe23afc42ab96c76b10633c" category="sidebar">Instale e as ferragens do cabo</block>
  <block id="d2c71dbf224d233986fd9fee484a1bff" category="sidebar">Defina o sistema de arquivos BeeGFS</block>
  <block id="d2b9bae490422ee64c78a0825f1c1d47" category="sidebar">Definir nós de arquivo e bloco</block>
  <block id="e0f1083c7a219d40d5f2cce31e733837" category="sidebar">Configurar nós de arquivo individuais</block>
  <block id="aaadb61f664f163c98ebee0c9c962dda" category="sidebar">Configurar nós de bloco individuais</block>
  <block id="2c6acfbd0549df84a730e9135dfa642a" category="sidebar">Especifique a configuração do nó de arquivo comum</block>
  <block id="de1a5ef51d1a1d949b60789be3110709" category="sidebar">Especifique a configuração do nó de bloco comum</block>
  <block id="8283d5b2387e743d14bda00c2176d402" category="sidebar">Defina os serviços BeeGFS</block>
  <block id="4ea9c51458de5a50fcfc6ed1d6731376" category="sidebar">Serviço de gerenciamento BeeGFS</block>
  <block id="fc0c3d42b552d41c96b314b10a5d8322" category="sidebar">Serviços de metadados do BeeGFS</block>
  <block id="941fb85375314e8f03181252062f8321" category="sidebar">Serviços de storage BeeGFS</block>
  <block id="67f0f9eb53d18fde2907a79ffc52ab62" category="sidebar">Implante o sistema de arquivos BeeGFS</block>
  <block id="7d980eb0cd911c4219870701e3c4ffce" category="sidebar">Administrar clusters BeeGFS</block>
  <block id="58f82a4575a638ca0eba992df08c4d2b" category="sidebar">Quando usar Ansible versus PCs</block>
  <block id="a00d274d551f6b74718d44ea2bb6e6c3" category="sidebar">Atualizar os componentes do cluster HA</block>
  <block id="bbfb06821b506d64fdaee613711657d4" category="sidebar">Manutenção e manutenção</block>
  <block id="67f62a9c37bde591abc850b5a2b22b02" category="list-text">Crie um subdiretório para senhas de cluster e proteja o arquivo criptografando-o com o Ansible Vault (<block ref="69d38d4b5deda302461f6461c5317006" category="inline-link-rx"></block>consulte ):</block>
  <block id="8e7f7bdc10cb596910cce6b79c2e2ed6" category="list-text">Crie o subdiretório .<block ref="fc7cb0a7b647c6ff35b553a10d616c4b" prefix=" " category="inline-code"></block></block>
  <block id="166355001b2692bdc29d698719b5f702" category="list-text"><block ref="fc7cb0a7b647c6ff35b553a10d616c4b" prefix=" " category="inline-code"></block>No diretório, crie um arquivo de senhas rotulado<block ref="97a67fc90fe6d13cef22fa951de48f8d" prefix=" " category="inline-code"></block>.</block>
  <block id="da8d8318ceb4254068ec25272c92bc85" category="list-text">Preencha o<block ref="b8d32e4c2d78b6e404b69e5c1fbf3118" prefix=" " category="inline-code"></block> com o seguinte, substituindo todos os parâmetros de nome de usuário e senha de acordo com sua configuração:</block>
  <block id="7e60d329db54d74d692f53620b366281" category="list-text">Execute<block ref="150063209c60b18e2173569bd82ec639" prefix=" " category="inline-code"></block> e defina uma senha do Vault quando solicitado.</block>
  <block id="1d2459ca9cef1e38badde9d192eff628" category="admonition">Se o<block ref="f2bf771afbc16045e1951ded58c56f98" prefix=" " category="inline-code"></block> já estiver<block ref="63a9f0ea7bb98050796b649e85481845" prefix=" " category="inline-code"></block> , você poderá omitir opcionalmente o<block ref="424240cd4e5c359372b7f199431603d5" prefix=" " category="inline-code"></block> e especificar a<block ref="13d87b4892426ec19bdc58a4643d3104" prefix=" " category="inline-code"></block> opção ao executar o manual de estratégia.</block>
  <block id="49e794dd3d68025fd6943b67048e4f27" category="paragraph">A segunda geração do BeeGFS no NetApp é otimizada para atender aos requisitos de performance de workloads exigentes, incluindo computação de alta performance (HPC), aprendizado de máquina (ML), deep learning (DL) e outras técnicas de inteligência artificial (AI). Ao incorporar uma arquitetura de alta disponibilidade (HA) de disco compartilhado, esse design garante a durabilidade e a disponibilidade dos dados, tornando-o ideal para empresas e outras organizações que não podem pagar tempo de inatividade ou perda de dados. O projeto de segunda geração inclui componentes como servidores PCIe Gen5 e suporte para switches InfiniBand NVIDIA Quantum QM9700 400GBGb/s. Essa solução não só foi verificada pela NetApp, mas também passou na qualificação externa como opção de storage para o SuperPOD do NVIDIA DGX™ A100, com certificação estendida para os sistemas DGX SuperPOD H100, H200 e B200.</block>
  <block id="7da4cabbb2f4c4e53ccb9660355b7dd1" category="list-text">Os sistemas NVIDIA DGX SuperPOD apresentam DGX com GPU A100, H100, H200 e B200.</block>
  <block id="e02a1b9bf28135b2931b63ac814ff7ac" category="sidebar">NVA-1174 - BeeGFS no NetApp EF-Series com sistemas NVIDIA DGX SuperPOD</block>
</blocks>